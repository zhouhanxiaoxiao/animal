(function(t){function e(e){for(var a,o,n=e[0],l=e[1],c=e[2],u=0,m=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&m.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(m.length)m.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],a=!0,n=1;n<s.length;n++){var l=s[n];0!==i[l]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},i={app:0},r=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=l;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var a=s("85ec"),i=s.n(a);i.a},"07a6":function(t,e,s){t.exports=s.p+"img/login.747ffcef.png"},"0838":function(t,e,s){t.exports=s.p+"img/login-back.81fa4bcf.jpg"},"0980":function(t,e,s){},"0a16":function(t,e,s){"use strict";var a=s("709c"),i=s.n(a);i.a},"126f":function(t,e,s){},1576:function(t,e,s){},"1e51":function(t,e,s){},2659:function(t,e,s){"use strict";var a=s("7426"),i=s.n(a);i.a},2775:function(t,e,s){},3168:function(t,e,s){},"340b":function(t,e,s){"use strict";var a=s("6a1e"),i=s.n(a);i.a},3600:function(t,e,s){"use strict";var a=s("6036"),i=s.n(a);i.a},"3c0c":function(t,e,s){"use strict";var a=s("1576"),i=s.n(a);i.a},"3d78":function(t,e,s){},"411d":function(t,e,s){"use strict";var a=s("3d78"),i=s.n(a);i.a},"45e7":function(t,e,s){"use strict";var a=s("af5f"),i=s.n(a);i.a},4678:function(t,e,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=r(t);return s(e)}function r(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=r,t.exports=i,i.id="4678"},5332:function(t,e,s){"use strict";var a=s("2775"),i=s.n(a);i.a},"552e":function(t,e,s){"use strict";var a=s("fea1"),i=s.n(a);i.a},"56d7":function(t,e,s){"use strict";s.r(e);s("d3b7"),s("ac1f"),s("5319"),s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("transition",{attrs:{name:"fade"}},[s("router-view")],1),s("a-back-top")],1)},r=[],o={name:"App",data:function(){return{transitionName:"slide-right"}},created:function(){this.$store.commit("saveUser",this.$cookies.get("user"))},components:{},watch:{}},n=o,l=(s("034f"),s("9aa7"),s("2877")),c=Object(l["a"])(n,i,r,!1,null,null,null),d=c.exports,u=(s("ab8b"),s("3e48"),s("04e6"),s("bc3a")),m=s.n(u),p=s("8c4f"),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{width:"100%"}},[s("div",{staticClass:"form-group form-contains"},[t._m(0),s("br"),s("br"),s("br"),s("InputwhitName",{ref:"loginEmail",attrs:{"inp-data":t.loginEmailData},on:{updateData:t.updateLogin}}),t.loginflag?s("InputwhitName",{ref:"loginPwd",attrs:{"inp-data":t.loginPwdData},on:{updateData:t.updateLogin}}):t._e(),s("div",{staticClass:"form-row",staticStyle:{"font-size":"16px"}},[t.loginflag?t._e():s("div",{staticClass:"input-group input-group-sm mb-3",staticStyle:{"margin-top":"10px"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.verificationCode,expression:"verificationCode"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.$t("verification"),"aria-label":"输入验证码","aria-describedby":"get-verification-code"},domProps:{value:t.verificationCode},on:{input:function(e){e.target.composing||(t.verificationCode=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary btn-primary",staticStyle:{color:"white"},attrs:{type:"button",id:"get-verification-code"},on:{click:t.getVerification}},[t._v(t._s(t.$t("getverification"))+" ")])])])]),s("div",{staticClass:"noPassword"},[s("a",{on:{click:t.changeLoginMethod}},[t._v(t._s(t.loginflag?"验证码登录":"密码登录"))])]),s("div",{staticClass:"but-div"},[s("button",{staticClass:"btn btn-primary login-btn",attrs:{type:"button"},on:{click:t.submitLogin}},[t._v(t._s(t.$t("userLogin")))]),s("br"),s("button",{staticClass:"btn btn-light login-btn",attrs:{type:"button"},on:{click:function(e){return t.userRegister()}}},[t._v(t._s(t.$t("userRegister")))])])],1),s("language"),s("submitting",{attrs:{title:t.$t("submitting")}})],1)},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("img",{attrs:{src:s("07a6"),width:"100%"}})])}],b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-row input-line"},["checkbox"===t.inpData.inputType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"form-control form-control-sm",class:t.isValidClass,attrs:{placeholder:t.inpData.inputLabel,required:"",type:"checkbox"},domProps:{checked:Array.isArray(t.inputValue)?t._i(t.inputValue,null)>-1:t.inputValue},on:{change:[function(e){var s=t.inputValue,a=e.target,i=!!a.checked;if(Array.isArray(s)){var r=null,o=t._i(s,r);a.checked?o<0&&(t.inputValue=s.concat([r])):o>-1&&(t.inputValue=s.slice(0,o).concat(s.slice(o+1)))}else t.inputValue=i},function(e){return t.updatethisdata()}]}}):"radio"===t.inpData.inputType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"form-control form-control-sm",class:t.isValidClass,attrs:{placeholder:t.inpData.inputLabel,required:"",type:"radio"},domProps:{checked:t._q(t.inputValue,null)},on:{change:[function(e){t.inputValue=null},function(e){return t.updatethisdata()}]}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"form-control form-control-sm",class:t.isValidClass,attrs:{placeholder:t.inpData.inputLabel,required:"",type:t.inpData.inputType},domProps:{value:t.inputValue},on:{change:function(e){return t.updatethisdata()},input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}),s("div",{class:t.showClass},[t._v(" "+t._s(t.inpData.checkMsg)+" ")])])},g=[],v={name:"inputLabel",props:{inpData:{inputLabel:String,inputType:String,inputName:String,checkMsg:String,isValid:String}},data:function(){return{inputValue:"",isValidClass:"",showClass:""}},methods:{updatethisdata:function(){this.$emit("updateData",{ipkey:this.inpData.inputName,ipvalue:this.inputValue})}},watch:{inpData:{handler:function(t){"1"==t.isValid?(this.isValidClass="is-valid",this.showClass="valid-feedback"):"2"==t.isValid?(this.isValidClass="is-invalid",this.showClass="invalid-feedback"):(this.isValidClass="",this.showClass="")},deep:!0},checkMsg:function(t){console.log(t)}}},$=v,y=(s("b1c2"),Object(l["a"])($,b,g,!1,null,"40ba3a7e",null)),k=y.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-select"},[s("div",{staticClass:"btn-group btn-group-sm btn-group-toggle",attrs:{"data-toggle":"buttons"}},[s("label",{staticClass:"btn btn-link active"},[s("input",{attrs:{type:"radio",name:"options",id:"option1",checked:""},on:{click:function(e){return t.changeLanguage("zh")}}}),t._v(" 中文 ")]),s("span",{staticStyle:{color:"cadetblue"}},[t._v("|")]),s("label",{staticClass:"btn btn-link"},[s("input",{attrs:{type:"radio",name:"options",id:"option3"},on:{click:function(e){return t.changeLanguage("en")}}}),t._v(" English ")])])])},_=[],x={name:"language",methods:{changeLanguage:function(t){localStorage.setItem("local",t),window.location.reload()}}},C=x,S=Object(l["a"])(C,w,_,!1,null,"32bde44a",null),I=S.exports,D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal",attrs:{id:"submitting","data-backdrop":"static","data-keyboard":"false",tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v(t._s(t.title))])]),t._m(0)])])])},N=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-body"},[s("div",{staticClass:"progress"},[s("div",{staticClass:"progress-bar progress-bar-striped bg-success progress-bar-animated ",staticStyle:{width:"100%"},attrs:{role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"}})])])}],P={name:"submitting",props:{title:String}},R=P,T=Object(l["a"])(R,D,N,!1,null,"7b0c4f0d",null),j=T.exports,E=s("0838"),M=s.n(E),A=(s("3ca3"),s("ddb0"),s("2b3d"),s("a925")),L={userName:"用户名",userEmail:"邮箱",userPwd:"密码",userPwd2:"确认密码",userLogin:"登录",userRegister:"注册",verification:"输入验证码",getverification:"获取验证码",userNameNull:"用户名不能为空！",userEmailNull:"邮箱不能为空！",userPwdNull:"密码不能为空！",userPwd2Null:"请再次填写密码！",userEmailReg:"邮箱格式有误！",userEmailErr:"请使用脑中心邮箱注册！",userNameErr:"2到16位（中文，字母，数字）",userPwdRegErr:"必须有数字和字母组合",userPwd2NotSame:"两次输入的密码不一致！",verificationStatuErr:"验证码输入错误",verificationStatuOK:"验证通过",registerSucc:"注册成功，请等待管理员审核！",workReservation:"工作预约",edit:"编辑",delete:"删除",save:"保存",input:"导入",nav_hello:"你好",nav_home:"主页",nav_task:"任务中心",nav_mytask:"执行状态",nav_personal:"个人中心",nav_stock:"库存中心",personnal_btn_enter:"录入",personnal_btn_stock:"库存",current_stock:"扩繁品系",current_strain:"保种品系",animal_stock_stockID:"编号",animal_stock_genotype:"基因型",animal_stock_resource:"来源",animal_stock_container:"容器类型",animal_stock_number:"数量",animal_stock_environment:"保存环境",save_success:"保存成功！",reset:"重置",init:"未提交",submit:"提交",choose:"请选择",selectedAll:"全选",checkExist:"查重",hasExist:"已存在！",hasNotExist:"不存在！",exit:"退出",createTask:"新建任务",newStrain:"新增品系",useTask:"使用申请",task:"任务",batchEdit:"批量预约",orderDetail:"预约详情",expectionObject:"实验材料",detail:"详情",studyDirector:"实验负责人",purpose:"实验目的",species:"物种",strain:"品系（编号）",virginFly:"处女蝇",gender:"性别",male:"雄性",female:"雌性",empty:"无",yes:"是",no:"否",keep:"保种",resourceOrder:"预约",fileNameErr:"文件命名错误！",isHybridizationNecessary:"是否需要杂交",hybridStrain:"对应的杂交品系",specialFeeding:"特殊饲养条件",specificFeeding:"具体饲养条件",age:"年龄day",orderNumber:"拟用数量",expectedTime:"预计实验时间",operationProcess:"操作流程",operation:"操作",remarks:"备注",urgent:"加急",normal:"常规",special:"特殊",incompleteInformation:"信息不完整",completeInformation:"信息已确认",noUser:"未找到用户",cancel:"取消",confirm:"确认",submitting:"正在提交...",tasktype:"任务类型",currentstatu:"当前状态",creater:"创建人",createTime:"创建时间",refuse:"拒绝",previous:"上一页",next:"下一页",not_null:"不能为空!",expectionPrep:"材料准备",confirmTime:"确认时间",submitTime:"申请时间",birthday:"羽化日期",location:"保存地点",refuseTask:"拒绝请求",needmore:"需要扩繁",noneedmore:"不需要扩繁",startmore:"开始扩繁日期",endmore:"预计扩繁完成日期",reason:"原因",prepare:"准备",readyTime:"样本准备日期ready",realAge:"实际果蝇年龄",realNumber:"实际提供果蝇数量",allowTime:"可以实验时间",isComplete:"需求是否完成",commitSucc:"提交成功",selectRoles:"请选择角色",role:"角色",add:"新增",enterCorrectly:"输入正确",animalName:"物种",useType:"用途",supporter:"材料提供人员",processHandle:"流程管理",processMsg:"项目信息",projectName:"项目名称",dataType:"数据类型",principal:"负责人",overText:"先导出Excel,按照导出的Excel格式填写",unAcceptFile:"不合法文件，请上传.xls或.xlsx文件",samplePreparation:"样本制备",sampleInput:"样本录入",libraryPreparation:"文库制备",dismountData:"数据交付",bioinformaticsAnalysis:"生信分析",sampleMsg:"样本类型",nucleicAcid:"核酸",tissue:"组织",cell:"细胞",totalNumber:"总量",staffing:"人员安排",index:"序号",addNewRow:"新增一行",sampleName:"样本名称",sample:"样本",upload:"上传附件",meterial:"唯一资源占用",sampleStatu:"样本状态",tissueNumber:"组织量",bloodVolume:"血液体积",sampleVolume:"样本体积",concentration:"浓度",cellNumber:"细胞个数",cellLife:"细胞活性",cellSort:"细胞分选法",databaseType:"建库类型",SequencingPlatform:"测序平台",sampleIndex:"样本编号",testDate:"检测日期",extractMethod:"提取方法",checkResult:"检测结果",checkRemarks:"检测备注",checkUser:"检测员",reviewer:"审核人",remaining:"剩余量",selectOrderTime:"选择预约时间",start:"开始",tmpSave:"暂存",createdbtime:"建库时间",useNumber:"样本使用量(ug)/细胞使用量（细胞个数）",partsize:"片段大小（bp）",cyclenumber:"常规PCR循环数",databasetype2:"文库类型",databaseindex:"文库编号",createdbuser:"建库人",qbit:"Qubit浓度",libsize:"文库体积（ul）",seqmethods:"测序策略",uploadsize:"上机数据量",databaseunit:"数据量单位",libremark:"建库备注",uploadremark:"上机备注",dateaccount:"数据账号",datepassword:"数据密码",datepath:"数据目录",resultpath:"结果主路径",args:"分析流程/参数",reportpath:"报告地址",analyst:"分析人",complete:"完成",allcomplete:"已完成",allAllow:"已审核",notAllow:"未审核",pass:"通过",unPass:"不通过",submitted:"已提交",derivativeindex:"样本衍生编号",initSample:"初始样本",arrindex:"批次",accept:"接受",baseInfo:"基本信息",accountInfo:"帐号信息",messageInfo:"通知设置",userHead:"头像",subProcessName:"子流程名称",stop:"停止",outPut:"导出",importOrder:"导入申请任务",showReason:"查看原因",downLoadTip:"单击下载文件",fileList:"文件列表",transformSample:"转化样本",middleIndex:"中间产物编号",confirmCancel:"请确认是否取消?",showAll:"展示全部",subTask:"子任务",search:"搜索",selectGroup:"请选择实验室",areyousureDelete:"您确定要删除吗？",batchUpdate:"批量编辑",addNewStock:"新增库存",divide:"分组",projectComplete:"项目完结",areyousure:"您确认",areyousureCompleteProject:"您确定本项目已完成？",createContainerTime:"建管日期",projectDetail:"项目详情",userManager:"用户管理",department:"部门",newDepartment:"新增部门",departmentName:"部门名称",update:"更新",newRole:"新增角色",roleName:"角色名称",roleIndex:"角色编号",confirmDelete:"一旦删除将不可恢复，是否确认删除？",other:"其他",projectDesc:"项目描述",processSelectPre:"1.如果预期负责人不在列表中，请先注册之后再选择！\n2.标有星号（*）的条目为必填项目\n3.邮箱可以从下拉中选择或手动填写",processStep1Tip:"操作说明：1.点击‘新增’增加一行数据，填写内容后，点击‘暂存’保存页面数据。2.也可通过选中数据导出Excel模板，按照模板内容编写数据再进行导入。3.样本编号一栏无需填写，选择‘初始样本’、‘建库类型’之后点击‘暂存’将自动生成‘样本编号’。4.数据填写完成之后可点击‘完成’，数据将进入‘已完成未审核’列表，待创建者审核完成之后，数据进入‘已完成已审核’列表5.选中'已完成已审核列'表中的数据，点击‘样本制备‘进入样本制备环节。",remind:"提醒",repeat:"重复",numberErr:"必须大于1",systemErr:"系统异常！",about:"关于",E501:"该邮箱已注册，请等待管理员审核！",E502:"该邮箱已注册，请直接登录！",E500:"系统异常！",E503:"验证码校验不通过！",E504:"验证码已过期，请重新发送！",E505:"邮箱不存在！",E511:"密码错误！",E510:"用户不存在！",E520:"基因型已存在！",E550:"部门名称已存在！",E551:"角色名称重复",E552:"角色编号重复",process:{sampleInitTip:"请先选择此列，再进行其他项填写！",sampleIndexTip:"请先填写‘初始样本’、‘样本类型’、‘建库类型’。点击‘暂存’生成此列。",speciesTip:"若选择‘其他’，请填写NCBI标准名称。",derivativeindexTip:"若初始样本为‘组织样本’，请先选择‘转化样本’、‘建库类型’，点击‘暂存’生成此列。"}},O=L,F={userName:"userName",userEmail:"Email",userPwd:"password",userPwd2:"confirm password",userLogin:"log in",userRegister:"sign in",verification:"Input verification code",getverification:"Get Verification Code",nav_home:"home"},U=F;a["a"].use(A["a"]);var z=new A["a"]({locale:localStorage.getItem("local")||"en",messages:{zh:O,en:U}}),K=z,q=s("1157"),V=s.n(q),Y=s("f64c"),H={alicdnIcon:"//at.alicdn.com/t/font_2031063_tft0zte232a.js",isNull:function(t){return null==t||(void 0==t||(""==t||0==t.length))},sampletypes:function(t){var e=new Array;return"01"==t?(e.push({key:"01",val:"基因组DNA"}),e.push({key:"02",val:"total RNA"}),e.push({key:"03",val:"PCR产物"}),e.push({key:"04",val:"chip-seq DNA"}),e.push({key:"05",val:"单细胞扩增产物"}),e.push({key:"06",val:"FFPE"}),e.push({key:"00",val:"其它"})):"02"==t?(e.push({key:"21",val:"组织"}),e.push({key:"22",val:"全血"}),e.push({key:"23",val:"石蜡组织"}),e.push({key:"24",val:"血清"}),e.push({key:"25",val:"口腔拭子"}),e.push({key:"26",val:"菌体"}),e.push({key:"20",val:"其它"})):"03"==t&&(e.push({key:"41",val:"单细胞悬液"}),e.push({key:"40",val:"其他"})),e},sampleStatu:function(t){var e=new Array;return"01"==t?(e.push({key:"01",val:"溶于纯水"}),e.push({key:"02",val:"溶于TE"}),e.push({key:"03",val:"溶于无Rnase水"}),e.push({key:"04",val:"溶于EB"}),e.push({key:"05",val:"干粉"}),e.push({key:"00",val:"其它"})):"02"==t?(e.push({key:"21",val:"速冻组织"}),e.push({key:"22",val:"活体"}),e.push({key:"23",val:"RNAlater保存"}),e.push({key:"24",val:"Trlzol保存"}),e.push({key:"20",val:"其它"})):"03"==t&&(e.push({key:"41",val:"裂解液"}),e.push({key:"42",val:"液氮速冻"}),e.push({key:"40",val:"其它"})),e},cellSortMethods:function(){return[{key:"01",val:"过筛网"},{key:"02",val:"磁珠分选"},{key:"03",val:"口吸管法"},{key:"04",val:"BD流式分选"},{key:"05",val:"NanoCellect 流式分选"}]},databaseTypes:function(t){var e=new Array;return"01"==t?(e.push({key:"01",val:"DNA常规小片段"}),e.push({key:"02",val:"DNA非常规小片段"}),e.push({key:"03",val:"人外显子"}),e.push({key:"04",val:"PCR-free文库"}),e.push({key:"05",val:"真核普通转录组"}),e.push({key:"06",val:"真核链特异性"}),e.push({key:"07",val:"LncRNA"})):"02"==t?(e.push({key:"21",val:"10X单细胞转录组"}),e.push({key:"22",val:"10X空间转录组"}),e.push({key:"23",val:"10X ATAC"}),e.push({key:"24",val:"smart-seq"}),e.push({key:"25",val:"ATAC"}),e.push({key:"26",val:"HI-C"}),e.push({key:"27",val:"DNA常规小片段"}),e.push({key:"28",val:"DNA非常规小片段"}),e.push({key:"29",val:"人外显子"}),e.push({key:"30",val:"PCR-free文库"}),e.push({key:"31",val:"真核普通转录组"}),e.push({key:"32",val:"真核链特异性"}),e.push({key:"33",val:"LncRNA"})):"03"==t&&(e.push({key:"41",val:"10X单细胞转录组"}),e.push({key:"42",val:"10X ATAC"}),e.push({key:"43",val:"smart-seq"}),e.push({key:"44",val:"ATAC"}),e.push({key:"45",val:"HI-C"})),e},seqPlants:function(){var t=new Array;return t.push({key:"01",val:"Hiseq-SE50"}),t.push({key:"02",val:"Hiseq-PE150"}),t.push({key:"03",val:"Hiseq-PE250"}),t.push({key:"00",val:"其它"}),t},extractmethods:function(){var t=new Array;return t.push({key:"01",val:"柱提法"}),t.push({key:"02",val:"磁珠提法"}),t.push({key:"00",val:"其它"}),t},checkresults:function(){var t=new Array;return t.push({key:"01",val:"合格"}),t.push({key:"02",val:"风险"}),t.push({key:"03",val:"不合格"}),t},sampleInits:function(){var t=new Array;return t.push({key:"01",val:K.t("nucleicAcid")+K.t("sample")}),t.push({key:"02",val:K.t("tissue")+K.t("sample")}),t.push({key:"03",val:K.t("cell")+K.t("sample")}),t},commonUploadUrl:function(){return m.a.defaults.baseURL+"/file/import/uploadFile"},commonHandleUploadChange:function(t){"uploading"==t.file.status?V()("#submitting").modal("show"):(V()("#submitting").modal("hide"),"error"==t.file.status?Y["a"].error(K.t("systemErr")):"done"==t.file.status&&window.location.reload())},downLoad:function(t,e,s){m()({url:e,data:t,method:"post",responseType:"blob"}).then((function(t){var e=t.data;if(e){var a=window.URL.createObjectURL(new Blob([e])),i=document.createElement("a");i.style.display="none",i.href=a,i.setAttribute("download",s),document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(i.href),document.body.removeChild(i)}}))},getuserIdByRole:function(t,e){for(var s=0;s<t.length;s++)for(var a=0;a<t[s].roles.length;a++)if(t[s].roles[a].roletype==e)return t[s].id;return""},isAnimalSystem:function(t){return"animal"==t||"local"==t},isSeqproSystem:function(t){return"seqpro"==t||"local"==t}},B=H,J={name:"login",data:function(){return{errMsg:"",loginEmailData:{inputLabel:this.$t("userEmail"),inputType:"text",inputName:"loginEmail",checkMsg:"",isValid:"0"},loginPwdData:{inputLabel:this.$t("userPwd"),inputType:"password",inputName:"loginPwd",checkMsg:"",isValid:"0"},loginEmail:"",loginPwd:"",backgroundImage:"url(".concat(M.a,")"),loginflag:!0,verificationCode:"",regetSec:120}},beforeMount:function(){this.$("body").css("background-image",this.backgroundImage)},methods:{changeLoginMethod:function(){this.loginflag=!this.loginflag},getVerification:function(){var t=this,e=/^\w{3,}@cibr\.ac\.cn$/;B.isNull(this.loginEmail)?this.$message.error(this.$t("userEmailNull")):e.test(this.loginEmail)?(this.$("#submitting").modal("show"),this.$axios({method:"post",url:"/login/getVerification",params:{loginEmail:this.loginEmail}}).then((function(e){t.$("#submitting").modal("hide"),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.waitReCode(),t.codeTimer=setInterval((function(){t.waitReCode()}),1e3))})).catch((function(e){t.$("#submitting").modal("hide"),console.log(e),t.$message.error(t.$t("systemErr"))}))):this.$message.error(this.$t("userEmailReg"))},waitReCode:function(){var t=this.$("#get-verification-code").eq(0);""!=t.attr("disabled")&&void 0!=t.attr("disabled")||t.attr("disabled","disabled"),t.hasClass("reCode")||t.addClass("reCode"),t.text(this.regetSec+"秒后重新获取"),this.regetSec--,this.regetSec<1&&(clearInterval(this.codeTimer),t.removeAttr("disabled"),t.removeClass("reCode"),t.text(this.$t("getverification")))},submitLogin:function(){var t=this;this.$axios({method:"post",url:"/login",params:{loginEmail:this.loginEmail,password:this.$md5(this.loginPwd),verification:this.verificationCode,loginFlag:this.loginflag}}).then((function(e){console.log(e),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.$cookies.set("token",e.data.retMap.token,"1d"),t.$cookies.set("user",e.data.retMap.user,"1d"),t.$store.commit("saveUser",e.data.retMap.user),t.$("body").css("background-image","none"),t.$router.push("/home"))})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},updateLogin:function(t){this[t.ipkey]=t.ipvalue},userRegister:function(){this.$router.push("/register")}},components:{Submitting:j,Language:I,InputwhitName:k}},G=J,W=(s("411d"),Object(l["a"])(G,h,f,!1,null,"0e4503c6",null)),Z=W.exports,X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{width:"100%"}},[s("div",{staticClass:"form-group form-contains"},[t._m(0),s("InputwhitName",{ref:"registerName",attrs:{"inp-data":t.registerNameData},on:{updateData:t.updateRegister}}),s("InputwhitName",{ref:"registerEmail",attrs:{"inp-data":t.registerEmailData},on:{updateData:t.updateRegister}}),s("InputwhitName",{ref:"registerPwd",attrs:{"inp-data":t.registerPwdData},on:{updateData:t.updateRegister}}),s("InputwhitName",{ref:"registerPwd2",attrs:{"inp-data":t.registerPwd2Data},on:{updateData:t.updateRegister}}),s("div",{staticClass:"form-row "},[s("a-select",{staticStyle:{width:"95%"},attrs:{placeholder:t.$t("selectGroup")},model:{value:t.usergroup,callback:function(e){t.usergroup=e},expression:"usergroup"}},t._l(t.groups,(function(e){return s("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.groupname)+" ")])})),1)],1),s("div",{staticClass:"form-row input-group mb-3",staticStyle:{"margin-top":"20px"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.verificationCode,expression:"verificationCode"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.$t("verification"),"aria-label":"输入验证码","aria-describedby":"get-verification-code"},domProps:{value:t.verificationCode},on:{input:function(e){e.target.composing||(t.verificationCode=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary btn-primary",staticStyle:{color:"white"},attrs:{type:"button",id:"get-verification-code"},on:{click:t.getVerification}},[t._v(t._s(t.$t("getverification"))+" ")])])]),s("div",{class:t.codeShowClass},[t._v(" "+t._s(t.codeStatu)+" ")]),s("div",{staticClass:"but-div"},[s("button",{staticClass:"btn btn-primary login-btn",attrs:{type:"button"},on:{click:function(e){return t.userRegister()}}},[t._v(t._s(t.$t("userRegister"))+" ")]),s("br"),s("button",{staticClass:"btn btn-light login-btn",attrs:{type:"button"},on:{click:function(e){return t.userLogin()}}},[t._v(t._s(t.$t("userLogin")))])])],1),s("language"),s("submitting",{attrs:{title:t.$t("submitting")}})],1)},Q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("img",{attrs:{src:s("07a6"),width:"100%"}})])}],tt={name:"register",data:function(){return{errMsg:"",toastsMsg:"",codeTimer:"",regetSec:120,verificationCode:"",codeShowClass:"",codeStatu:"",registerNameData:{inputLabel:this.$t("userName"),inputType:"text",inputName:"registerName",checkMsg:"",isValid:"0"},registerEmailData:{inputLabel:this.$t("userEmail"),inputType:"text",inputName:"registerEmail",checkMsg:"",isValid:"0"},registerPwdData:{inputLabel:this.$t("userPwd"),inputType:"password",inputName:"registerPwd",checkMsg:"",isValid:"0"},registerPwd2Data:{inputLabel:this.$t("userPwd2"),inputType:"password",inputName:"registerPwd2",checkMsg:"",isValid:"0"},registerName:"",registerEmail:"",registerPwd:"",registerPwd2:"",usergroup:"",groups:[]}},beforeMount:function(){this.initPage()},methods:{initPage:function(){var t=this;this.$axios.post("/register/getGroups").then((function(e){"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):t.groups=e.data.retMap.groups})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},userLogin:function(){this.$router.push("/login")},updateRegister:function(t){this[t.ipkey]=t.ipvalue},getVerification:function(){var t=this,e=/^\w{3,}@cibr\.ac\.cn$/;if(!e.test(this.registerEmail))return this.registerEmailData.isValid="2",void(this.registerEmailData.checkMsg=this.$t("userEmailErr"));this.$("#submitting").modal("show"),this.$axios({method:"post",url:"/register/getVerification",params:{registerName:this.registerName,registerEmail:this.registerEmail,registerPwd:this.$md5(this.registerPwd)}}).then((function(e){t.$("#submitting").modal("hide"),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.waitReCode(),t.codeTimer=setInterval((function(){t.waitReCode()}),1e3))})).catch((function(e){t.$("#submitting").modal("hide"),console.log(e),t.$message.error(t.$t("systemErr"))}))},waitReCode:function(){var t=this.$("#get-verification-code").eq(0);""!=t.attr("disabled")&&void 0!=t.attr("disabled")||t.attr("disabled","disabled"),t.hasClass("reCode")||t.addClass("reCode"),t.text(this.regetSec+"秒后重新获取"),this.regetSec--,this.regetSec<1&&(clearInterval(this.codeTimer),t.removeAttr("disabled"),t.removeClass("reCode"),t.text(this.$t("getverification")))},checkData:function(){return"1"==this.registerNameData.isValid&&"1"==this.registerEmailData.isValid&&"1"==this.registerPwdData.isValid&&"1"==this.registerPwd2Data.isValid},userRegister:function(){if(this.verificationServerCode!=this.verificationCode?(this.codeShowClass="invalid-feedback",this.codeStatu=this.$t("verificationStatuOK")):(this.codeShowClass="invalid-feedback",this.codeStatu=this.$t("verificationStatuErr")),""!=this.usergroup){var t=this;this.$("#submitting").modal("show"),this.$axios({method:"post",url:"/register/submit",params:{registerName:this.registerName,registerEmail:this.registerEmail,registerPwd:this.$md5(this.registerPwd),verificationCode:this.verificationCode,usergroup:this.usergroup}}).then((function(e){t.$("#submitting").modal("hide"),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.$message.error(t.$t("registerSucc")),t.$router.push("/login"))})).catch((function(e){t.$("#submitting").modal("hide"),console.log(e),t.$message.error(t.$t("systemErr"))}))}else this.$message.error(this.$t("selectGroup"))}},watch:{registerName:function(t,e){if(""==t&&""!=e)this.registerNameData.isValid="2",this.registerNameData.checkMsg=this.$t("userNameNull");else if(""!=t){var s=/^[0-9a-zA-Z\u4E00-\u9FA5]{2,16}$/;if(!s.test(t))return this.registerNameData.isValid="2",void(this.registerNameData.checkMsg=this.$t("userNameErr"));this.registerNameData.isValid="1",this.registerNameData.checkMsg=""}},registerEmail:function(t,e){if(""==t&&""!=e)this.registerEmailData.isValid="2",this.registerEmailData.checkMsg=this.$t("userEmailNull");else if(""!=t){var s=/^\w{3,}@cibr\.ac\.cn$/;if(!s.test(t))return this.registerEmailData.isValid="2",void(this.registerEmailData.checkMsg=this.$t("userEmailErr"));this.registerEmailData.isValid="1",this.registerEmailData.checkMsg=""}},registerPwd:function(t,e){if(""==t&&""!=e)this.registerPwdData.isValid="2",this.registerPwdData.checkMsg=this.$t("userPwdNull");else if(""!=t){var s=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/;if(t==this.registerPwd2?(this.registerPwd2Data.isValid="1",this.registerPwd2Data.checkMsg=""):""!=this.registerPwd2&&(this.registerPwd2Data.isValid="2",this.registerPwd2Data.checkMsg=this.$t("userPwd2NotSame")),!s.test(t))return this.registerPwdData.isValid="2",void(this.registerPwdData.checkMsg=this.$t("userPwdRegErr"));this.registerPwdData.isValid="1",this.registerPwdData.checkMsg=""}},registerPwd2:function(t,e){if(""==t&&""!=e)this.registerPwd2Data.isValid="2",this.registerPwd2Data.checkMsg=this.$t("userPwd2Null");else if(""!=t){if(t!=this.registerPwd)return this.registerPwd2Data.isValid="2",void(this.registerPwd2Data.checkMsg=this.$t("userPwd2NotSame"));this.registerPwd2Data.isValid="1",this.registerPwd2Data.checkMsg=""}}},components:{Submitting:j,Language:I,InputwhitName:k}},et=tt,st=(s("612e"),Object(l["a"])(et,X,Q,!1,null,"4af17ee5",null)),at=st.exports,it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("top-nav"),s("div",{staticClass:"main-page"},[s("div",{staticClass:"summary-container"},[s("div",{staticStyle:{width:"100%",padding:"20px 20px","min-height":"150px"}},["animal"==this.$systemFlag||"local"==this.$systemFlag?[s("a-statistic",{staticStyle:{margin:"0px 25px",display:"inline-block"},attrs:{title:"最近一个月新增扩繁品系",value:t.oneMonthStockNumber,precision:0,"value-style":{color:"#3f8600"}},scopedSlots:t._u([{key:"prefix",fn:function(){return[s("a-icon",{attrs:{type:"arrow-up"}})]},proxy:!0}],null,!1,2679143898)}),s("a-statistic",{staticStyle:{margin:"0px 25px",display:"inline-block"},attrs:{title:"最近一个月新增保种品系",value:t.oneMonthStrainNumber,precision:0,"value-style":{color:"#3f8600"}},scopedSlots:t._u([{key:"prefix",fn:function(){return[s("a-icon",{attrs:{type:"arrow-up"}})]},proxy:!0}],null,!1,2679143898)}),s("a-statistic",{staticStyle:{margin:"0px 25px",display:"inline-block"},attrs:{title:"现有"+t.$t("current_strain"),value:t.allStrainNumber,precision:0,"value-style":{color:"#3f8600"}},nativeOn:{click:function(e){return t.currentStrain(e)}},scopedSlots:t._u([{key:"prefix",fn:function(){},proxy:!0}],null,!1,2418856153)}),s("a-statistic",{staticStyle:{margin:"0px 25px",display:"inline-block"},attrs:{title:"现有"+t.$t("current_stock"),value:t.stockNumber,precision:0,"value-style":{color:"#3f8600"}},nativeOn:{click:function(e){return t.currentStock(e)}},scopedSlots:t._u([{key:"prefix",fn:function(){},proxy:!0}],null,!1,2418856153)})]:t._e(),s("a-statistic",{staticStyle:{margin:"0px 25px",display:"inline-block"},attrs:{title:"进行中的任务",value:t.selfTaskNumber,precision:0,"value-style":{color:"#3f8600"}},nativeOn:{click:function(e){return t.myTask(e)}},scopedSlots:t._u([{key:"prefix",fn:function(){return[s("a-icon",{attrs:{type:"arrow-up"}})]},proxy:!0}])})],2)]),s("task-table-new",{attrs:{"page-location":"home"}})],1)],1)},rt=[],ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-container"},[a("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[a("router-link",{attrs:{to:"/home"}},[a("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[a("img",{attrs:{src:s("07a6"),width:"250px"}})])]),t._m(0),a("div",{staticClass:"collapse navbar-collapse",staticStyle:{"font-size":"20px"},attrs:{id:"navbarNav"}},[a("ul",{staticClass:"navbar-nav"},[a("li",{staticClass:"nav-item active"},[a("router-link",{attrs:{to:"/home"}},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v(t._s(t.$t("nav_home")))])])],1),a("li",{staticClass:"nav-item dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"task",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" "+t._s(t.$t("nav_task"))+" ")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"task"}},[a("router-link",{attrs:{to:"/task"}},[a("a",{staticClass:"dropdown-item"},[t._v(t._s(t.$t("nav_mytask")))])]),"seqpro"==this.$systemFlag||"local"==this.$systemFlag?a("router-link",{attrs:{to:"/task/process"}},[a("a",{staticClass:"dropdown-item"},[t._v(t._s(t.$t("processHandle")))])]):t._e(),"animal"==this.$systemFlag||"local"==this.$systemFlag?a("router-link",{attrs:{to:"/task/resourceOrder"}},[a("a",{staticClass:"dropdown-item"},[t._v(t._s(t.$t("workReservation")))])]):t._e()],1)]),"animal"==this.$systemFlag||"local"==this.$systemFlag?a("li",{staticClass:"nav-item dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"personal",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" "+t._s(t.$t("nav_stock"))+" ")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"personal"}},[a("router-link",{attrs:{to:"/stock/currentStrain"}},[a("a",{staticClass:"dropdown-item"},[t._v(t._s(t.$t("current_strain")))])]),a("router-link",{attrs:{to:"/stock/currentStock"}},[a("a",{staticClass:"dropdown-item"},[t._v(t._s(t.$t("current_stock")))])])],1)]):t._e(),a("li",{staticClass:"nav-item active"},[a("router-link",{attrs:{to:"/about"}},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v(t._s(t.$t("about")))])])],1)])]),a("div",[a("language")],1),a("div",{staticClass:"personal-info"},[a("div",{staticStyle:{display:"inline-block","margin-right":"10px"}},[a("a-avatar",{attrs:{size:50,src:t.userHeadSrc},on:{click:t.personalPage}})],1),a("div",{staticClass:"dropdown",staticStyle:{display:"inline-block"}},[a("button",{staticClass:"btn btn-outline-primary dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" "+t._s(t.$t("nav_hello")+" , "+t.userName)+" ")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[a("a",{staticClass:"dropdown-item",attrs:{id:"personalPage"},on:{click:t.personalPage}},[t._v(t._s(t.$t("nav_personal")))]),a("a",{staticClass:"dropdown-item",attrs:{id:"exit"},on:{click:t.sysExit}},[t._v(t._s(t.$t("exit")))])])])])],1),a("div")])},nt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"}},[s("span",{staticClass:"navbar-toggler-icon"})])}],lt=(s("b0c0"),{name:"TopNav",components:{Language:I},data:function(){return{user:{name:""}}},methods:{sysExit:function(){var t=this;this.$axios({url:"/system/exit",method:"post"}).then((function(e){"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.$cookies.remove("token"),t.$router.push("/login"))})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},personalPage:function(){this.$router.push("/personal/main")}},beforeMount:function(){this.$("body").css("background-image","none"),this.$("body").css("background-color","#e9ecef")},computed:{userName:function(){return this.$store.getters.getUser.name},userId:function(){return this.$store.getters.getUser.id},userHeadSrc:function(){return this.$axios.defaults.baseURL+"user/userHead/"+this.userId+".png"}}}),ct=lt,dt=(s("9be2"),Object(l["a"])(ct,ot,nt,!1,null,"52155620",null)),ut=dt.exports,mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{width:"90%","margin-left":"5%"}},[s("a-table",{attrs:{"data-source":t.taskList,pagination:t.pagina,loading:t.tableLoad,size:"middle",columns:t.columns},scopedSlots:t._u([t._l(this.columnNames,(function(e){return{key:e,fn:function(a,i){return[s("div",{key:e,staticStyle:{"font-size":"12px !important"}},["taskstatu"==e?s("div",[s("a-progress",{attrs:{showInfo:!1,percent:t.taskPro(i),size:"small",status:t.taskstatu(i)}})],1):"taskdesc"==e?s("div",["03"==i.tasktype?s("a-tag",{attrs:{color:"green"}},[t._v(" "+t._s(i.process.projectname)+" ")]):t._e(),t._v(" "+t._s(i.taskdesc)+" ")],1):"detail"==e?s("div",[s("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.showDetail(i)}}},[t._v(" "+t._s(t.$t("detail"))+" ")]),t._v(" "),t.isAdmin?s("a-popconfirm",{attrs:{placement:"top","ok-text":t.$t("yes"),"cancel-text":t.$t("no"),"auto-adjust-overflow":!0},on:{confirm:function(e){return t.confirmDelete(i.id)}}},[s("template",{slot:"title"},[s("p",[t._v(t._s(t.$t("confirmDelete")))])]),s("a-button",{attrs:{type:"danger",size:"small"}},[t._v(t._s(t.$t("delete")))])],2):t._e()],1):[s("a-tooltip",{attrs:{placement:"topLeft",title:t.showText(a,e,i)}},[t._v(" "+t._s(t.showText(a,e,i))+" ")])]],2)]}}}))],null,!0)}),s("submitting",{ref:"submitting",attrs:{title:t.$t("submitting")}})],1)},pt=[];s("d81d"),s("4d63"),s("25f0");function ht(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var s={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var a in s)if(new RegExp("(".concat(a,")")).test(e)){var i=s[a]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?i:ft(i))}return e}function ft(t){return("00"+t).substr(t.length)}var bt={name:"taskTableNew",components:{Submitting:j},props:{pageLocation:String},data:function(){return{taskList:[],columns:[],tableLoad:!1,selectedRowKeys:[],selectedRows:[],columnNames:[],users:[]}},beforeMount:function(){this.initPage()},methods:{confirmDelete:function(t){var e={taskId:t};this.$(this.$refs.submitting.$el).modal("show");var s=this;this.$axios.post("/task/deleteTask",e).then((function(t){s.$(s.$refs.submitting.$el).modal("hide"),"200"!=t.data.code?s.$message.error(s.$t(t.data.code)):s.initPage()})).catch((function(t){s.$(s.$refs.submitting.$el).modal("hide"),console.log(t),s.$message.error(s.$t("systemErr"))}))},showDetail:function(t){"02"==t.tasktype?this.$router.push({name:"askDetail",query:{taskId:t.id}}):"01"==t.tasktype?this.$router.push({name:"userAllow",query:{taskId:t.id}}):"03"==t.tasktype?this.$router.push({name:"processDetailNew",query:{taskId:t.id}}):"04"==t.tasktype&&this.$router.push({name:"partnerDetail",query:{taskId:t.id}})},taskstatu:function(t){return"01"==t.taskstatu?"active":"02"==t.taskstatu?"success":"03"==t.taskstatu?"exception":void 0},taskPro:function(t){if(console.log(t),"01"==t.tasktype)return"01"==t.taskstatu?50:100;if("02"==t.tasktype){var e=t.ask;return"00"==e.currentstatu?10:"01"==e.currentstatu?30:"02"==e.currentstatu||"03"==e.currentstatu?50:"04"==e.currentstatu?75:100}if("03"==t.tasktype)return 100;if("04"==t.tasktype){var s=t.partner;return"00"==s.taskstatu?50:(s.taskstatu,100)}},showText:function(t,e,s){if("tasktype"==e){var a="";return"01"==t?a="账号申请":"02"==t?a="使用申请":"03"==t?a="流程管理":"04"==t&&(a="协助申请"),a}if("createtime"==e)return ht(new Date(s.createtime),"yyyy-MM-dd");if("createuser"==e)for(var i=0;i<this.users.length;i++)if(this.users[i].id==t)return this.users[i].name;return t},initPage:function(){this.initColumns();var t=this,e={currentPage:t.currentPage-1,pageSize:t.pageSize,pageLocation:this.pageLocation};t.$axios.post("/task/gatAllTask",e).then((function(e){"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.taskList=e.data.retMap.alltask,t.taskList.map((function(t){return t.key=t.id})),t.users=e.data.retMap.users)})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},initColumns:function(){var t=new Array;for(var e in t.push({title:this.$t("tasktype"),dataIndex:"tasktype",scopedSlots:{customRender:"tasktype"}}),t.push({title:this.$t("currentstatu"),dataIndex:"taskstatu",scopedSlots:{customRender:"taskstatu"}}),t.push({title:this.$t("creater"),dataIndex:"createuser",scopedSlots:{customRender:"createuser"}}),t.push({title:this.$t("createTime"),dataIndex:"createtime",scopedSlots:{customRender:"createtime"}}),t.push({title:this.$t("remarks"),dataIndex:"taskdesc",scopedSlots:{customRender:"taskdesc"}}),t.push({title:this.$t("detail"),dataIndex:"detail",scopedSlots:{customRender:"detail"}}),this.columns=t,this.columnNames=new Array,t)this.columnNames.push(t[e].dataIndex)}},watch:{userName:function(){this.initPage()}},computed:{pagina:function(){return{showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","50","100"],total:this.taskList.length,showTotal:function(t){return"共 ".concat(t," 条")}}},userName:function(){return this.$store.getters.getUser.name},isAdmin:function(){return this.$store.getters.isAdmin}}},gt=bt,vt=Object(l["a"])(gt,mt,pt,!1,null,"6989b6db",null),$t=vt.exports,yt={name:"home",components:{TaskTableNew:$t,TopNav:ut},data:function(){return{allStrainNumber:0,selfTaskNumber:0,oneMonthStockNumber:0,oneMonthStrainNumber:0,stockNumber:0}},beforeMount:function(){this.initPage()},methods:{initPage:function(){var t=this;this.$axios.post("/home/preview").then((function(e){console.log(e),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.allStrainNumber=e.data.retMap.allStrainNumber,t.selfTaskNumber=e.data.retMap.selfTaskNumber,t.oneMonthStockNumber=e.data.retMap.oneMonthStockNumber,t.oneMonthStrainNumber=e.data.retMap.oneMonthStrainNumber,t.stockNumber=e.data.retMap.stockNumber)})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},currentStrain:function(){this.$router.push("/stock/currentStrain")},currentStock:function(){this.$router.push("/stock/currentStock")},myTask:function(){this.$router.push("/task")}},watch:{getUserId:function(){this.initPage()}},computed:{getUserId:function(){return this.$store.getters.getUser.id}}},kt=yt,wt=(s("6ef6"),Object(l["a"])(kt,it,rt,!1,null,"332214c2",null)),_t=wt.exports,xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"animal-stock-container"},[s("top-nav"),s("div",{staticClass:"stock-table"},[s("div",{staticClass:"batch-edit"},[s("a-button",{attrs:{type:"primary",disabled:t.selectallDisable},on:{click:t.batchOrder}},[t._v(t._s(t.$t("batchEdit")))]),t._v(" "),this.$store.getters.isResearcher?s("a-upload",{attrs:{name:"file",multiple:!0,action:t.importOrderUrl,headers:{token:this.$cookies.get("token")},"show-upload-list":!1},on:{change:t.handleChange}},[s("a-button",[s("a-icon",{attrs:{type:"upload"}}),t._v(t._s(t.$t("importOrder")))],1)],1):t._e()],1),s("table",{staticClass:"table table-striped table-hover"},[s("thead",{staticClass:"stock-table-head"},[s("tr",[s("th",{attrs:{scope:"col"}},[s("input",{attrs:{type:"checkbox",id:"selectAll",value:"selectAll"},on:{click:function(e){return t.selectAll("selectAll",e)}}})]),t._l(t.titles,(function(e,a){return s("th",{key:a,attrs:{scope:"col"}},[t._v(t._s(e))])}))],2)]),s("tbody",{staticClass:"stock-table-body"},t._l(t.rows,(function(e){return s("tr",{key:e.id,on:{click:function(e){return t.selectRow(e)}}},[s("th",{staticStyle:{width:"5%"},attrs:{scope:"row"}},[s("input",{staticClass:"form-check-input stock-line-select",attrs:{type:"checkbox",disabled:e.number<1||null==e.number},domProps:{value:e.id},on:{click:function(s){return t.selectAll(e.id,s)}}})]),s("td",{staticStyle:{width:"5%"}},[t._v(" "+t._s(e.index)+" ")]),s("td",{staticStyle:{width:"5%"}},[t._v(" "+t._s(e.selfIndex)+" ")]),s("td",{staticStyle:{width:"5%"}},[t._v(" "+t._s(e.stockID)+" ")]),s("td",{staticStyle:{width:"15%"}},[t._v(" "+t._s(e.genotype)+" ")]),s("td",{staticStyle:{width:"10%"}},[t._v(" "+t._s(e.resource)+" ")]),s("td",{staticStyle:{width:"10%"}},[t._v(" "+t._s(e.container)+" ")]),s("td",{staticStyle:{width:"5%"}},[t._v(" "+t._s(e.number)+" ")]),s("td",{staticStyle:{width:"5%"}},[t._v(" "+t._s(t.usageType(e.usagetype))+" ")]),s("td",{staticStyle:{width:"15%"}},[t._v(" "+t._s(e.environment)+" ")]),s("td",{staticStyle:{width:"10%"}},[t.canOrder?s("button",{staticClass:"btn btn-primary btn-sm stock-action",attrs:{type:"button",disabled:e.number<1||null==e.number},on:{click:function(s){return t.makeAppointment(e.id)}}},[t._v(" 预约 ")]):t._e(),t._v(" "),t.canEdit?s("button",{staticClass:"btn btn-primary btn-sm stock-action",attrs:{type:"button"},on:{click:function(s){return t.editStock(e.id)}}},[t._v(" 编辑 ")]):t._e()])])})),0)]),s("AppointmentDialog",{attrs:{"stock-ids":t.orderIds},on:{submitData:t.submitAllData}}),s("submitting",{attrs:{title:t.$t("submitting")}}),s("div",{staticClass:"page-index-container"},[s("nav",{staticClass:"page-index",attrs:{"aria-label":"Page navigation example "}},[s("ul",{staticClass:"pagination"},[s("li",{staticClass:"page-item",on:{click:function(e){return t.updateTable(t.currentPage-1)}}},[s("a",{staticClass:"page-link"},[t._v(t._s(t.$t("previous")))])]),t._l(t.pageTotal,(function(e){return s("li",{key:e,staticClass:"page-item",class:t.currentPage+1==e?"active":"",on:{click:function(s){return t.updateTable(e-1)}}},[s("a",{staticClass:"page-link"},[t._v(t._s(e))])])})),s("li",{staticClass:"page-item",on:{click:function(e){return t.updateTable(t.currentPage+1)}}},[s("a",{staticClass:"page-link"},[t._v(t._s(t.$t("next")))])])],2)])])],1)],1)},Ct=[],St=(s("7db0"),s("a434"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dialog-scrollable modal-xl"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.$t("orderDetail")))]),t._m(0)]),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group-sm col-md-3 was-validated"},[s("label",{attrs:{for:"studyDirector"}},[t._v(t._s(t.$t("studyDirector")))]),s("multiselect",{attrs:{id:"studyDirector",options:t.studyDirectors,searchable:!0,"close-on-select":!0,"allow-empty":!1,"show-labels":!1,"track-by":"name",label:"name",required:"",multiple:!0,taggable:!0,placeholder:"例：曲素素"},model:{value:t.selectedStudyDirector,callback:function(e){t.selectedStudyDirector=e},expression:"selectedStudyDirector"}},[s("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v(t._s(t.$t("noUser")))])])],1),s("div",{staticClass:"form-group-sm col-md-3 was-validated"},[s("label",{attrs:{for:"studyDirector"}},[t._v(t._s(t.$t("supporter")))]),s("multiselect",{attrs:{id:"supporter",options:t.supporters,searchable:!0,"close-on-select":!0,"allow-empty":!1,"show-labels":!1,"track-by":"name",label:"name",required:"",taggable:!0,placeholder:"例：曲素素"},model:{value:t.supporter,callback:function(e){t.supporter=e},expression:"supporter"}},[s("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v(t._s(t.$t("noUser")))])])],1),s("div",{staticClass:"form-group col-md-2 form-check"},[s("label",{attrs:{for:"urgent"}}),s("switchbox-cont",{attrs:{text:t.$t("urgent"),id:"urgent"},on:{getValue:t.getValue}})],1)]),s("div",[t._v(" "+t._s(t.$t("expectionObject"))+"： ")]),t._l(t.rows,(function(e){return s("order-item-detail",{key:e.stock.id,attrs:{row:e,"all-drosophila":t.allDrosophila,"all-merial":t.allMerial},on:{updateData:t.updateDetailData}})})),s("div",{staticClass:"form-group-sm col-md-12"},[s("label",{attrs:{for:"remarks"}},[t._v(t._s(t.$t("remarks")))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"form-control",attrs:{id:"remarks",placeholder:"例：我很着急",rows:"3"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])],2),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("cancel")))]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:!t.canSubmit},on:{click:t.submitTask}},[t._v(t._s(t.$t("confirm"))+" ")])])])])])}),It=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"stock-item-detail"},[s("p",[s("button",{staticClass:"btn btn-sm btn-block ",class:t.allReady?"btn-success":"btn-outline-danger",attrs:{type:"button","data-toggle":"collapse","data-target":"#aa"+t.row.stock.id,"aria-expanded":"false","aria-controls":"aa"+t.row.stock.id}},[t._v(" "+t._s(t.btnText)+" ")])]),s("div",{staticClass:"collapse",attrs:{id:"aa"+t.row.stock.id}},[s("div",{staticClass:"card card-body"},[s("div",{staticClass:"form-row task-item-container "},[s("div",{staticClass:"form-group-sm col-md-3 was-validated"},[s("label",{attrs:{for:"Purpose"}},[t._v(t._s(t.$t("purpose")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.purpose,expression:"purpose"}],staticClass:"form-control",attrs:{type:"text",id:"Purpose",required:"",placeholder:"例：药物实验-control-001"},domProps:{value:t.purpose},on:{input:function(e){e.target.composing||(t.purpose=e.target.value)}}})]),s("div",{staticClass:"form-group-sm col-md-3"},[s("label",{attrs:{for:"expectedTime"}},[t._v(t._s(t.$t("expectedTime")))]),s("div",{attrs:{id:"expectedTime"}},[s("date-picker",{attrs:{"value-type":"format",format:"YYYY-MM-DD","disabled-date":t.disabledDate(t.row.stock.usagetype)},model:{value:t.expectedTime,callback:function(e){t.expectedTime=e},expression:"expectedTime"}})],1)]),s("div",{staticClass:"form-group-sm col-md-3"},[s("label",{attrs:{for:"species"}},[t._v(t._s(t.$t("species")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"species",disabled:"",placeholder:"例：果蝇"},domProps:{value:t.row.animal.name}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"strain"}},[t._v(t._s(t.$t("strain")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"strain",disabled:"",placeholder:"例：w1118"},domProps:{value:t.row.animal.stockId}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"virginFly"}},[t._v(t._s(t.$t("virginFly")))]),s("div",{attrs:{id:"virginFly"}},[s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.virginFly,expression:"virginFly"}],staticClass:"form-check-input",attrs:{type:"radio",name:"virginFly"+t.row.stock.id,id:"yes"+t.row.stock.id,checked:"",value:"Y"},domProps:{checked:t._q(t.virginFly,"Y")},on:{change:function(e){t.virginFly="Y"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"yes"+t.row.stock.id}},[t._v(t._s(t.$t("yes")))])]),s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.virginFly,expression:"virginFly"}],staticClass:"form-check-input",attrs:{type:"radio",name:"virginFly"+t.row.stock.id,id:"no"+t.row.stock.id,value:"N"},domProps:{checked:t._q(t.virginFly,"N")},on:{change:function(e){t.virginFly="N"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"no"+t.row.stock.id}},[t._v(t._s(t.$t("no")))])])])]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"gender"}},[t._v(t._s(t.$t("gender")))]),s("div",{attrs:{id:"gender"}},[s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.gender,expression:"gender"}],staticClass:"form-check-input",attrs:{type:"radio",name:"gender"+t.row.stock.id,id:"male"+t.row.stock.id,checked:"",value:"male"},domProps:{checked:t._q(t.gender,"male")},on:{change:function(e){t.gender="male"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"male"+t.row.stock.id}},[t._v(t._s(t.$t("male")))])]),s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.gender,expression:"gender"}],staticClass:"form-check-input",attrs:{type:"radio",name:"gender"+t.row.stock.id,id:"female"+t.row.stock.id,value:"female"},domProps:{checked:t._q(t.gender,"female")},on:{change:function(e){t.gender="female"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"female"+t.row.stock.id}},[t._v(t._s(t.$t("female")))])]),s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.gender,expression:"gender"}],staticClass:"form-check-input",attrs:{type:"radio",name:"gender"+t.row.stock.id,id:"empty"+t.row.stock.id,value:"empty"},domProps:{checked:t._q(t.gender,"empty")},on:{change:function(e){t.gender="empty"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"empty"+t.row.stock.id}},[t._v(t._s(t.$t("empty")))])])])]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"isHybridizationNecessary"}},[t._v(t._s(t.$t("isHybridizationNecessary")))]),s("div",{attrs:{id:"isHybridizationNecessary"}},[s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.isHybridizationNecessary,expression:"isHybridizationNecessary"}],staticClass:"form-check-input",attrs:{type:"radio",name:"isHybridizationNecessary"+t.row.stock.id,id:"yes2"+t.row.stock.id,value:"Y"},domProps:{checked:t._q(t.isHybridizationNecessary,"Y")},on:{change:function(e){t.isHybridizationNecessary="Y"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"yes2"+t.row.stock.id}},[t._v(t._s(t.$t("yes")))])]),s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.isHybridizationNecessary,expression:"isHybridizationNecessary"}],staticClass:"form-check-input",attrs:{type:"radio",name:"isHybridizationNecessary"+t.row.stock.id,id:"no2"+t.row.stock.id,checked:"",value:"N"},domProps:{checked:t._q(t.isHybridizationNecessary,"N")},on:{change:function(e){t.isHybridizationNecessary="N"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"no2"+t.row.stock.id}},[t._v(t._s(t.$t("no")))])])])]),s("div",{staticClass:"form-group-sm col-md-3",class:"Y"==t.isHybridizationNecessary?"was-validated":""},[s("label",{attrs:{for:"hybridStrain"}},[t._v(t._s(t.$t("hybridStrain")))]),s("multiselect",{attrs:{id:"hybridStrain",options:t.allDrosophila,searchable:!0,"close-on-select":!0,"allow-empty":"N"==t.isHybridizationNecessary,disabled:"N"==t.isHybridizationNecessary,"show-labels":!1,"track-by":"selfindex","custom-label":t.selfindexWithGene},model:{value:t.hybridStrain,callback:function(e){t.hybridStrain=e},expression:"hybridStrain"}},[s("span",{attrs:{slot:"noResult"},slot:"noResult"})])],1),s("div",{staticClass:"form-group-sm col-md-3"},[s("label",{attrs:{for:"specialFeeding"}},[t._v(t._s(t.$t("specialFeeding")))]),s("div",{attrs:{id:"specialFeeding"}},[s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.specialFeeding,expression:"specialFeeding"}],staticClass:"form-check-input",attrs:{type:"radio",name:"specialFeeding"+t.row.stock.id,id:"yes3"+t.row.stock.id,value:"N"},domProps:{checked:t._q(t.specialFeeding,"N")},on:{change:function(e){t.specialFeeding="N"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"yes3"+t.row.stock.id}},[t._v(t._s(t.$t("normal")))])]),s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.specialFeeding,expression:"specialFeeding"}],staticClass:"form-check-input",attrs:{type:"radio",name:"specialFeeding"+t.row.stock.id,id:"no3"+t.row.stock.id,checked:"",value:"Y"},domProps:{checked:t._q(t.specialFeeding,"Y")},on:{change:function(e){t.specialFeeding="Y"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"no3"+t.row.stock.id}},[t._v(t._s(t.$t("special")))])])])]),s("div",{staticClass:"form-group-sm col-md-3",class:"Y"==t.specialFeeding?"was-validated":""},[s("label",{attrs:{for:"specificFeeding"}},[t._v(t._s(t.$t("specificFeeding")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.specificFeeding,expression:"specificFeeding"}],staticClass:"form-control",attrs:{type:"text",id:"specificFeeding",disabled:"N"==t.specialFeeding,required:"Y"==t.specialFeeding,placeholder:"例：无"},domProps:{value:t.specificFeeding},on:{input:function(e){e.target.composing||(t.specificFeeding=e.target.value)}}})]),s("div",{staticClass:"form-group-sm col-md-3"},[s("label",{attrs:{for:"age"}},[t._v(t._s(t.$t("age")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.age,expression:"age"}],staticClass:"form-control",class:t.age>=0?"is-valid":"is-invalid",attrs:{type:"number",id:"age",placeholder:"例：2"},domProps:{value:t.age},on:{input:function(e){e.target.composing||(t.age=e.target.value)}}})]),s("div",{staticClass:"form-group-sm col-md-3"},[s("label",{attrs:{for:"orderNumber"}},[t._v(t._s(t.$t("orderNumber")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.orderNumber,expression:"orderNumber"}],staticClass:"form-control",class:t.orderNumber>0?"is-valid":"is-invalid",attrs:{type:"number",id:"orderNumber",placeholder:"例：36"},domProps:{value:t.orderNumber},on:{input:function(e){e.target.composing||(t.orderNumber=e.target.value)}}})]),s("div",{staticClass:"form-group-sm col-md-12"},[s("label",{attrs:{for:"operationProcess"}},[t._v(t._s(t.$t("operationProcess")))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.operationProcess,expression:"operationProcess"}],staticClass:"form-control",attrs:{id:"operationProcess",placeholder:"例：转管，喂食：先CO2麻醉，转移到新的管子，喂食含有染料的蔗糖水",rows:"2"},domProps:{value:t.operationProcess},on:{input:function(e){e.target.composing||(t.operationProcess=e.target.value)}}})])])])])])},Nt=[],Pt=(s("99af"),s("c1df")),Rt=s.n(Pt),Tt={name:"OrderItemDetail",props:{row:Object,allDrosophila:Array,allMerial:Array},data:function(){return{value2:[],showTimeRangePanel:!1,purpose:"",operationProcess:"",expectedTime:"",virginFly:"Y",gender:"male",isHybridizationNecessary:"N",hybridStrain:"",specialFeeding:"N",specificFeeding:"",age:0,orderNumber:0,singleSource:[],allReady:!1,meterial:[],needWy:"N",wyTime:[],needPhoto:"N",photoTime:[]}},methods:{moment:Rt.a,selfindexWithGene:function(t){var e=t.selfindex,s=t.genotype;return"".concat(e," -【").concat(s,"】")},range:function(t,e){for(var s=[],a=t;a<e;a++)s.push(a);return s},disableHour:function(t){console.log(t);var e=[];for(var s in this.allMerial)this.allMerial[s].id==t&&(e=this.allMerial[s].records);console.log(e);var a=this;return function(t,s){return console.log(t,s),void 0==t||0==t.length||2==t.length||1==t.length||("start"===s||"end"===s?{disabledHours:function(){var s=a.range(0,24),i=new Date,r=new Date(i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate());for(var o in e){var n=new Date(e[o].starttime),l=new Date(e[o].endtime);if(ht(t.toDate(),"yyyy-MM-dd")==ht(n,"yyyy-MM-dd")&&ht(t.toDate(),"yyyy-MM-dd")==ht(l,"yyyy-MM-dd"))for(var c=n.getHours();c<l.getHours();c++)for(var d=s.length-1;d>-1;d--)s[d]==c&&s.splice(d,1)}if(ht(t.toDate(),"yyyy-MM-dd")==ht(r,"yyyy-MM-dd"))for(var u=0;u<i.getHours();u++)for(var m=s.length-1;m>-1;m--)s[m]==u&&s.splice(m,1);return console.log(s),a.range(0,24).splice(4,20)}}:void 0)}},disabledMeterDate:function(t){var e=[];for(var s in this.allMerial)this.allMerial[s].id==t&&(e=this.allMerial[s].records);return function(t){var s=new Date,a=new Date(s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate());if(t<a)return!0;for(var i in e)if(t>new Date(e[i].starttime)&&t<new Date(e[i].endtime))return!0}},onChange:function(t,e){console.log("From: ",t[0],", to: ",t[1]),console.log("From: ",e[0],", to: ",e[1])},toggleTimeRangePanel:function(){this.showTimeRangePanel=!this.showTimeRangePanel},handleRangeClose:function(){this.showTimeRangePanel=!1},disableSelct:function(t){return t<new Date},handleData:function(){this.allReady=this.checkData();var t="";"Y"==this.isHybridizationNecessary&&(t=this.hybridStrain.id);var e={purpose:this.purpose,expectedTime:this.expectedTime,virginFly:this.virginFly,gender:this.gender,isHybridizationNecessary:this.isHybridizationNecessary,hybridStrainId:t,specialFeeding:this.specialFeeding,specificFeeding:this.specificFeeding,age:this.age,operationProcess:this.operationProcess,orderNumber:this.orderNumber,allReady:this.allReady};this.$emit("updateData",{pkid:this.row.stock.id,data:e})},checkData:function(){return("Y"!=this.isHybridizationNecessary||""!=this.hybridStrain)&&(("Y"!=this.specialFeeding||""!=this.specificFeeding)&&(""!=this.purpose&&(""!=this.expectedTime&&(!(this.age<0)&&!(this.orderNumber<=0)))))},disabledDate:function(t){console.log(t);var e=14;return"stock"==t&&(e=0),function(t){var s=Date.now(),a=s+864e5*e;return t.getTime()<new Date(a)}}},watch:{purpose:function(){this.handleData()},expectedTime:function(){this.handleData()},species:function(){this.handleData()},strain:function(){this.handleData()},virginFly:function(){this.handleData()},gender:function(){this.handleData()},isHybridizationNecessary:function(t){"N"==t&&(this.hybridStrain=""),this.handleData()},hybridStrain:function(t){console.log(t),this.handleData()},specialFeeding:function(t){"N"==t&&(this.specificFeeding=""),this.handleData()},specificFeeding:function(){this.handleData()},age:function(){this.handleData()},orderNumber:function(){this.handleData()},needWy:function(t){"N"==t&&(this.wyTime=""),this.handleData()},needPhoto:function(t){"N"==t&&(this.photoTime=""),this.handleData()},photoTime:function(t){console.log(t),this.handleData()},wyTime:function(){this.handleData()}},computed:{btnText:function(){var t=this.row.animal.genotype;return this.allReady?t+="("+this.$t("completeInformation")+")":t+="("+this.$t("incompleteInformation")+")",t}}},jt=Tt,Et=Object(l["a"])(jt,Dt,Nt,!1,null,"707d5d30",null),Mt=Et.exports,At=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"RadioStyle"},[s("div",{staticClass:"switch-all Block PaddingL"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],attrs:{type:"checkbox",id:"love1"},domProps:{checked:Array.isArray(t.value)?t._i(t.value,null)>-1:t.value},on:{change:[function(e){var s=t.value,a=e.target,i=!!a.checked;if(Array.isArray(s)){var r=null,o=t._i(s,r);a.checked?o<0&&(t.value=s.concat([r])):o>-1&&(t.value=s.slice(0,o).concat(s.slice(o+1)))}else t.value=i},t.returnValue]}}),s("label",{attrs:{for:"love1"}},[t._v(t._s(t.text))])])])},Lt=[],Ot={name:"SwitchboxCont",props:{text:String},data:function(){return{value:!1}},methods:{returnValue:function(){this.$emit("getValue",this.value)}}},Ft=Ot,Ut=(s("f92c"),Object(l["a"])(Ft,At,Lt,!1,null,"395ba402",null)),zt=Ut.exports,Kt={name:"AppointmentDialog",components:{SwitchboxCont:zt,OrderItemDetail:Mt},props:{stockIds:Array},data:function(){return{rows:[],orderList:{},selectedStudyDirector:[],supporter:{},remarks:"",supporters:[],studyDirectors:[],allDrosophila:[],detailData:{},urgent:"",allMerial:[]}},methods:{updateDetailData:function(t){this.$set(this.detailData,t.pkid,t.data)},submitTask:function(){for(var t=new Array,e=0;e<this.selectedStudyDirector.length;e++)t.push(this.selectedStudyDirector[e].id);var s={selectedStudyId:t,remarks:this.remarks,urgent:this.urgent,supporter:this.supporter.id,detailData:this.detailData};this.$emit("submitData",{postData:s}),this.$("#exampleModal").modal("hide")},getValue:function(t){this.urgent=t?"1":"0"}},watch:{stockIds:{handler:function(t,e){var s=!0;if(t.length==e.length)for(var a=0;a<t.length;a++)for(var i=0;i<e.length;i++)t[a]!=e[i]&&(s=!1);else s=!1;if(!s){var r={stockIds:t},o=this;this.$axios.post("/orderTask/init",r).then((function(t){if("200"!=t.data.code)o.$message.error(o.$t(t.data.code));else for(var e in console.log(t),o.rows=t.data.retMap.stockTable,o.studyDirectors=t.data.retMap.researchers,o.allDrosophila=t.data.retMap.allDrosophila,o.supporters=t.data.retMap.supporters,o.allMerial=t.data.retMap.allMerial,o.detailData)o.$delete(o.detailData,e)})).catch((function(t){console.log(t),o.$message.error(o.$t("systemErr"))}))}},deep:!0}},computed:{canSubmit:function(){var t=0;for(var e in this.detailData){if(!this.detailData[e].allReady)return!1;t+=1}return t==this.rows.length&&(0!=this.selectedStudyDirector.length&&(""!=this.purpose&&(""!=this.expectedTime&&!B.isNull(this.supporter.id))))}}},qt=Kt,Vt=(s("f669"),Object(l["a"])(qt,St,It,!1,null,"45f41b9c",null)),Yt=Vt.exports,Ht={name:"AnimalStock",components:{Submitting:j,AppointmentDialog:Yt,TopNav:ut},data:function(){return{orderIds:[],selectedList:[],titles:[],rows:[],selectedLine:[],currentPage:0,pageSize:10,total:0}},beforeMount:function(){this.initStockTable()},methods:{handleChange:function(t){console.log(t),"uploading"==t.file.status?this.$("#submitting").modal("show"):(this.$("#submitting").modal("hide"),"error"==t.file.status?this.$message.error(this.$t("systemErr")):"done"==t.file.status&&this.$message.success(this.$t("commitSucc")))},initStockTable:function(){var t=this,e={currentPage:this.currentPage,pageSize:this.pageSize};this.$axios.post("/stock/getAll",e).then((function(e){if(console.log(e),"200"!=e.data.code)t.$message.error(t.$t(e.data.code));else{var s=e.data.retMap.stockTable;if(t.total=e.data.retMap.totalnumber,t.titles=new Array,t.titles.push("#"),t.titles.push("编号"),t.titles.push("stock ID"),t.titles.push("genotype"),t.titles.push("resource"),t.titles.push("容器类型"),t.titles.push("数量"),t.titles.push("用途"),t.titles.push("保存环境"),t.titles.push("操作"),t.rows=new Array,null!=s&&s.length>0)for(var a=0;a<s.length;a++){var i=s[a],r={id:i.stock.id,index:a+t.currentPage*t.pageSize+1,selfIndex:i.animal.selfindex,stockID:i.animal.stockId,genotype:i.animal.genotype,resource:i.animal.resource,container:i.stock.contanertype,number:i.stock.contanernmuber,usagetype:i.stock.usagetype,environment:i.env.displayname?i.env.displayname:""};t.rows.push(r)}}})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},editStock:function(t){this.$router.push({name:"stockEdit",query:{stockId:t}})},selectAll:function(t,e){if(event.stopPropagation(),"selectAll"==t)e.currentTarget.checked?this.$(".stock-line-select:not(:checked)").click():this.$(".stock-line-select:checked").click();else if(e.currentTarget.checked)this.selectedList.push(e.currentTarget.value);else if(null!=this.selectedList&&this.selectedList.length>0){for(var s=-1,a=0;a<this.selectedList.length;a++)if(this.selectedList[a]==e.currentTarget.value){s=a;break}-1!=s&&this.selectedList.splice(s,1)}},selectRow:function(t){event.stopPropagation(),this.$(t.currentTarget).find(".stock-line-select").click()},updateTable:function(t){t<0||t>=Math.ceil(this.total/this.pageSize)||(this.selectedList=new Array,this.currentPage=t,this.initStockTable())},makeAppointment:function(t){event.stopPropagation(),this.orderIds=new Array,this.orderIds.push(t),this.$("#exampleModal").modal("show")},batchOrder:function(){this.orderIds=new Array;for(var t=0;t<this.selectedList.length;t++)this.orderIds.push(this.selectedList[t]);this.$("#exampleModal").modal()},submitAllData:function(t){this.$("#submitting").modal("show");var e=this;console.log(t),this.$axios.post("/task/askTask",t).then((function(t){console.log(t),e.$("#submitting").modal("hide"),200!=t.data.code?e.$message.error(e.$t(t.data.code)):(e.$message.success(e.$t("commitSucc")),window.location.reload())})).catch((function(t){console.log(t),e.$("#submitting").modal("hide"),e.$message.error(e.$t("systemErr"))}))},usageType:function(t){return"keep"==t?this.$t("keep"):"stock"==t?this.$t("personnal_btn_stock"):t}},computed:{pageTotal:function(){for(var t=Math.ceil(this.total/this.pageSize),e=new Array,s=0;s<t;s++)e.push(s+1);return e},selectallDisable:function(){return 0==this.selectedList.length},canEdit:function(){for(var t=0;t<this.$store.getters.getUser.roles.length;t++){var e=this.$store.getters.getUser.roles[t];if("999999"==e.roletype||"02"==e.roletype)return!0}return!1},canOrder:function(){for(var t=0;t<this.$store.getters.getUser.roles.length;t++){var e=this.$store.getters.getUser.roles[t];if("999999"==e.roletype||"01"==e.roletype)return!0}return!1},importOrderUrl:function(){return this.$axios.defaults.baseURL+"task/import/orderTask"}}},Bt=Ht,Jt=(s("5332"),Object(l["a"])(Bt,xt,Ct,!1,null,"82cd4a48",null)),Gt=Jt.exports,Wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("top-nav"),s("div",{staticClass:"task-main"},[s("task-table-new",{attrs:{"page-location":"mytask"}})],1)],1)},Zt=[],Xt={name:"TaskMain",components:{TaskTableNew:$t,TopNav:ut}},Qt=Xt,te=(s("2659"),Object(l["a"])(Qt,Wt,Zt,!1,null,"dcb6167a",null)),ee=te.exports,se=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("top-nav"),s("div",{staticClass:"detail-all"},[s("a-steps",{style:t.stepStyle,attrs:{type:"navigation",size:"small"},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}},[s("a-step",{attrs:{title:t.$t("orderDetail")+t.$t("confirm"),status:t.setpStatu(0),disabled:t.isDisabled(0)}},["01"==t.ask.currentstatu||"00"==t.ask.currentstatu?s("a-icon",{attrs:{slot:"icon",type:"loading"},slot:"icon"}):t._e()],1),s("a-step",{attrs:{title:t.$t("expectionObject")+t.$t("prepare"),status:t.setpStatu(1),disabled:t.isDisabled(1)}},["02"==t.ask.currentstatu||"03"==t.ask.currentstatu?s("a-icon",{attrs:{slot:"icon",type:"loading"},slot:"icon"}):t._e()],1),s("a-step",{attrs:{title:"实验员确认",status:t.setpStatu(2),disabled:t.isDisabled(2)}},["04"==t.ask.currentstatu?s("a-icon",{attrs:{slot:"icon",type:"loading"},slot:"icon"}):t._e()],1)],1),s("div",{staticClass:"steps-content"},[0==t.current?s("ask-detail-setp1",{attrs:{ask:t.ask,rows:t.rows,task:t.task,"task-id":t.taskId},on:{initAskDetail:this.init}}):t._e(),1==t.current?s("ask-detail-step2",{attrs:{"task-id":t.taskId,task:t.task,ask:t.ask},on:{initAskDetail:this.init}}):t._e(),2==t.current?s("ask-detail-step3",{attrs:{"task-id":t.taskId,task:t.task,ask:t.ask}}):t._e()],1)],1)],1)},ae=[],ie=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"form-row",staticStyle:{"text-align":"left"}}),s("div",{staticStyle:{"text-align":"left"}},[t._v(" "+t._s(t.$t("expectionObject"))+"： ")]),t._l(t.rows,(function(e){return s("ask-task-detail-item",{key:e.id,attrs:{task:t.task,row:e},on:{handler:t.handlerStat}})})),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group-sm col-md-12"},[s("label",{attrs:{for:"remarks"}},[t._v(t._s(t.$t("remarks")))]),s("textarea",{staticClass:"form-control",attrs:{id:"remarks",rows:"2",disabled:"disabled"},domProps:{value:t.ask.remarks}})])]),s("refuse-alert",{attrs:{"detail-id":t.detailId,"modal-title":t.$t("refuseTask")},on:{confirmFun:t.refuseTask}}),s("confirm-ask-task",{attrs:{"detail-id":t.detailId},on:{confirmData:t.confrimAskData}}),s("submitting",{attrs:{title:t.$t("submitting")}})],2)},re=[],oe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ask-item"},[s("p",[s("button",{staticClass:"btn btn-sm btn-block",class:t.detailStatClass,attrs:{type:"button","data-toggle":"collapse","data-target":"#aa"+t.row.detail.id,"aria-expanded":"false","aria-controls":"aa"+t.row.detail.id}},[t._v(" "+t._s(t.row.animal.genotype+t.detailStatText)+" ")])]),s("div",{staticClass:"collapse",attrs:{id:"aa"+t.row.detail.id}},[s("div",{staticClass:"card card-body",staticStyle:{"text-align":"left"}},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"expectedTime"+t.row.detail.id}},[t._v(t._s(t.$t("expectedTime")))]),s("input",{staticClass:"form-control",attrs:{type:"text",disabled:"disabled",id:"expectedTime"+t.row.detail.id},domProps:{value:t.longToStr(t.row.detail.expectedtime)}})]),s("div",{staticClass:"form-group-sm col-md-3 was-validated"},[s("label",{attrs:{for:"Purpose"+t.row.detail.id}},[t._v(t._s(t.$t("purpose")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"Purpose"+t.row.detail.id,disabled:""},domProps:{value:t.row.detail.purpose}})]),s("div",{staticClass:"form-group-sm col-md-3"},[s("label",{attrs:{for:"species"+t.row.detail.id}},[t._v(t._s(t.$t("species")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"species"+t.row.detail.id,disabled:""},domProps:{value:t.row.animal.name}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"strain"+t.row.detail.id}},[t._v(t._s(t.$t("strain")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"strain"+t.row.detail.id,disabled:""},domProps:{value:t.row.animal.stockId}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"virginFly"+t.row.detail.id}},[t._v(t._s(t.$t("virginFly")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"virginFly"+t.row.detail.id,disabled:""},domProps:{value:t.yesOrNo(t.row.detail.virginfly)}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"gender"+t.row.detail.id}},[t._v(t._s(t.$t("gender")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"gender"+t.row.detail.id,disabled:""},domProps:{value:t.gender(t.row.detail.gender)}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"isHybridizationNecessary"+t.row.detail.id}},[t._v(t._s(t.$t("isHybridizationNecessary")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"isHybridizationNecessary"+t.row.detail.id,disabled:""},domProps:{value:t.yesOrNo(t.row.detail.ishybridizationnecessary)}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"hybridStrain"+t.row.detail.id}},[t._v(t._s(t.$t("hybridStrain")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"hybridStrain"+t.row.detail.id,disabled:""},domProps:{value:t.row.detail.hybridstrain}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"specialFeeding"+t.row.detail.id}},[t._v(t._s(t.$t("specialFeeding")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"specialFeeding"+t.row.detail.id,disabled:""},domProps:{value:t.specialFeeding(t.row.detail.specialfeeding)}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"specificFeeding"+t.row.detail.id}},[t._v(t._s(t.$t("specificFeeding")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"specificFeeding"+t.row.detail.id,disabled:""},domProps:{value:t.row.detail.specificfeeding}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"age"+t.row.detail.id}},[t._v(t._s(t.$t("age")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"age"+t.row.detail.id,disabled:""},domProps:{value:t.row.detail.age}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"orderNumber"+t.row.detail.id}},[t._v(t._s(t.$t("orderNumber")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"orderNumber"+t.row.detail.id,disabled:""},domProps:{value:t.row.detail.ordernumber}})]),s("div",{staticClass:"form-group-sm col-md-12"},[s("label",{attrs:{for:"operationProcess"+t.row.detail.id}},[t._v(t._s(t.$t("operationProcess")))]),s("textarea",{staticClass:"form-control",attrs:{id:"operationProcess"+t.row.detail.id,rows:"1",disabled:"disabled"},domProps:{value:t.row.detail.operationprocess}})]),null!=t.hasReason?s("div",{staticClass:"form-group-sm col-md-12"},[s("label",{attrs:{for:"refuseReason"+t.row.detail.id}},[t._v(t._s(t.$t("refuse")+t.$t("reason")))]),s("textarea",{staticClass:"form-control",attrs:{id:"refuseReason"+t.row.detail.id,rows:"1",disabled:"disabled"},domProps:{value:t.row.fail.reason}})]):t._e()]),"00"==t.row.detail.confirmstatu&&this.$store.getters.isCurrentUser(t.task.currentuser)?s("div",{staticClass:"modal-footer",staticStyle:{"margin-top":"10px"}},[s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.handleState("refuse")}}},[t._v(t._s(t.$t("refuse")))]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.handleState("confirm")}}},[t._v(t._s(t.$t("confirm")))])]):t._e()])])])},ne=[],le={name:"AskTaskDetailItem",props:{row:Object,task:Object},methods:{handleState:function(t){this.$emit("handler",t,this.row.detail.id)},longToStr:function(t){var e=new Date(t);return ht(e,"yyyy-MM-dd")},yesOrNo:function(t){return"Y"==t?this.$t("yes"):this.$t("no")},gender:function(t){return"male"==t?this.$t("male"):"female"==t?this.$t("female"):this.$t("empty")},specialFeeding:function(t){return"N"==t?this.$t("normal"):this.$t("special")}},watch:{row:{handler:function(t){console.log(t)},deep:!0}},computed:{detailStatClass:function(){return"00"==this.row.detail.confirmstatu?"btn-outline-danger":"01"==this.row.detail.confirmstatu?"btn-success":"02"==this.row.detail.confirmstatu?"btn-danger":""},detailStatText:function(){return"00"==this.row.detail.confirmstatu?"(未确认)":"01"==this.row.detail.confirmstatu?"(已确认)":"02"==this.row.detail.confirmstatu?"(已拒绝)":""},hasReason:function(){return"02"==this.row.detail.confirmstatu?this.row.fail.reason:null}}},ce=le,de=(s("552e"),Object(l["a"])(ce,oe,ne,!1,null,"e780a4ee",null)),ue=de.exports,me=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog",id:"refuseAlert"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v(t._s(t.modalTitle))]),t._m(0)]),s("div",{staticClass:"modal-body",staticStyle:{"text-align":"left"}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"reason"}},[t._v(t._s(t.$t("reason")))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reason,expression:"reason"}],staticClass:"form-control",attrs:{id:"reason",rows:"3",maxlength:"90",placeholder:"90字以内"},domProps:{value:t.reason},on:{input:function(e){e.target.composing||(t.reason=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"reason"}},[t._v(t._s(t.$t("remarks")))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"form-control",attrs:{id:"remarks",rows:"3"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("cancel")))]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.isCanConfirm},on:{click:t.commitReason}},[t._v(t._s(t.$t("confirm")))])])])])])},pe=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],he={name:"refuseAlert",props:{modalTitle:String},data:function(){return{reason:"",remarks:""}},methods:{commitReason:function(){this.$emit("confirmFun",this.reason,this.remarks)}},computed:{isCanConfirm:function(){return""==this.reason}}},fe=he,be=Object(l["a"])(fe,me,pe,!1,null,"98f85eb0",null),ge=be.exports,ve=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{id:"confirmAskTask",tabindex:"-1",role:"dialog","aria-labelledby":"confirmAskTaskLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"confirmAskTaskLabel"}},[t._v(t._s(t.$t("confirm")))]),t._m(0)]),s("div",{staticClass:"modal-body",staticStyle:{"text-align":"left"}},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.isNeedMore,expression:"isNeedMore"}],staticClass:"form-check-input",attrs:{type:"radio",name:"needmore",id:"exampleRadios1",value:"Y"},domProps:{checked:t._q(t.isNeedMore,"Y")},on:{change:function(e){t.isNeedMore="Y"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"exampleRadios1"}},[t._v(" "+t._s(t.$t("needmore"))+" ")])]),s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.isNeedMore,expression:"isNeedMore"}],staticClass:"form-check-input",attrs:{type:"radio",name:"needmore",id:"exampleRadios2",value:"N"},domProps:{checked:t._q(t.isNeedMore,"N")},on:{change:function(e){t.isNeedMore="N"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"exampleRadios2"}},[t._v(" "+t._s(t.$t("noneedmore"))+" ")])]),s("div",{staticClass:"form-group-sm col-md-12",staticStyle:{"margin-top":"10px"}},[s("label",{attrs:{for:"expectedTime"}},[t._v(t._s(t.$t("startmore")))]),s("div",{attrs:{id:"expectedTime"}},[s("date-picker",{attrs:{"value-type":"format",format:"YYYY-MM-DD",disabled:t.timeCanNull,"disabled-date":t.disabledBeforeToday},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)]),s("div",{staticClass:"form-group-sm col-md-12",staticStyle:{"margin-top":"10px"}},[s("label",{attrs:{for:"endmore"}},[t._v(t._s(t.$t("endmore")))]),s("div",{attrs:{id:"endmore"}},[s("date-picker",{attrs:{"value-type":"format",format:"YYYY-MM-DD",disabled:t.timeCanNull,"disabled-date":t.disabledBeforeToday},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)]),s("div",{staticClass:"form-group",staticStyle:{"margin-top":"20px"}},[s("label",{attrs:{for:"remarks"}},[t._v(t._s(t.$t("remarks")))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"form-control",attrs:{id:"remarks",rows:"3"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("cancel")))]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.canConfirm},on:{click:t.confirmReadyData}},[t._v(t._s(t.$t("confirm")))])])])])])},$e=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],ye={name:"confirmAskTask",props:{detailId:String},data:function(){return{isNeedMore:"Y",startDate:"",endDate:"",remarks:""}},methods:{disabledBeforeToday:function(t){return t.getTime()<Date.now()-864e5},confirmReadyData:function(){var t={isNeedMore:this.isNeedMore,startDate:this.startDate,endDate:this.endDate,remarks:this.remarks};this.$emit("confirmData",t)}},computed:{canConfirm:function(){return"Y"==this.isNeedMore&&""==this.startDate},timeCanNull:function(){return"Y"!=this.isNeedMore}},watch:{isNeedMore:function(t){"N"==t&&(this.startDate="",this.endDate="")}}},ke=ye,we=Object(l["a"])(ke,ve,$e,!1,null,"b42dae4c",null),_e=we.exports,xe={name:"askDetailSetp1",components:{AskTaskDetailItem:ue,RefuseAlert:ge,Submitting:j,ConfirmAskTask:_e},props:{taskId:String,rows:Array,ask:Object,task:Object},data:function(){return{detailId:""}},beforeMount:function(){},methods:{longToStr:function(t){var e=new Date(t);return ht(e,"yyyy-MM-dd")},handlerStat:function(t,e){console.log(t,e),this.detailId=e,"refuse"==t?this.$("#refuseAlert").modal("show"):this.$("#confirmAskTask").modal("show")},refuseTask:function(t,e){console.log(t,e),this.$("#refuseAlert").modal("hide"),this.$("#submitting").modal("show");var s=this,a={taskId:this.taskId,detailId:this.detailId,remarks:e,reason:t};this.$axios.post("/task/ask/refuse",a).then((function(t){console.log(t),s.$("#submitting").modal("hide"),"200"!=t.data.code?s.$message.error(s.$t(t.data.code)):s.$emit("initAskDetail")})).catch((function(t){s.$("#submitting").modal("hide"),console.log(t),s.$message.error(s.$t("systemErr"))}))},confrimAskData:function(t){console.log(t),this.$("#confirmAskTask").modal("hide"),this.$("#submitting").modal("show");var e=this;t.taskid=this.taskId,t.detailId=this.detailId,this.$axios.post("/task/ask/confirm",t).then((function(t){e.$("#submitting").modal("hide"),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):e.$emit("initAskDetail")})).catch((function(t){e.$("#submitting").modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))}},watch:{}},Ce=xe,Se=Object(l["a"])(Ce,ie,re,!1,null,"0931df75",null),Ie=Se.exports,De=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[t._v(t._s(t.$t("expectionPrep")))]),t._l(t.rows,(function(e){return s("prepare-detail",{key:e.prepare.id,attrs:{task:t.task,row:e},on:{refresh:t.init,confirm:t.handleConfirm}})})),s("comfirm-prepare",{attrs:{preid:t.prepareId},on:{comfirmPrep:t.confirmPrep}}),s("refuse-alert",{attrs:{modalTitle:t.$t("refuse")}}),s("submitting",{attrs:{title:t.$t("submitting")}})],2)},Ne=[],Pe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("p",[s("button",{staticClass:"btn btn-sm btn-block",class:t.isCompelet,attrs:{type:"button","data-toggle":"collapse","data-target":"#aa"+t.row.prepare.id,"aria-expanded":"false","aria-controls":"aa"+t.row.prepare.id}},[t._v(" "+t._s(t.row.animal.genotype+t.btnText)+" ")])]),s("div",{staticClass:"collapse",attrs:{id:"aa"+t.row.prepare.id}},[s("div",{staticClass:"card card-body"},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"needmore"}},[t._v(t._s(t.$t("needmore")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"needmore",disabled:""},domProps:{value:t.needMore}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"startmore"}},[t._v(t._s(t.$t("startmore")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"startmore",disabled:""},domProps:{value:t.longToStr(t.row.prepare.starttime)}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"endmore"}},[t._v(t._s(t.$t("endmore")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"endmore",disabled:""},domProps:{value:t.longToStr(t.row.prepare.endtime)}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"confirmTime"}},[t._v(t._s(t.$t("confirmTime")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"confirmTime",disabled:""},domProps:{value:t.longToStrHMS(t.row.prepare.createtime)}})]),s("div",{staticClass:"form-group col-md-12"},[s("label",{attrs:{for:"remarks"}},[t._v(t._s(t.$t("remarks")))]),s("textarea",{staticClass:"form-control",attrs:{id:"remarks",rows:"2",disabled:""},domProps:{value:t.row.prepare.remarks1}})])]),"02"==t.row.prepare.prestatu?s("hr",{staticClass:"my-4"}):t._e(),"02"==t.row.prepare.prestatu?s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"readyTime"}},[t._v(t._s(t.$t("readyTime")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"readyTime",disabled:""},domProps:{value:t.longToStr(t.row.prepare.completetime)}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"allowTime"}},[t._v(t._s(t.$t("allowTime")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"allowTime",disabled:""},domProps:{value:t.longToStr(t.row.prepare.realexptime)}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"realAge"}},[t._v(t._s(t.$t("realAge")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"realAge",disabled:""},domProps:{value:t.row.prepare.realage}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"realNumber"}},[t._v(t._s(t.$t("realNumber")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"realNumber",disabled:""},domProps:{value:t.row.prepare.realnumber}})]),s("div",{staticClass:"form-group col-md-12"},[s("label",{attrs:{for:"remarks2"}},[t._v(t._s(t.$t("remarks")))]),s("textarea",{staticClass:"form-control",attrs:{id:"remarks2",rows:"2",disabled:""},domProps:{value:t.row.prepare.reamrks2}})])]):t._e(),s("div",{staticClass:"modal-footer"},["01"==t.row.prepare.prestatu&&this.$store.getters.isCurrentUser(t.task.currentuser)?s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.handleState("confirm")}}},[t._v(t._s(t.$t("confirm")))]):t._e()])])])])},Re=[],Te={name:"PrepareDetail",props:{row:Object,task:Object},data:function(){return{}},watch:{},methods:{longToStr:function(t){if(B.isNull(t))return"";var e=new Date(t);return ht(e,"yyyy-MM-dd")},longToStrHMS:function(t){var e=new Date(t);return ht(e,"yyyy-MM-dd hh:mm:ss")},handleState:function(t){"confirm"==t?this.$emit("confirm",this.row.prepare.id):this.$("#refuseAlert").modal("show")}},computed:{needMore:function(){return"Y"==this.row.prepare.needmore?"是":"否"},isCompelet:function(){return"01"==this.row.prepare.prestatu?"btn-outline-danger":"btn-success"},btnText:function(){return"01"==this.row.prepare.prestatu?"(准备中)":"(已完成)"}}},je=Te,Ee=Object(l["a"])(je,Pe,Re,!1,null,"dae04706",null),Me=Ee.exports,Ae=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{id:"confirmPrepare",tabindex:"-1",role:"dialog","aria-labelledby":"confirmPrepareLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"confirmPrepareLabel"}},[t._v(t._s(t.$t("confirm")))]),t._m(0)]),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-12"},[s("label",{attrs:{for:"readyTime"}},[t._v(t._s(t.$t("readyTime")))]),s("div",{attrs:{id:"readyTime"}},[s("date-picker",{attrs:{"value-type":"format",format:"YYYY-MM-DD","disabled-date":t.disabledBeforeToday},model:{value:t.readyTime,callback:function(e){t.readyTime=e},expression:"readyTime"}})],1)]),s("div",{staticClass:"form-group col-md-12"},[s("label",{attrs:{for:"allowTime"}},[t._v(t._s(t.$t("allowTime")))]),s("div",{attrs:{id:"allowTime"}},[s("date-picker",{attrs:{"value-type":"format",format:"YYYY-MM-DD","disabled-date":t.disabledBeforeToday},model:{value:t.allowTime,callback:function(e){t.allowTime=e},expression:"allowTime"}})],1)]),s("div",{staticClass:"form-group col-md-12"},[s("label",{attrs:{for:"realAge"}},[t._v(t._s(t.$t("realAge")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.realAge,expression:"realAge"}],staticClass:"form-control",class:t.ageisValid,attrs:{type:"number",min:"0",id:"realAge"},domProps:{value:t.realAge},on:{input:function(e){e.target.composing||(t.realAge=e.target.value)}}})]),s("div",{staticClass:"form-group col-md-12"},[s("label",{attrs:{for:"realNumber"}},[t._v(t._s(t.$t("realNumber")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.realNumber,expression:"realNumber"}],staticClass:"form-control",class:t.isValid,attrs:{type:"number",min:"0",id:"realNumber"},domProps:{value:t.realNumber},on:{input:function(e){e.target.composing||(t.realNumber=e.target.value)}}})]),s("div",{staticClass:"form-group col-md-12"},[s("label",{attrs:{for:"remarks2"}},[t._v(t._s(t.$t("remarks")))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"form-control",attrs:{id:"remarks2",rows:"2"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("cancel")))]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.canClick},on:{click:t.completePrep}},[t._v(t._s(t.$t("confirm")))])])])])])},Le=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Oe={name:"comfirmPrepare",props:{preid:String},data:function(){return{readyTime:"",allowTime:"",remarks:"",realAge:0,realNumber:1,isValid:"",ageisValid:""}},methods:{disabledBeforeToday:function(t){return t.getTime()<Date.now()-864e5},completePrep:function(){if(!this.checkDate()){var t={id:this.preid,readyTime:this.readyTime,allowTime:this.allowTime,remarks:this.remarks,realAge:this.realAge,realNumber:this.realNumber};this.$emit("comfirmPrep",t)}},checkDate:function(){return""==this.readyTime||(""==this.allowTime||(this.realAge<0||this.realNumber<1))}},watch:{realNumber:function(t){this.checkDate(),this.isValid=t<1?"is-invalid":"is-valid"},realAge:function(t){this.checkDate(),this.ageisValid=t>=0?"is-valid":"is-invalid"},readyTime:function(){this.checkDate()},allowTime:function(){this.checkDate()}},computed:{canClick:function(){return this.checkDate()}}},Fe=Oe,Ue=Object(l["a"])(Fe,Ae,Le,!1,null,"7f2b82c4",null),ze=Ue.exports,Ke={name:"askDetailStep2",components:{Submitting:j,RefuseAlert:ge,ComfirmPrepare:ze,PrepareDetail:Me},props:{taskId:String,ask:Object,task:Object},data:function(){return{rows:[],prepareId:""}},beforeMount:function(){this.init()},methods:{init:function(){var t={askId:this.ask.id},e=this;this.$axios.post("/task/ask/getPrepare",t).then((function(t){"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):e.rows=t.data.retMap.rows})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))},handleConfirm:function(t){this.prepareId=t,this.$("#confirmPrepare").modal("show")},confirmPrep:function(t){this.$("#confirmPrepare").modal("hide"),this.$("#submitting").modal("show");var e=this;console.log(t),this.$axios.post("/task/ask/confirmPrepare",t).then((function(t){e.$("#submitting").modal("hide"),console.log(t),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(console.log(t),e.init(),e.$emit("initAskDetail"))})).catch((function(t){e.$("#submitting").modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))}},computed:{canEdit:function(){return"02"!=this.ask.currentstatu}}},qe=Ke,Ve=Object(l["a"])(qe,De,Ne,!1,null,"d4fc8bc8",null),Ye=Ve.exports,He=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._v(" 已准备完成： "),t._l(t.rows,(function(e){return s("prepared-detail",{key:e.prepare.id,attrs:{task:t.task,row:e},on:{confirmTask:t.confirmTask}})})),s("comfirm-prepared",{attrs:{"prepare-id":t.prepareId},on:{submitData:t.submitData}}),s("submitting",{attrs:{title:t.$t("submitting")}})],2)},Be=[],Je=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("p",[s("button",{staticClass:"btn btn-sm btn-block",class:t.isCompelet,attrs:{type:"button","data-toggle":"collapse","data-target":"#aa"+t.row.prepare.id,"aria-expanded":"false","aria-controls":"aa"+t.row.prepare.id}},[t._v(" "+t._s(t.row.animal.genotype+t.btnText)+" ")])]),s("div",{staticClass:"collapse",attrs:{id:"aa"+t.row.prepare.id}},[s("div",{staticClass:"card card-body"},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"readyTime"}},[t._v(t._s(t.$t("readyTime")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"readyTime",disabled:""},domProps:{value:t.longToStr(t.row.prepare.completetime)}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"allowTime"}},[t._v(t._s(t.$t("allowTime")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"allowTime",disabled:""},domProps:{value:t.longToStr(t.row.prepare.realexptime)}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"realAge"}},[t._v(t._s(t.$t("realAge")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"realAge",disabled:""},domProps:{value:t.row.prepare.realage}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"realNumber"}},[t._v(t._s(t.$t("realNumber")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"realNumber",disabled:""},domProps:{value:t.row.prepare.realnumber}})]),s("div",{staticClass:"form-group col-md-12"},[s("label",{attrs:{for:"remarks2"}},[t._v(t._s(t.$t("remarks")))]),s("textarea",{staticClass:"form-control",attrs:{id:"remarks2",rows:"2",disabled:""},domProps:{value:t.row.prepare.reamrks2}})])]),null!=t.row.confirm?s("hr",{staticClass:"my-4"}):t._e(),null!=t.row.confirm?s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"isComplete"}},[t._v(t._s(t.$t("isComplete")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"isComplete",disabled:""},domProps:{value:t.yesOrNo(t.row.confirm.iscomplete)}})]),s("div",{staticClass:"form-group col-md-12"},[s("label",{attrs:{for:"remarks"}},[t._v(t._s(t.$t("remarks")))]),s("textarea",{staticClass:"form-control",attrs:{id:"remarks",rows:"2",disabled:""},domProps:{value:t.row.confirm.remarks}})])]):t._e(),t.canOperat?s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.handleState("confirm")}}},[t._v(t._s(t.$t("confirm")))])]):t._e()])])])},Ge=[],We={name:"PreparedDetail",props:{row:Object,task:Object},methods:{longToStr:function(t){var e=new Date(t);return ht(e,"yyyy-MM-dd")},handleState:function(t){"confirm"==t?this.$emit("confirmTask",this.row.prepare.id):"refuse"==t&&this.$("#refuseAlert").modal("show")},refuseFun:function(t,e){console.log(t,e)},yesOrNo:function(t){return"Y"==t?this.$t("yes"):this.$t("no")}},computed:{btnText:function(){return"02"==this.row.prepare.prestatu?"(未确认)":"03"==this.row.prepare.prestatu?"(已完成)":"(未完成)"},isCompelet:function(){return"02"==this.row.prepare.prestatu?"btn-outline-danger":"03"==this.row.prepare.prestatu?"btn-success":"btn-danger"},canOperat:function(){return"02"==this.row.prepare.prestatu&&!!this.$store.getters.isCurrentUser(this.task.createuser)}}},Ze=We,Xe=Object(l["a"])(Ze,Je,Ge,!1,null,"2a830978",null),Qe=Xe.exports,ts=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{id:"confirmPrepared",tabindex:"-1",role:"dialog","aria-labelledby":"confirmPreparedLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"confirmPreparedLabel"}},[t._v(t._s(t.$t("confirm")))]),t._m(0)]),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-12"},[s("label",{attrs:{for:"isComplete"}},[t._v(t._s(t.$t("isComplete")))]),s("div",{attrs:{id:"isComplete"}},[s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.isComplete,expression:"isComplete"}],staticClass:"form-check-input",attrs:{type:"radio",name:"isComplete",id:"inlineRadio1",value:"Y"},domProps:{checked:t._q(t.isComplete,"Y")},on:{change:function(e){t.isComplete="Y"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio1"}},[t._v(t._s(t.$t("yes")))])]),s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.isComplete,expression:"isComplete"}],staticClass:"form-check-input",attrs:{type:"radio",name:"isComplete",id:"inlineRadio2",value:"N"},domProps:{checked:t._q(t.isComplete,"N")},on:{change:function(e){t.isComplete="N"}}}),s("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio2"}},[t._v(t._s(t.$t("no")))])])])]),s("div",{staticClass:"form-group col-md-12"},[s("label",{attrs:{for:"remarks"}},[t._v(t._s(t.$t("remarks")))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"form-control",attrs:{id:"remarks",rows:"3"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("cancel")))]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.confirmTask}},[t._v(t._s(t.$t("confirm")))])])])])])},es=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],ss={name:"comfirmPrepared",props:{prepareId:String},data:function(){return{isComplete:"Y",remarks:""}},methods:{confirmTask:function(){var t={id:this.prepareId,isComplete:this.isComplete,remarks:this.remarks};this.$emit("submitData",t)}}},as=ss,is=Object(l["a"])(as,ts,es,!1,null,"747d0fc2",null),rs=is.exports,os={name:"askDetailStep3",components:{Submitting:j,ComfirmPrepared:rs,PreparedDetail:Qe},props:{taskId:String,ask:Object,task:Object},data:function(){return{rows:[],prepareId:""}},beforeMount:function(){this.initPage()},methods:{confirmTask:function(t){this.prepareId=t,this.$("#confirmPrepared").modal("show")},submitData:function(t){this.$("#confirmPrepared").modal("hide"),this.$("#submitting").modal("show");var e=this;this.$axios.post("/task/ask/confirmTask",t).then((function(t){e.$("#submitting").modal("hide"),200!=t.data.code?e.$message.error(e.$t(t.data.code)):window.location.reload()})).catch((function(t){e.$("#submitting").modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))},initPage:function(){var t={askId:this.ask.id},e=this;this.$axios.post("/task/ask/getPrepare",t).then((function(t){e.$("#submitting").modal("hide"),200!=t.data.code?e.$message.error(e.$t(t.data.code)):e.rows=t.data.retMap.rows})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))}},watch:{taskId:function(){this.initPage()}}},ns=os,ls=Object(l["a"])(ns,He,Be,!1,null,"43e7c43f",null),cs=ls.exports,ds={name:"askDetail",components:{AskDetailStep3:cs,AskDetailStep2:Ye,AskDetailSetp1:Ie,TopNav:ut},data:function(){return{current:0,canClick:0,taskId:"",task:{},rows:[],ask:{},stepStyle:{marginBottom:"60px",boxShadow:"0px -1px 0 0 #e8e8e8 inset"}}},mounted:function(){this.taskId=this.$route.query.taskId,this.init()},methods:{init:function(){var t=this;if(console.log(this.taskId),""!=this.taskId&&void 0!=this.taskId&&null!=this.taskId){this.current=0,this.canClick=0;var e={taskId:this.taskId};this.$axios.post("/task/askTaskDetail",e).then((function(e){if("200"!=e.data.code)t.$message.error(t.$t(e.data.code));else{if(null==e.data.retMap||void 0==e.data.retMap)return;console.log(e),t.rows=e.data.retMap.rows,t.ask=e.data.retMap.ask,t.task=e.data.retMap.task,"01"==e.data.retMap.ask.currentstatu||"00"==e.data.retMap.ask.currentstatu||"09"==e.data.retMap.ask.currentstatu?(t.current=0,t.canClick=0):"02"==e.data.retMap.ask.currentstatu||"03"==e.data.retMap.ask.currentstatu?(t.current=1,t.canClick=1):"04"==e.data.retMap.ask.currentstatu?(t.current=2,t.canClick=2):(t.current=2,t.canClick=3)}})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))}},next:function(){this.current++},isDisabled:function(t){return t>this.canClick},setpStatu:function(t){return"09"==this.ask.currentstatu&&t==this.canClick||"08"==this.ask.currentstatu&&2==t?"error":t<this.canClick?"finish":t>this.canClick?"wait":"process"}},watch:{getTaskId:function(t){this.taskId=t,this.init()},current:function(t){console.log(t)}},computed:{getTaskId:function(){return this.$route.query.taskId}}},us=ds,ms=(s("88c6"),Object(l["a"])(us,se,ae,!1,null,"a84a9d62",null)),ps=ms.exports,hs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("top-nav"),s("div",{staticClass:"confirm-container"},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-4"},[s("label",{attrs:{for:"creater"}},[t._v(t._s(t.$t("creater")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"creater",disabled:""},domProps:{value:t.creater.name}})]),s("div",{staticClass:"form-group col-md-4"},[s("label",{attrs:{for:"email"}},[t._v(t._s(t.$t("userEmail")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"email",disabled:""},domProps:{value:t.creater.email}})]),s("div",{staticClass:"form-group col-md-4"},[s("label",{attrs:{for:"submitTime"}},[t._v(t._s(t.$t("submitTime")))]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"submitTime",disabled:""},domProps:{value:t.longToStr(t.creater.createtime)}})])]),"03"==t.task.taskstatu?s("hr",{staticClass:"my-4"}):t._e(),"03"==t.task.taskstatu?s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-12"},[s("label",{attrs:{for:"reason"}},[t._v(t._s(t.$t("reason")))]),s("textarea",{staticClass:"form-control",attrs:{id:"reason",rows:"2",disabled:""},domProps:{value:t.fail.reason}})]),s("div",{staticClass:"form-group col-md-12"},[s("label",{attrs:{for:"reason"}},[t._v(t._s(t.$t("remarks")))]),s("textarea",{staticClass:"form-control",attrs:{id:"remarks",rows:"2",disabled:""},domProps:{value:t.fail.remarks}})])]):t._e(),"01"==t.task.taskstatu?s("div",{staticClass:"modal-footer",staticStyle:{"margin-top":"10px"}},[s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.refuseAllow}},[t._v(t._s(t.$t("refuse")))]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.selectRoles}},[t._v(t._s(t.$t("confirm")))])]):t._e()]),s("refuse-alert",{attrs:{"modal-title":t.$t("refuseTask")},on:{confirmFun:t.refuseTask}}),s("submitting",{attrs:{title:t.$t("submitting")}}),s("confirm-allow",{attrs:{roles:t.roles},on:{confrimRoles:t.confrimRoles}})],1)},fs=[],bs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{id:"confirmAllow",tabindex:"-1",role:"dialog","aria-labelledby":"confirmAllowLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"confirmAllowLabel"}},[t._v(t._s(t.$t("confirm")))]),t._m(0)]),s("div",{staticClass:"modal-body",staticStyle:{"text-align":"left"}},[s("div",{staticClass:"form-group col-md-12"},[s("label",{attrs:{for:"selectRoles"}},[t._v(t._s(t.$t("selectRoles")))]),s("div",{attrs:{id:"selectRoles"}},[s("multiselect",{attrs:{options:t.roles,searchable:!0,"close-on-select":!0,"allow-empty":!1,"show-labels":!1,"track-by":"rolename",label:"rolename",required:"",multiple:!0,taggable:!0,placeholder:t.$t("selectRoles")},model:{value:t.selectRoles,callback:function(e){t.selectRoles=e},expression:"selectRoles"}})],1)])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("cancel")))]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.canConfirm},on:{click:t.confirmSel}},[t._v(t._s(t.$t("confirm")))])])])])])},gs=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],vs={name:"confirmAllow",props:{roles:Array},data:function(){return{selectRoles:[]}},methods:{confirmSel:function(){for(var t=new Array,e=0;e<this.selectRoles.length;e++)t.push(this.selectRoles[e].id);this.$emit("confrimRoles",t)}},computed:{canConfirm:function(){return 0==this.selectRoles.length}}},$s=vs,ys=Object(l["a"])($s,bs,gs,!1,null,"467aeda2",null),ks=ys.exports,ws={name:"userallow",components:{ConfirmAllow:ks,Submitting:j,RefuseAlert:ge,TopNav:ut},data:function(){return{taskId:"",task:{},creater:{},roles:[],fail:{}}},mounted:function(){this.taskId=this.$route.query.taskId,this.initPage()},methods:{initPage:function(){var t={taskId:this.taskId};if(null!=this.taskId&&""!=this.taskId&&void 0!=this.taskId){var e=this;this.$axios.post("/task/user/allowTask",t).then((function(t){"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(console.log(t),e.task=t.data.retMap.task,e.creater=t.data.retMap.creater,e.roles=t.data.retMap.roles,e.fail=t.data.retMap.fail)})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))}},longToStr:function(t){var e=new Date(t);return ht(e,"yyyy-MM-dd")},refuseAllow:function(){this.$("#refuseAlert").modal("show")},selectRoles:function(){this.$("#confirmAllow").modal("show")},refuseTask:function(t,e){console.log(t,e),this.$("#refuseAlert").modal("hide"),this.$("#submitting").modal("show");var s={reason:t,remarks:e,taskId:this.taskId},a=this;this.$axios.post("/task/user/refuseAllow",s).then((function(t){console.log(t),a.$("#submitting").modal("hide"),200!=t.data.code?a.$message.error(a.$t(t.data.code)):(a.$message.success(a.$t("commitSucc")),a.initPage())})).catch((function(t){console.log(t),a.$("#submitting").modal("hide"),a.$message.error(a.$t("systemErr"))}))},confrimRoles:function(t){this.$("#confirmAllow").modal("hide"),this.$("#submitting").modal("show");var e={roles:t,taskId:this.taskId},s=this;this.$axios.post("/task/user/allowCreate",e).then((function(t){s.$("#submitting").modal("hide"),"200"!=t.data.code?s.$message.error(s.$t(t.data.code)):(console.log(t),s.$message.success(s.$t("commitSucc")),s.initPage())})).catch((function(t){console.log(t),s.$("#submitting").modal("hide"),s.$message.error(s.$t("systemErr"))}))}},watch:{getTaskId:function(t){this.taskId=t,this.initPage()}},computed:{getTaskId:function(){return this.$route.query.taskId}}},_s=ws,xs=(s("80e4"),Object(l["a"])(_s,hs,fs,!1,null,"58cafbee",null)),Cs=xs.exports,Ss=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("top-nav"),s("div",{staticClass:"process-container"},[s("a-divider",{attrs:{orientation:"left"}},[t._v(t._s(t.$t("processMsg")))]),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-6 col-sm-12 col-lg-4"},[s("label",{attrs:{for:"projectName"}},[t._v(" "+t._s(t.$t("projectName"))+" "),s("icon-font",{staticStyle:{"font-size":"20px"},attrs:{type:"icon-bitian"}})],1),s("a-input",{attrs:{"addon-before":t.projectPre,id:"projectName",placeholder:"例：果蝇近缘物种雌雄脑睾丸子宫转录组"},model:{value:t.projectName,callback:function(e){t.projectName=e},expression:"projectName"}})],1),s("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2",staticStyle:{display:"none"}},[s("label",{attrs:{for:"dataType"}},[t._v(" "+t._s(t.$t("dataType"))+" "),s("icon-font",{staticStyle:{"font-size":"20px"},attrs:{type:"icon-bitian"}})],1),s("div",{attrs:{id:"dataType"}},[s("a-select",{staticStyle:{width:"100%"},model:{value:t.dataType,callback:function(e){t.dataType=e},expression:"dataType"}},t._l(t.dataTypes,(function(e){return s("a-select-option",{key:e,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1)],1)]),"其他"==this.dataType?s("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"otherdataType"}},[t._v(" "+t._s(t.$t("other")+t.$t("dataType"))+" "),s("icon-font",{staticStyle:{"font-size":"20px"},attrs:{type:"icon-bitian"}})],1),s("a-input",{attrs:{id:"otherdataType"},model:{value:t.otherDataType,callback:function(e){t.otherDataType=e},expression:"otherDataType"}})],1):t._e(),s("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"principal"}},[t._v(" "+t._s(t.$t("principal"))+" "),s("icon-font",{staticStyle:{"font-size":"20px"},attrs:{type:"icon-bitian"}})],1),s("div",{attrs:{id:"principal"}},[s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:t.principal,callback:function(e){t.principal=e},expression:"principal"}},t._l(t.users,(function(e){return s("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),s("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-3"},[s("label",{attrs:{for:"email"}},[t._v(" "+t._s(t.$t("userEmail"))+" "),s("icon-font",{staticStyle:{"font-size":"20px"},attrs:{type:"icon-bitian"}})],1),s("a-tooltip",{attrs:{placement:"topRight",title:"数据下载及报告分析完成后将发送相关信息至以上邮箱列表",mouseLeaveDelay:1,"auto-adjust-overflow":!0}},[s("a-select",{staticStyle:{width:"100%"},attrs:{id:"email",mode:"tags"},model:{value:t.emails,callback:function(e){t.emails=e},expression:"emails"}},t._l(t.users,(function(e){return s("a-select-option",{key:e.email},[t._v(" "+t._s(e.email)+" ")])})),1)],1)],1),s("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2",staticStyle:{display:"none"}},[s("label",{attrs:{for:"sampleMsg"}},[t._v(" "+t._s(t.$t("sampleMsg"))+" "),s("icon-font",{staticStyle:{"font-size":"20px"},attrs:{type:"icon-bitian"}})],1),s("div",{attrs:{id:"sampleMsg"}},[s("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple"},model:{value:t.sampleMsg,callback:function(e){t.sampleMsg=e},expression:"sampleMsg"}},[s("a-select-option",{attrs:{value:"01"}},[t._v(t._s(t.$t("nucleicAcid")+t.$t("sample")))]),s("a-select-option",{attrs:{value:"02"}},[t._v(t._s(t.$t("tissue")+t.$t("sample")))]),s("a-select-option",{attrs:{value:"03"}},[t._v(t._s(t.$t("cell")+t.$t("sample")))])],1)],1)]),s("div",{staticClass:"form-group-sm col-md-12"},[s("label",{attrs:{for:"projectDesc"}},[t._v(t._s(t.$t("projectDesc")))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.projectDesc,expression:"projectDesc"}],staticClass:"form-control",attrs:{id:"projectDesc",maxlength:"1000",placeholder:"例：果蝇近缘物种雌雄脑睾丸子宫转录组",rows:"3"},domProps:{value:t.projectDesc},on:{input:function(e){e.target.composing||(t.projectDesc=e.target.value)}}})]),s("a-divider",{attrs:{orientation:"left"}},[t._v(t._s(t.$t("staffing")))]),s("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"sampleInput"}},[t._v(" "+t._s(t.$t("sampleInput")+t.$t("principal"))+" "),s("icon-font",{staticStyle:{"font-size":"20px"},attrs:{type:"icon-bitian"}})],1),s("div",{attrs:{id:"sampleInput"}},[s("a-select",{staticStyle:{width:"100%"},model:{value:t.sampleInput,callback:function(e){t.sampleInput=e},expression:"sampleInput"}},t._l(t.users,(function(e){return s("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),s("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"samplePreparation"}},[t._v(" "+t._s(t.$t("samplePreparation")+t.$t("principal"))+" "),s("icon-font",{staticStyle:{"font-size":"20px"},attrs:{type:"icon-bitian"}})],1),s("div",{attrs:{id:"samplePreparation"}},[s("a-select",{staticStyle:{width:"100%"},model:{value:t.samplePreparation,callback:function(e){t.samplePreparation=e},expression:"samplePreparation"}},t._l(t.users,(function(e){return s("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),s("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"libraryPreparation"}},[t._v(" "+t._s(t.$t("libraryPreparation")+t.$t("principal"))+" "),s("icon-font",{staticStyle:{"font-size":"20px"},attrs:{type:"icon-bitian"}})],1),s("div",{attrs:{id:"libraryPreparation"}},[s("a-select",{staticStyle:{width:"100%"},model:{value:t.libraryPreparation,callback:function(e){t.libraryPreparation=e},expression:"libraryPreparation"}},t._l(t.users,(function(e){return s("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),s("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"dismountData"}},[t._v(" "+t._s(t.$t("dismountData")+t.$t("principal"))+" "),s("icon-font",{staticStyle:{"font-size":"20px"},attrs:{type:"icon-bitian"}})],1),s("div",{attrs:{id:"dismountData"}},[s("a-select",{staticStyle:{width:"100%"},model:{value:t.dismountData,callback:function(e){t.dismountData=e},expression:"dismountData"}},t._l(t.users,(function(e){return s("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),s("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"bioinformaticsAnalysis"}},[t._v(" "+t._s(t.$t("bioinformaticsAnalysis")+t.$t("principal"))+" "),s("icon-font",{staticStyle:{"font-size":"20px"},attrs:{type:"icon-bitian"}})],1),s("div",{attrs:{id:"bioinformaticsAnalysis"}},[s("a-select",{staticStyle:{width:"100%"},model:{value:t.bioinformaticsAnalysis,callback:function(e){t.bioinformaticsAnalysis=e},expression:"bioinformaticsAnalysis"}},t._l(t.users,(function(e){return s("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),s("div",{staticClass:"form-group-sm col-md-12"},[s("label",{attrs:{for:"remarks"}},[t._v(t._s(t.$t("remarks")))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"form-control",attrs:{id:"remarks",placeholder:"例：我很着急",rows:"3",maxlength:"1000"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])],1),s("div",{staticClass:"modal-footer",staticStyle:{"margin-top":"20px"}},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.submitData}},[t._v(t._s(t.$t("submit")))])])],1),s("submitting",{attrs:{title:t.$t("submitting")}})],1)},Is=[],Ds=(s("a15b"),s("0c63")),Ns=Ds["a"].createFromIconfontCN({scriptUrl:B.alicdnIcon}),Ps={name:"createProcess",components:{Submitting:j,TopNav:ut,IconFont:Ns},data:function(){return{projectName:"",otherDataType:"",dataType:"",principal:this.$store.getters.getUser.id,emails:[],users:[],remarks:"",sampleMsg:[],samplePreparation:"",libraryPreparation:"",sampleInput:this.$store.getters.getUser.id,dismountData:"",bioinformaticsAnalysis:"",projectDesc:"",dataTypes:["10x单细胞转录组","普通转录组","全基因组","全外显子组","HiC基因组","其他"]}},beforeMount:function(){this.initPage()},methods:{initPage:function(){var t=this;this.$axios.post("/user/getAllUsers").then((function(e){"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.users=e.data.retMap.users,t.samplePreparation=B.getuserIdByRole(t.users,"31"),t.libraryPreparation=B.getuserIdByRole(t.users,"32"),t.dismountData=B.getuserIdByRole(t.users,"33"),t.bioinformaticsAnalysis=B.getuserIdByRole(t.users,"34"),t.$notification.warning({message:t.$t("remind"),description:t.$t("processSelectPre"),duration:null,placement:"bottomRight",getContainer:function(){return t.$(".process-container")[0]}}))})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},submitData:function(){if(this.checkData()){var t={projectName:this.projectPre+this.projectName,dataType:this.dataType,principal:this.principal,emails:this.emails,sampleMsg:this.sampleMsg.join("##"),samplePreparation:this.samplePreparation,libraryPreparation:this.libraryPreparation,dismountData:this.dismountData,bioinformaticsAnalysis:this.bioinformaticsAnalysis,sampleInput:this.sampleInput,remarks:this.remarks,projectDesc:this.projectDesc};"其他"==t.dataType&&(t.dataType=this.otherDataType);var e=this;e.$("#submitting").modal("show"),this.$axios.post("/task/addProcess",t).then((function(t){e.$("#submitting").modal("hide"),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(e.$message.success(e.$t("save_success")),e.$router.push("/task"))})).catch((function(t){e.$("#submitting").modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))}},isEmail:function(t,e){console.log(t,e);var s=/^([A-Za-z0-9_\-\\.])+\\@([A-Za-z0-9_\-\\.])+\.([A-Za-z]{2,4})$/;return console.log(s.test(t)),s.test(t)||(e=null),s.test(t)},checkData:function(){return""==this.projectName?(this.$message.error(this.$t("projectName")+this.$t("not_null")),!1):""==this.principal?(this.$message.error(this.$t("principal")+this.$t("not_null")),!1):0==this.emails.length?(this.$message.error(this.$t("userEmail")+this.$t("not_null")),!1):""==this.samplePreparation?(this.$message.error(this.$t("samplePreparation")+this.$t("not_null")),!1):""==this.libraryPreparation?(this.$message.error(this.$t("libraryPreparation")+this.$t("not_null")),!1):""==this.dismountData?(this.$message.error(this.$t("dismountData")+this.$t("not_null")),!1):""!=this.bioinformaticsAnalysis||(this.$message.error(this.$t("bioinformaticsAnalysis")+this.$t("not_null")),!1)}},watch:{emails:function(t){if(t.length>0)for(var e=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,s=t.length-1;s>=0;s--)e.test(t[s])||this.$delete(t,s)}},computed:{projectPre:function(){return this.$store.getters.getUser.group.groupname+"-"+this.$store.getters.getUser.name+"-"+ht(new Date,"yyyyMM")+"-"}}},Rs=Ps,Ts=(s("3c0c"),Object(l["a"])(Rs,Ss,Is,!1,null,"68b908cc",null)),js=Ts.exports,Es=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("top-nav"),s("div",{staticClass:"process-container"},[s("div",{staticClass:"detail-all"},[s("a-steps",{style:t.stepStyle,attrs:{type:"navigation",size:"small"},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}},[s("a-step",{attrs:{title:t.$t("samplePreparation"),status:t.setpStatu(0),disabled:t.isDisabled(0)}},["20"==t.subTask.currentstatu?s("a-icon",{attrs:{slot:"icon",type:"loading"},slot:"icon"}):t._e()],1),s("a-step",{attrs:{title:t.$t("libraryPreparation"),status:t.setpStatu(1),disabled:t.isDisabled(1)}},["30"==t.subTask.currentstatu?s("a-icon",{attrs:{slot:"icon",type:"loading"},slot:"icon"}):t._e()],1),s("a-step",{attrs:{title:t.$t("dismountData"),status:t.setpStatu(2),disabled:t.isDisabled(2)}},["40"==t.subTask.currentstatu?s("a-icon",{attrs:{slot:"icon",type:"loading"},slot:"icon"}):t._e()],1),s("a-step",{attrs:{title:t.$t("bioinformaticsAnalysis"),status:t.setpStatu(3),disabled:t.isDisabled(3)}},["50"==t.subTask.currentstatu?s("a-icon",{attrs:{slot:"icon",type:"loading"},slot:"icon"}):t._e()],1),s("a-step",{attrs:{title:t.$t("complete"),status:t.setpStatu(4),disabled:t.isDisabled(4)}},["60"==t.subTask.currentstatu?s("a-icon",{attrs:{slot:"icon",type:"loading"},slot:"icon"}):t._e()],1)],1),s("div",{staticClass:"steps-content"},[0==t.current?s("process-step2",{attrs:{process:t.process,"sub-id":t.subId,"task-id":t.subId}}):t._e(),1==t.current?s("process-step3",{attrs:{process:t.process,"sub-id":t.subId}}):t._e(),2==t.current?s("process-step4",{attrs:{process:t.process,"sub-id":t.subId}}):t._e(),3==t.current?s("process-step5",{attrs:{process:t.process,"sub-id":t.subId}}):t._e(),4==t.current?s("process-step6",{attrs:{process:t.process}}):t._e()],1)],1)])],1)},Ms=[],As=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:t.$t("samplePreparation"),"sub-title":t.process.projectname}},[s("template",{slot:"extra"},[t.canPase?s("a-button",{attrs:{type:"danger",disabled:t.disabledPass},on:{click:function(e){return t.batchUnPass()}}},[t._v(" "+t._s(t.$t("unPass"))+" ")]):t._e(),t.canPase?s("a-button",{attrs:{type:"primary",disabled:t.disabledPass},on:{click:function(e){return t.submitData("pass")}}},[t._v(" "+t._s(t.$t("pass"))+" ")]):t._e(),t.isEnd?s("a-popconfirm",{attrs:{placement:"topLeft","ok-text":t.$t("yes"),disabled:0==t.selectedRows.length,"cancel-text":t.$t("no")},on:{confirm:t.deleteByIds}},[s("template",{slot:"title"},[s("p",[t._v(t._s(t.$t("areyousureDelete")))])]),s("a-button",{attrs:{disabled:t.canComplete,type:"danger"}},[t._v(" "+t._s(t.$t("delete"))+" ")])],2):t._e(),t.isEnd?s("a-button",{attrs:{disabled:t.canDivide,type:"primary"},on:{click:t.subTaskInfo}},[t._v(" "+t._s(t.$t("divide"))+" ")]):t._e(),t.isEnd?s("a-button",{attrs:{type:"primary",disabled:t.canComplete},on:{click:function(e){return t.submitData("complete")}}},[t._v(" "+t._s(t.$t("submit"))+" ")]):t._e(),t.isEnd?s("a-button",{attrs:{type:"primary",disabled:t.cansubmit},on:{click:function(e){return t.submitData("real")}}},[t._v(" "+t._s(t.$t("libraryPreparation"))+" ")]):t._e(),t.isEnd?s("a-button",{on:{click:function(e){return t.submitData("tmp")}}},[t._v(" "+t._s(t.$t("tmpSave"))+" ")]):t._e(),s("a-button",{attrs:{icon:"download",disabled:0==this.selectedRowKeys.length},on:{click:t.downLoad}},[t._v(" "+t._s(t.$t("outPut"))+" ")]),t.isEnd?s("a-upload",{attrs:{name:"file",accept:".xls,.xlsx","show-upload-list":!1,headers:{token:this.$cookies.get("token"),processId:this.process.id},action:this.$axios.defaults.baseURL+"/file/import/makeInput"},on:{change:t.handUploadChange}},[s("a-button",[s("a-icon",{attrs:{type:"upload"}}),t._v(t._s(t.$t("input")))],1)],1):t._e()],1),s("a-row",{attrs:{type:"flex"}},[s("a-tag",{staticClass:"pointer",attrs:{color:"#87d068"},on:{click:function(e){return t.showSubTask("03")}}},[t._v(" "+t._s(t.$t("allAllow"))+" ")]),s("a-tag",{staticClass:"pointer",attrs:{color:"#108ee9"},on:{click:function(e){return t.showSubTask("02")}}},[t._v(" "+t._s(t.$t("submitted"))+" ")]),t._l(t.subs,(function(e){return s("a-tag",{key:e.id,staticClass:"pointer",attrs:{color:"blue"},on:{click:function(s){return t.showSubTask(e.id)}}},[t._v(" "+t._s(e.name)+" ")])})),s("a-tag",{staticClass:"pointer",attrs:{color:"#f50"},on:{click:function(e){return t.showSubTask("00")}}},[t._v(" "+t._s(t.$t("init"))+" ")])],2)],2),s("a-table",{attrs:{columns:t.columns,"data-source":t.data,bordered:"",loading:t.tableLoad,scroll:t.scroll,"row-selection":t.rowSelection,pagination:!1,size:"middle"},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var a=e.setSelectedKeys,i=e.selectedKeys,r=e.confirm,o=e.clearFilters,n=e.column;return s("div",{staticStyle:{padding:"8px"}},[s("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{value:i[0]},on:{change:function(t){return a(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(i,r,n.dataIndex)}}}),s("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(i,r,n.dataIndex)}}},[t._v(" "+t._s(t.$t("search"))+" ")]),s("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v(" "+t._s(t.$t("reset"))+" ")])],1)}},{key:"filterIcon",fn:function(t){return s("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},t._l(this.columnNames,(function(e){return{key:e,fn:function(a,i,r){return[s("div",{key:e},["cellsort"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.colIsDisabed(i,e)||t.isStop(i)||t.isDisabled(i)},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.cellsort,callback:function(e){t.$set(i,"cellsort",e)},expression:"record.cellsort"}},t._l(t.cellSortMethods,(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"initsample"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:i.initsample,callback:function(e){t.$set(i,"initsample",e)},expression:"record.initsample"}},t._l(t.sampleInits,(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"transform"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||!t.isTissu(i)||t.isDisabled(i)},model:{value:i.transform,callback:function(e){t.$set(i,"transform",e)},expression:"record.transform"}},t._l(t.transformSamples,(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"checkresult"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i)},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.checkresult,callback:function(e){t.$set(i,"checkresult",e)},expression:"record.checkresult"}},t._l(t.checkresults,(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"checkuser"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i)},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.checkuser,callback:function(e){t.$set(i,"checkuser",e)},expression:"record.checkuser"}},t._l(t.allUsers,(function(e){return s("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1):"reviewer"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i)},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.reviewer,callback:function(e){t.$set(i,"reviewer",e)},expression:"record.reviewer"}},t._l(t.allUsers,(function(e){return s("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1):"extractmethod"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i)},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.extractmethod,callback:function(e){t.$set(i,"extractmethod",e)},expression:"record.extractmethod"}},t._l(t.extractmethods,(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"testdate"==e?s("a-date-picker",{attrs:{format:"YYYY-MM-DD",disabled:t.isStop(i)||t.isDisabled(i)},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.testdate,callback:function(e){t.$set(i,"testdate",e)},expression:"record.testdate"}}):"databasetype"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i)},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.databasetype,callback:function(e){t.$set(i,"databasetype",e)},expression:"record.databasetype"}},t._l(t.databaseTypes(i.initsample),(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"sequencingplatform"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i)},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.sequencingplatform,callback:function(e){t.$set(i,"sequencingplatform",e)},expression:"record.sequencingplatform"}},t._l(t.seqPlants,(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"samplevolume"==e?s("a-input-number",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i),min:0},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.samplevolume,callback:function(e){t.$set(i,"samplevolume",e)},expression:"record.samplevolume"}}):"concentration"==e?s("a-input-number",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i),min:0},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.concentration,callback:function(e){t.$set(i,"concentration",e)},expression:"record.concentration"}}):"totalnumber"==e?s("a-input-number",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i),min:0},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.totalnumber,callback:function(e){t.$set(i,"totalnumber",e)},expression:"record.totalnumber"}}):"upload"==e?s("div",[s("a-upload",{attrs:{name:"file",multiple:!0,disabled:t.isStop(i)||t.isDisabled(i),headers:t.uploadHeader(i),action:t.uploadUrl,showUploadList:!1},on:{change:t.handleUploadChange}},[s("a-button",{attrs:{disabled:t.isStop(i)||t.isDisabled(i)}},[s("a-icon",{attrs:{type:"upload"}}),t._v(t._s(t.$t("upload"))+" ")],1)],1)],1):"index"!=e?s("a-input",{staticStyle:{width:"100%"},attrs:{value:a,disabled:t.colIsDisabed(i,e)||t.isStop(i)||t.isDisabled(i)},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i[e],callback:function(s){t.$set(i,e,s)},expression:"record[col]"}}):[t._v(" "+t._s(t.showText(e,a,r))+" ")]],2)]}}})),{key:"operation",fn:function(e,a){return[s("div",{staticClass:"editable-row-operations"},[s("span",["03"==a.currentstatu?s("a-icon",{attrs:{type:"check-circle",theme:"twoTone","two-tone-color":"#52c41a"}}):t._e(),"02"==a.currentstatu?s("a-icon",{attrs:{type:"clock-circle",theme:"twoTone","two-tone-color":"#FFCC00"}}):t._e(),"07"==a.currentstatu?s("a-icon",{attrs:{type:"close-circle",theme:"twoTone","two-tone-color":"#eb2f96"}}):t._e(),"09"==a.currentstatu?s("a-icon",{attrs:{type:"stop",theme:"twoTone","two-tone-color":"#CC0000"}}):t._e()],1),"02"==a.currentstatu?s("span",[t._v(" "),s("a",{attrs:{disabled:!t.canPase},on:{click:function(e){return t.passItem(a,!0)}}},[t._v(t._s(t.$t("pass")))]),t._v(" "),s("a",{attrs:{disabled:!t.canPase},on:{click:function(e){return t.passItem(a,!1)}}},[t._v(t._s(t.$t("unPass")))])]):t._e(),s("span",[t._v(" "),t.isStop(a)?s("a",{on:{click:function(e){return t.showReason(a.id)}}},[t._v(t._s(t.$t("showReason")))]):t._e(),t._v(" "),t.isStop(a)||t.isDisabled(a)?t._e():s("a",{on:{click:function(e){return t.showStopAlert(a.id)}}},[t._v(t._s(t.$t("stop")))]),t._v(" "),s("a",{on:{click:function(e){return t.showFileList(a.id)}}},[t._v(t._s("附件"))])])])]}}],null,!0)},[s("template",{slot:"derivativeindexTitle"},[s("a-tooltip",[s("template",{slot:"title"},[t._v(" "+t._s(t.$t("process.derivativeindexTip"))+" ")]),t._v(" "+t._s(t.$t("derivativeindex"))+" "),s("a-icon",{attrs:{type:"question-circle",theme:"twoTone"}})],2)],1)],2),s("sub-task-info",{ref:"thisSubTaskInfo",on:{subTaskInfo:t.startProcess}}),s("submitting",{ref:"submitting",attrs:{title:t.$t("submitting")}}),s("refuse-alert",{ref:"refuseAlert",attrs:{"modal-title":t.$t("reason")},on:{confirmFun:t.stopProcess}}),s("show-filelist",{ref:"showFilelist",attrs:{"detail-id":t.detailId}}),s("refuse-alert",{ref:"unPassReason",attrs:{"modal-title":t.$t("unPass")},on:{confirmFun:t.unPassReason}})],1)},Ls=[],Os=(s("4de4"),s("caad"),s("2532"),s("2ca0"),s("2909")),Fs=s("5530"),Us=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{id:"showFileList",tabindex:"-1",role:"dialog","aria-labelledby":"showFileListLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"showFileListLabel"}},[t._v(t._s(t.$t("fileList")))]),t._m(0)]),s("div",{staticClass:"modal-body"},[s("a-list",{attrs:{"item-layout":"horizontal","data-source":t.fileList,bordered:!0},scopedSlots:t._u([{key:"renderItem",fn:function(e){return s("a-list-item",{},[s("a",{on:{click:function(s){return t.downLoadFile(e.id,e.realname)}}},[t._v(t._s(e.realname))])])}}])})],1)])])])},zs=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Ks={name:"showFilelist",props:{detailId:String},data:function(){return{fileList:[]}},beforeMount:function(){this.initPage()},methods:{downLoadFile:function(t,e){console.log(t,e);var s={fileId:t};this.$axios({url:"/file/download",data:s,method:"post",responseType:"blob"}).then((function(t){var s=t.data;if(s){var a=window.URL.createObjectURL(new Blob([s])),i=document.createElement("a");i.style.display="none",i.href=a,i.setAttribute("download",e),document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(i.href),document.body.removeChild(i)}}))},initPage:function(){if(!B.isNull(this.detailId)){var t=this;this.$axios.post("/file/showFileList",{detailId:this.detailId}).then((function(e){"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):t.fileList=e.data.retMap.fileList})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))}}},watch:{detailId:function(){this.initPage()}}},qs=Ks,Vs=Object(l["a"])(qs,Us,zs,!1,null,"74abea9b",null),Ys=Vs.exports,Hs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"subTaskInfo",staticClass:"modal fade",attrs:{id:"subTaskInfo",tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"subTaskInfoLabel"}},[t._v(t._s(t.$t("subTask")))]),t._m(0)]),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"reason"}},[t._v(t._s(t.$t("subProcessName")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.subProcessName,expression:"subProcessName"}],staticClass:"form-control",attrs:{type:"text",id:"reason"},domProps:{value:t.subProcessName},on:{input:function(e){e.target.composing||(t.subProcessName=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"remarks"}},[t._v(t._s(t.$t("remarks")))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"form-control",attrs:{id:"remarks",rows:"3"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.isCanConfirm},on:{click:t.subInfoConfirm}},[t._v(t._s(t.$t("confirm")))])])])])])},Bs=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Js={name:"subTaskInfo",data:function(){return{subProcessName:"",remarks:""}},methods:{subInfoConfirm:function(){this.$("#subTaskInfo").modal("hide"),this.$emit("subTaskInfo",this.subProcessName,this.remarks)}},computed:{isCanConfirm:function(){return B.isNull(this.subProcessName+"")}}},Gs=Js,Ws=Object(l["a"])(Gs,Hs,Bs,!1,null,"36fc3bac",null),Zs=Ws.exports,Xs={name:"processStep2",components:{SubTaskInfo:Zs,ShowFilelist:Ys,RefuseAlert:ge,Submitting:j},props:{taskId:String,process:Object},data:function(){return this.cacheData=[],{tableLoad:!1,data:[],columns:[],columnNames:[],scroll:{x:1500},editingKey:"",allUsers:[],subs:[],selectedRowKeys:[],selectedRows:[],stopId:"",detailId:"",subTask:{},curFlag:"01",subProcessName:"",remarks:"",subId:"00"}},beforeMount:function(){this.initPage()},methods:{passItem:function(t,e){this.selectedRows=new Array,this.selectedRows.push(t),this.selectedRowKeys=new Array,this.selectedRowKeys.push(t.id),e?this.submitData("pass"):this.$(this.$refs.unPassReason.$el).modal("show")},batchUnPass:function(){this.$(this.$refs.unPassReason.$el).modal("show")},unPassReason:function(t,e){this.$(this.$refs.unPassReason.$el).modal("hide"),console.log(t,e);var s={subId:this.subId,processId:this.process.id,data:JSON.stringify(this.selectedRows),flag:"unPass",subProcessName:this.subProcessName,remarks:this.remarks,reason:t,remark:e},a=this;this.$(this.$refs.submitting.$el).modal("show"),this.$axios.post("/task/process/unPassMakes",s).then((function(t){a.$(a.$refs.submitting.$el).modal("hide"),"200"!=t.data.code?a.$message.error(a.$t(t.data.code)):(a.$message.success(a.$t("commitSucc")),a.value="",a.selectedRowKeys=[],a.selectedRows=[],a.initPage())})).catch((function(t){a.$(a.$refs.submitting.$el).modal("hide"),console.log(t),a.$message.error(a.$t("systemErr"))}))},deleteByIds:function(){var t=this,e={ids:this.selectedRowKeys,type:"02"};this.$(this.$refs.submitting.$el).modal("show"),this.$axios.post("/task/process/deleteByIds",e).then((function(e){t.$(t.$refs.submitting.$el).modal("hide"),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.$message.success(t.$t("commitSucc")),t.initPage())})).catch((function(e){t.$(t.$refs.submitting.$el).modal("hide"),console.log(e),t.$message.error(t.$t("systemErr"))}))},isDisabled:function(t){return!this.isEnd||("02"==t.currentstatu||"03"==t.currentstatu||"09"==t.currentstatu||"07"==t.currentstatu)},handleReset:function(t){t(),this.searchText=""},handleSearch:function(t,e,s){e(),this.searchText=t[0],this.searchedColumn=s},startProcess:function(t,e){this.$(this.$refs.thisSubTaskInfo.$el).modal("hide"),this.subProcessName=t,this.remarks=e,this.submitData("divide")},subTaskInfo:function(){this.$(this.$refs.thisSubTaskInfo.$el).modal("show")},showSubTask:function(t){this.subId=t,this.initPage()},backToTotal:function(){this.$router.push({name:"processInit",query:{taskId:this.process.taskid}})},isTissu:function(t){return"02"==t.initsample},handUploadChange:function(t){console.log(t),"uploading"==t.file.status?this.$(this.$refs.submitting.$el).modal("show"):(this.$(this.$refs.submitting.$el).modal("hide"),"error"==t.file.status?this.$message.error(this.$t("systemErr")):"done"==t.file.status&&(this.$message.success(this.$t("commitSucc")),this.initPage()))},downLoad:function(){var t={processId:this.process.id,makeIds:JSON.stringify(this.selectedRowKeys)};B.downLoad(t,"/task/process/downloadMakes","样本制备.xls")},showFileList:function(t){console.log(t),this.detailId=t,this.$(this.$refs.showFilelist.$el).modal("show")},showReason:function(t){var e=this;this.$axios.post("/task/process/showStopReason",{detailId:t}).then((function(t){"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):e.$error({title:e.$t("reason"),content:t.data.retMap.reason})})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))},showStopAlert:function(t){this.stopId=t,this.$(this.$refs.refuseAlert.$el).modal("show")},stopProcess:function(t,e){this.$(this.$refs.refuseAlert.$el).modal("hide");var s={makeId:this.stopId,reason:t,remark:e},a=this;this.$(this.$refs.submitting.$el).modal("show"),this.$axios.post("/task/process/stopMake",s).then((function(t){a.$(a.$refs.submitting.$el).modal("hide"),"200"!=t.data.code?a.$message.error(a.$t(t.data.code)):(a.$message.success(a.$t("commitSucc")),a.initPage())})).catch((function(t){a.$(a.$refs.submitting.$el).modal("hide"),console.log(t),a.$message.error(a.$t("systemErr"))}))},handleUploadChange:function(t){"done"==t.file.status?this.$message.success(this.$t("upload")+this.$t("save_success")):"error"==t.file.status&&this.$message.success(this.$t("systemErr"))},colIsDisabed:function(t,e){var s=t.initsample,a=t.transform;return"selfnumber"==e||(("extractmethod"==e||"remaining"==e)&&"02"!=s||(("cellsort"==e||"celllife"==e)&&"03"!=s&&"03"!=a||("samplename"==e||"selfnumber"==e||"species"==e||"tissue"==e)))},submitData:function(t){var e={subId:this.subId,processId:this.process.id,data:JSON.stringify(this.data),flag:t,subProcessName:this.subProcessName,remarks:this.remarks};"tmp"!=t&&(e.data=JSON.stringify(this.selectedRows));var s=this;this.$(this.$refs.submitting.$el).modal("show"),this.$axios.post("/task/process/submitMakes",e).then((function(t){console.log(t),s.$(s.$refs.submitting.$el).modal("hide"),"200"!=t.data.code?s.$message.error(s.$t(t.data.code)):(s.$message.success(s.$t("commitSucc")),s.value="",s.selectedRowKeys=[],s.selectedRows=[],s.initPage())})).catch((function(t){s.$(s.$refs.submitting.$el).modal("hide"),console.log(t),s.$message.error(s.$t("systemErr"))}))},initPage:function(){this.initColumns(this.process.sampletype);var t=this;if(!B.isNull(this.process.id)){var e={processId:this.process.id,subId:this.subId,curFlag:this.curFlag};this.tableLoad=!0,this.$axios.post("/task/process/makeInit",e).then((function(e){if(console.log(e),t.tableLoad=!1,"200"!=e.data.code)t.$message.error(t.$t(e.data.code));else{if(t.data=new Array,0!=e.data.retMap.makes.length)for(var s in e.data.retMap.makes){var a=e.data.retMap.makes[s];a.testdate=ht(new Date(a.testdate),"yyyy-MM-dd"),a.key=a.id,t.data.push(a)}t.cacheData=t.data.map((function(t){return Object(Fs["a"])({},t)})),t.allUsers=e.data.retMap.allUsers,t.subs=e.data.retMap.subs,t.selectedRows=[],t.selectedRowKeys=[]}})).catch((function(e){t.tableLoad=!1,console.log(e),t.$message.error(t.$t("systemErr"))}))}},initColumns:function(t){var e=this;console.log(t);var s=0,a=new Array;for(var i in a.push({title:this.$t("index"),dataIndex:"index",width:"50px",fixed:"left",scopedSlots:{customRender:"index"}}),s+=50,a.push({title:this.$t("initSample"),dataIndex:"initsample",width:"150px",scopedSlots:{customRender:"initsample"}}),s+=150,a.push({title:this.$t("transformSample"),dataIndex:"transform",width:"150px",scopedSlots:{customRender:"transform"}}),s+=150,a.push({title:this.$t("sampleName"),dataIndex:"samplename",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"samplename"},onFilter:function(t,e){return e.samplename.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){e.searchInput.focus()}),0)}}),s+=150,a.push({title:this.$t("sampleIndex"),dataIndex:"selfnumber",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"selfnumber"},onFilter:function(t,e){return!B.isNull(e.selfnumber)&&e.selfnumber.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){e.searchInput.focus()}),0)}}),s+=150,a.push({dataIndex:"derivativeindex",width:"150px",slots:{title:"derivativeindexTitle"},scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"derivativeindex"},onFilter:function(t,e){return!B.isNull(e.derivativeindex)&&e.derivativeindex.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){e.searchInput.focus()}),0)}}),s+=150,a.push({title:this.$t("species"),dataIndex:"species",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"species"},onFilter:function(t,e){return!B.isNull(e.species)&&e.species.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){e.searchInput.focus()}),0)}}),s+=150,a.push({title:this.$t("tissue")+this.$t("animal_stock_resource"),dataIndex:"tissue",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"tissue"},onFilter:function(t,e){return!B.isNull(e.tissue)&&e.tissue.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){e.searchInput.focus()}),0)}}),s+=150,a.push({title:this.$t("testDate"),dataIndex:"testdate",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"testdate"},onFilter:function(t,e){return!B.isNull(e.testdate)&&e.testdate.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){e.searchInput.focus()}),0)}}),s+=150,a.push({title:this.concentrationName,dataIndex:"concentration",width:"150px",scopedSlots:{customRender:"concentration"}}),s+=150,a.push({title:this.$t("sampleVolume")+"(ul)",dataIndex:"samplevolume",width:"150px",scopedSlots:{customRender:"samplevolume"}}),s+=150,a.push({title:this.totalNumberTitle,dataIndex:"totalnumber",width:"150px",scopedSlots:{customRender:"totalnumber"}}),s+=150,a.push({title:this.$t("cellLife"),dataIndex:"celllife",width:"100px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"celllife"},onFilter:function(t,e){return!B.isNull(e.celllife)&&e.celllife.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){e.searchInput.focus()}),0)}}),s+=100,a.push({title:this.$t("cellSort"),dataIndex:"cellsort",width:"200px",scopedSlots:{customRender:"cellsort"}}),s+=200,a.push({title:this.$t("extractMethod"),dataIndex:"extractmethod",width:"150px",scopedSlots:{customRender:"extractmethod"}}),s+=150,a.push({title:this.$t("checkResult"),dataIndex:"checkresult",width:"150px",scopedSlots:{customRender:"checkresult"}}),s+=150,a.push({title:this.$t("checkRemarks"),dataIndex:"checkremarks",width:"200px",scopedSlots:{customRender:"checkremarks"}}),s+=200,a.push({title:this.$t("checkUser"),dataIndex:"checkuser",width:"150px",scopedSlots:{customRender:"checkuser"}}),s+=150,a.push({title:this.$t("reviewer"),dataIndex:"reviewer",width:"150px",scopedSlots:{customRender:"reviewer"}}),s+=150,a.push({title:this.$t("databaseType"),dataIndex:"databasetype",width:"200px",scopedSlots:{customRender:"databasetype"}}),s+=200,a.push({title:this.$t("SequencingPlatform"),dataIndex:"sequencingplatform",width:"200px",scopedSlots:{customRender:"sequencingplatform"}}),s+=200,a.push({title:this.$t("remaining"),dataIndex:"remaining",width:"200px",scopedSlots:{customRender:"remaining"}}),s+=200,a.push({title:this.$t("remarks"),dataIndex:"remarks",width:"200px",scopedSlots:{customRender:"remarks"}}),s+=200,a.push({title:this.$t("upload"),dataIndex:"upload",width:"200px",scopedSlots:{customRender:"upload"}}),s+=200,a.push({title:this.$t("operation"),dataIndex:"operation",width:"150px",fixed:"right",scopedSlots:{customRender:"operation"}}),s+=150,this.scroll.x=s,this.columns=a,this.columnNames=new Array,a)this.columnNames.push(a[i].dataIndex)},handleChange:function(t,e,s){var a=Object(Os["a"])(this.data),i=a.filter((function(t){return e===t.key}))[0];i&&(i[s]=t,this.data=a)},onDelete:function(t){var e=Object(Os["a"])(this.data);this.data=e.filter((function(e){return e.key!==t}))},edit:function(t){var e=Object(Os["a"])(this.data),s=e.filter((function(e){return t===e.key}))[0];this.editingKey=t,s&&(s.editable=!0,this.data=e)},save:function(t){var e=Object(Os["a"])(this.data),s=Object(Os["a"])(this.cacheData),a=e.filter((function(e){return t===e.key}))[0];if(this.checkRowData(a)){a.add=!1;var i=s.filter((function(e){return t===e.key}))[0];a&&i&&(this.data=e,Object.assign(i,a),this.cacheData=s),a.editable=!1,this.editingKey=""}},cancel:function(t){var e=Object(Os["a"])(this.data),s=e.filter((function(e){return t===e.key}))[0];if(1==s.add)return this.editingKey="",void this.onDelete(s.key);this.editingKey="",s&&(Object.assign(s,this.cacheData.filter((function(e){return t===e.key}))[0]),s.editable=!1,this.data=e)},checkRowData:function(t){return B.isNull(t.samplename)?(this.$message.error(this.$t("sampleName")+this.$t("not_null")),!1):B.isNull(t.selfnumber)?(this.$message.error(this.$t("sampleIndex")+this.$t("not_null")),!1):B.isNull(t.species)?(this.$message.error(this.$t("species")+this.$t("not_null")),!1):B.isNull(t.tissue)?(this.$message.error(this.$t("tissue")+this.$t("animal_stock_resource")+this.$t("not_null")),!1):B.isNull(t.testdate)?(B.$message.error(this.$t("testDate")+this.$t("not_null")),!1):t.concentration<0?(this.$message.error(this.$t("concentration")+this.$t("not_null")),!1):t.samplevolume<0?(this.$message.error(this.$t("sampleVolume")+this.$t("not_null")),!1):"02"==this.process.sampletype&&B.isNull(t.remaining)?(this.$message.error(this.$t("remaining")+this.$t("not_null")),!1):B.isNull(t.checkresult)?(this.$message.error(this.$t("checkResult")+this.$t("not_null")),!1):"02"==this.process.sampletype&&B.isNull(t.extractmethod)?(this.$message.error(this.$t("extractMethod")+this.$t("not_null")),!1):t.totalNumber<0?(this.$message.error(this.$t("totalNumber")+this.$t("not_null")),!1):"03"==this.process.sampletype&&B.isNull(t.celllife)?(this.$message.error(this.$t("celllife")+this.$t("not_null")),!1):"03"==this.process.sampletype&&B.isNull(t.cellsort)?(this.$message.error(this.$t("cellsort")+this.$t("not_null")),!1):B.isNull(t.databasetype)?(this.$message.error(this.$t("databaseType")+this.$t("not_null")),!1):!B.isNull(t.sequencingplatform)||(this.$message.error(this.$t("SequencingPlatform")+this.$t("not_null")),!1)},databaseTypes:function(t){return B.databaseTypes(t)},isStop:function(t){return"09"==t.currentstatu||"07"==t.currentstatu},showText:function(t,e,s){if("samplemsg"==t)for(var a in this.sampletypes){var i=this.sampletypes[a];if(i.key==e)return i.val}if("samplestatu"==t)for(var r in this.sampleStatu){var o=this.sampleStatu[r];if(o.key==e)return o.val}if("cellsort"==t)for(var n in this.cellSortMethods){var l=this.cellSortMethods[n];if(l.key==e)return l.val}if("databasetype"==t)for(var c in this.databaseTypes){var d=this.databaseTypes[c];if(d.key==e)return d.val}if("sequencingplatform"==t)for(var u in this.seqPlants){var m=this.seqPlants[u];if(m.key==e)return m.val}if("checkuser"==t||"reviewer"==t)for(var p in this.allUsers){var h=this.allUsers[p];if(h.id==e)return h.name}if("extractmethod"==t)for(var f in this.extractmethods){var b=this.extractmethods[f];if(b.key==e)return b.val}if("checkresult"==t)for(var g in this.checkresults){var v=this.checkresults[g];if(v.key==e)return v.val}return"testdate"==t?B.isNull(e)?"":ht(new Date(e),"yyyy-MM-dd"):"index"==t?s+1:e},uploadHeader:function(t){return{token:this.$cookies.get("token"),make:t.id}}},computed:{rowSelection:function(){var t=this,e=this.selectedRowKeys,s=this.selectedRows;return{selectedRowKeys:e,selectedRows:s,onChange:function(e,s){console.log("selectedRowKeys: ".concat(e),"selectedRows: ",s),t.selectedRowKeys=e,t.selectedRows=s},getCheckboxProps:function(t){return{props:{disabled:"07"==t.currentstatu||"09"==t.currentstatu}}}}},concentrationName:function(){return"01"==this.process.sampletype?this.$t("concentration")+"(ng/ul)":this.$t("concentration")+"("+this.$t("cellNumber")+"/μl)"},totalNumberTitle:function(){return"01"==this.process.sampletype?this.$t("nucleicAcid")+this.$t("totalNumber")+"(ug)":this.$t("cell")+this.$t("totalNumber")+"("+this.$t("cellNumber")+")"},cellSortMethods:function(){return B.cellSortMethods()},seqPlants:function(){return B.seqPlants()},extractmethods:function(){return B.extractmethods()},checkresults:function(){return B.checkresults()},sampleInits:function(){return B.sampleInits()},transformSamples:function(){for(var t=new Array,e=0;e<this.sampleInits.length;e++)t.push(this.sampleInits[e]);return t},canOperating:function(){return"20"==this.process.taskstatu&&this.$store.getters.getUser.id==this.process.samplepreparation},canEdit:function(){return!(!this.$store.getters.isCurrentUser(this.process.samplepreparation)&&!this.$store.getters.isAdmin)},cansubmit:function(){if(0==this.selectedRowKeys.length)return!0;for(var t in this.selectedRows)if("03"!=this.selectedRows[t].currentstatu)return!0;return!1},canDivide:function(){if(0==this.selectedRowKeys.length)return!0;for(var t in this.selectedRows)if(!B.isNull(this.selectedRows[t].subid)||"02"==this.selectedRows[t].currentstatu||"03"==this.selectedRows[t].currentstatu)return!0;return!1},canComplete:function(){if(0==this.selectedRowKeys.length)return!0;for(var t in this.selectedRows)if("02"==this.selectedRows[t].currentstatu||"03"==this.selectedRows[t].currentstatu||"09"==this.selectedRows[t].currentstatu||"07"==this.selectedRows[t].currentstatu)return!0;return!1},uploadUrl:function(){return this.$axios.defaults.baseURL+"/file/import/makeUpload"},isEnd:function(){return!(this.process.taskstatu.startsWith("7")||!this.$store.getters.isCurrentUser(this.process.samplepreparation))},canPase:function(){return!(this.process.taskstatu.startsWith("7")||!this.$store.getters.isCurrentUser(this.process.creater))},disabledPass:function(){if(0==this.selectedRowKeys.length)return!0;for(var t in this.selectedRows)if("02"!=this.selectedRows[t].currentstatu)return!0;return!1}},watch:{process:{handler:function(){this.initPage()},deep:!0}}},Qs=Xs,ta=Object(l["a"])(Qs,As,Ls,!1,null,"1bc6cf8a",null),ea=ta.exports,sa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:t.$t("libraryPreparation"),"sub-title":t.process.projectname}},[s("template",{slot:"extra"},[t.canPase?s("a-button",{attrs:{type:"danger",disabled:t.disabledPass},on:{click:function(e){return t.batchUnPass()}}},[t._v(" "+t._s(t.$t("unPass"))+" ")]):t._e(),t.canPase?s("a-button",{attrs:{type:"primary",disabled:t.disabledPass},on:{click:function(e){return t.submitData("pass")}}},[t._v(" "+t._s(t.$t("pass"))+" ")]):t._e(),t.isEnd?s("a-popconfirm",{attrs:{placement:"topLeft","ok-text":t.$t("yes"),disabled:0==t.selectedRows.length,"cancel-text":t.$t("no")},on:{confirm:t.deleteByIds}},[s("template",{slot:"title"},[s("p",[t._v(t._s(t.$t("areyousureDelete")))])]),s("a-button",{attrs:{disabled:t.canComplete,type:"danger"}},[t._v(" "+t._s(t.$t("delete"))+" ")])],2):t._e(),t.isEnd?s("a-button",{attrs:{type:"primary",disabled:t.canComplete},on:{click:function(e){return t.submitData("complete")}}},[t._v(" "+t._s(t.$t("submit"))+" ")]):t._e(),t.isEnd?s("a-button",{attrs:{disabled:t.canDivide,type:"primary"},on:{click:t.subTaskInfo}},[t._v(" "+t._s(t.$t("divide"))+" ")]):t._e(),t.isEnd?s("a-button",{attrs:{type:"primary",disabled:t.cansubmit},on:{click:function(e){return t.submitData("real")}}},[t._v(" "+t._s(t.$t("dismountData"))+" ")]):t._e(),t.isEnd?s("a-button",{on:{click:function(e){return t.submitData("tmp")}}},[t._v(" "+t._s(t.$t("tmpSave"))+" ")]):t._e(),s("a-button",{attrs:{icon:"download",disabled:0==this.selectedRowKeys.length},on:{click:t.downLoad}},[t._v(" "+t._s(t.$t("outPut"))+" ")]),t.isEnd?s("a-upload",{attrs:{name:"file",accept:".xls,.xlsx","show-upload-list":!1,headers:{token:this.$cookies.get("token"),processId:this.process.id},action:this.$axios.defaults.baseURL+"/file/import/libImport"},on:{change:t.handleUploadChange}},[s("a-button",[s("a-icon",{attrs:{type:"upload"}}),t._v(" "+t._s(t.$t("input"))+" ")],1)],1):t._e()],1),s("a-row",{attrs:{type:"flex"}},[s("a-row",{attrs:{type:"flex"}},[s("a-tag",{staticClass:"pointer",attrs:{color:"#87d068"},on:{click:function(e){return t.showSubTask("03")}}},[t._v(" "+t._s(t.$t("allAllow"))+" ")]),s("a-tag",{staticClass:"pointer",attrs:{color:"#108ee9"},on:{click:function(e){return t.showSubTask("02")}}},[t._v(" "+t._s(t.$t("submitted"))+" ")]),t._l(t.subs,(function(e){return s("a-tag",{key:e.id,staticClass:"pointer",attrs:{color:"blue"},on:{click:function(s){return t.showSubTask(e.id)}}},[t._v(" "+t._s(e.name)+" ")])})),s("a-tag",{staticClass:"pointer",attrs:{color:"#f50"},on:{click:function(e){return t.showSubTask("00")}}},[t._v(" "+t._s(t.$t("init"))+" ")])],2)],1)],2),s("a-table",{attrs:{columns:t.columns,"data-source":t.data,bordered:"",loading:t.tableLoad,scroll:t.scroll,"row-selection":t.rowSelection,pagination:!1,size:"middle"},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var a=e.setSelectedKeys,i=e.selectedKeys,r=e.confirm,o=e.clearFilters,n=e.column;return s("div",{staticStyle:{padding:"8px"}},[s("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{value:i[0]},on:{change:function(t){return a(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(i,r,n.dataIndex)}}}),s("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(i,r,n.dataIndex)}}},[t._v(" "+t._s(t.$t("search"))+" ")]),s("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v(" "+t._s(t.$t("reset"))+" ")])],1)}},{key:"filterIcon",fn:function(t){return s("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},t._l(this.columnNames,(function(e){return{key:e,fn:function(a,i,r){return[s("div",{key:e},["createdbtime"==e?s("a-date-picker",{attrs:{format:"YYYY-MM-DD",disabled:t.isStop(i)||t.isDisabled(i)},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.createdbtime,callback:function(e){t.$set(i,"createdbtime",e)},expression:"record.createdbtime"}}):"concentration"==e?s("a-input-number",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i),min:0},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.concentration,callback:function(e){t.$set(i,"concentration",e)},expression:"record.concentration"}}):"totalnumber"==e?s("a-input-number",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i),min:0},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.totalnumber,callback:function(e){t.$set(i,"totalnumber",e)},expression:"record.totalnumber"}}):"usenumber"==e?s("a-input-number",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i),min:0},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.usenumber,callback:function(e){t.$set(i,"usenumber",e)},expression:"record.usenumber"}}):"partsize"==e?s("a-input-number",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i),min:0},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.partsize,callback:function(e){t.$set(i,"partsize",e)},expression:"record.partsize"}}):"cyclenumber"==e?s("a-input-number",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i),min:0},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.cyclenumber,callback:function(e){t.$set(i,"cyclenumber",e)},expression:"record.cyclenumber"}}):"uploadsize"==e?s("a-input-number",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i),min:0},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.uploadsize,callback:function(e){t.$set(i,"uploadsize",e)},expression:"record.uploadsize"}}):"libsize"==e?s("a-input-number",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i),min:0},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.libsize,callback:function(e){t.$set(i,"libsize",e)},expression:"record.libsize"}}):"createdbuser"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i)},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.createdbuser,callback:function(e){t.$set(i,"createdbuser",e)},expression:"record.createdbuser"}},t._l(t.allUsers,(function(e){return s("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1):"reviewer"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i)},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.reviewer,callback:function(e){t.$set(i,"reviewer",e)},expression:"record.reviewer"}},t._l(t.allUsers,(function(e){return s("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1):"upload"==e?s("div",[s("a-upload",{attrs:{name:"file",multiple:!0,disabled:t.isStop(i)||t.isDisabled(i),headers:t.uploadHeader(i),action:t.uploadUrl,showUploadList:!1},on:{change:t.handleUploadChange}},[s("a-button",{attrs:{disabled:t.isStop(i)||t.isDisabled(i)}},[s("a-icon",{attrs:{type:"upload"}}),t._v(" "+t._s(t.$t("upload"))+" ")],1)],1)],1):"databasetype"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isStop(i)||t.isDisabled(i)},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.databasetype,callback:function(e){t.$set(i,"databasetype",e)},expression:"record.databasetype"}},t._l(t.databaseTypes(i.initsample),(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"index"!=e?s("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:a,disabled:t.isStop(i)||t.isDisabled(i)},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i[e],callback:function(s){t.$set(i,e,s)},expression:"record[col]"}}):[t._v(" "+t._s(t.showText(e,a,r))+" ")]],2)]}}})),{key:"operation",fn:function(e,a){return[s("div",{staticClass:"editable-row-operations"},[s("span",["03"==a.currentstatu?s("a-icon",{attrs:{type:"check-circle",theme:"twoTone","two-tone-color":"#52c41a"}}):t._e(),"02"==a.currentstatu?s("a-icon",{attrs:{type:"clock-circle",theme:"twoTone","two-tone-color":"#FFCC00"}}):t._e(),"07"==a.currentstatu?s("a-icon",{attrs:{type:"close-circle",theme:"twoTone","two-tone-color":"#eb2f96"}}):t._e(),"09"==a.currentstatu?s("a-icon",{attrs:{type:"stop",theme:"twoTone","two-tone-color":"#CC0000"}}):t._e()],1),"02"==a.currentstatu?s("span",[t._v(" "),s("a",{attrs:{disabled:!t.canPase},on:{click:function(e){return t.passItem(a,!0)}}},[t._v(t._s(t.$t("pass")))]),t._v(" "),s("a",{attrs:{disabled:!t.canPase},on:{click:function(e){return t.passItem(a,!1)}}},[t._v(t._s(t.$t("unPass")))])]):t._e(),t.isStop(a)?s("a",{on:{click:function(){return t.showReason(a.id)}}},[t._v(t._s(t.$t("showReason")))]):t._e(),t.isStop(a)||t.isDisabled(a)?t._e():s("a",{on:{click:function(){return t.showStopAlert(a.id)}}},[t._v(t._s(t.$t("stop")))]),t._v(" "),s("a",{on:{click:function(){return t.showFileList(a.id)}}},[t._v(t._s("附件"))])])]}}],null,!0)}),s("submitting",{ref:"submitting",attrs:{title:t.$t("submitting")}}),s("refuse-alert",{ref:"refuse",attrs:{"modal-title":t.$t("reason")},on:{confirmFun:t.stopProcess}}),s("show-filelist",{ref:"showFilelist",attrs:{"detail-id":t.detailId}}),s("sub-task-info",{ref:"subTask",on:{subTaskInfo:t.startProcess}}),s("refuse-alert",{ref:"unPassAlert",attrs:{"modal-title":t.$t("unPass")},on:{confirmFun:t.unPassItem}})],1)},aa=[],ia={name:"processStep3",components:{SubTaskInfo:Zs,ShowFilelist:Ys,RefuseAlert:ge,Submitting:j},props:{process:Object},data:function(){return this.cacheData=[],{tableLoad:!1,data:[],columns:[],columnNames:[],scroll:{x:1500},editingKey:"",allUsers:[],selectedRowKeys:[],selectedRows:[],subtask:{},subs:[],detailId:"",stopId:"",curFlag:"",subId:"00",subProcessName:"",remarks:""}},beforeMount:function(){this.initPage()},methods:{unPassItem:function(t,e){var s=this,a={processId:this.process.id,subId:this.subId,datas:JSON.stringify(this.selectedRows),type:"unPass",subProcessName:this.subProcessName,remarks:this.remarks,reason:t,remark:e};this.$(this.$refs.unPassAlert.$el).modal("hide"),this.$(this.$refs.submitting.$el).modal("show"),this.$axios.post("/task/process/unPassLibs",a).then((function(t){s.$("#submitting").modal("hide"),s.$(s.$refs.submitting.$el).modal("hide"),"200"!=t.data.code?(console.log(t),s.$message.error(s.$t(t.data.code))):(s.$message.success(s.$t("commitSucc")),s.initPage())})).catch((function(t){s.$(s.$refs.submitting.$el).modal("hide"),console.log(t),s.$message.error(s.$t("systemErr"))}))},passItem:function(t,e){this.selectedRows=new Array,this.selectedRows.push(t),this.selectedRowKeys=new Array,this.selectedRowKeys.push(t.id),e?this.submitData("pass"):this.$(this.$refs.unPassAlert.$el).modal("show")},batchUnPass:function(){this.$(this.$refs.unPassAlert.$el).modal("show")},deleteByIds:function(){var t=this,e={ids:this.selectedRowKeys,type:"03"};this.$(this.$refs.submitting.$el).modal("show"),this.$axios.post("/task/process/deleteByIds",e).then((function(e){t.$(t.$refs.submitting.$el).modal("hide"),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.$message.success(t.$t("commitSucc")),t.initPage())})).catch((function(e){t.$(t.$refs.submitting.$el).modal("hide"),console.log(e),t.$message.error(t.$t("systemErr"))}))},isDisabled:function(t){return!this.isEnd||("02"==t.currentstatu||"03"==t.currentstatu||"07"==t.currentstatu)},handleReset:function(t){t(),this.searchText=""},handleSearch:function(t,e,s){e(),this.searchText=t[0],this.searchedColumn=s},startProcess:function(t,e){this.$(this.$refs.subTask.$el).modal("hide"),this.subProcessName=t,this.remarks=e,this.submitData("divide")},subTaskInfo:function(){this.$(this.$refs.subTask.$el).modal("show")},showSubTask:function(t){this.subId=t,this.initPage()},showAllChange:function(){this.initPage()},backToTotal:function(){this.$router.push({name:"processInit",query:{taskId:this.process.taskid}})},handleUploadChange:function(t){B.commonHandleUploadChange(t)},uploadHeader:function(t){return{token:this.$cookies.get("token"),detailId:t.id}},downLoad:function(){var t={processId:this.process.id,libIds:JSON.stringify(this.selectedRowKeys)};B.downLoad(t,"/task/process/downloadLibs","文库制备.xls")},isStop:function(t){return"09"==t.currentstatu||"07"==t.currentstatu},showFileList:function(t){this.detailId=t,this.$(this.$refs.showFilelist.$el).modal("show")},showReason:function(t){var e=this;this.$axios.post("/task/process/showStopReason",{detailId:t}).then((function(t){"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):e.$error({title:e.$t("reason"),content:t.data.retMap.reason})})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))},showStopAlert:function(t){this.stopId=t,this.$(this.$refs.refuse.$el).modal("show")},stopProcess:function(t,e){this.$(this.$refs.refuse.$el).modal("hide");var s={libId:this.stopId,reason:t,remark:e},a=this;this.$(this.$refs.submitting.$el).modal("show"),this.$axios.post("/task/process/stopLib",s).then((function(t){a.$(a.$refs.submitting.$el).modal("hide"),"200"!=t.data.code?a.$message.error(a.$t(t.data.code)):(a.$message.success(a.$t("commitSucc")),a.initPage())})).catch((function(t){a.$(a.$refs.submitting.$el).modal("hide"),console.log(t),a.$message.error(a.$t("systemErr"))}))},databaseTypes:function(t){return B.databaseTypes(t)},submitData:function(t){var e=this,s={processId:this.process.id,subId:this.subId,datas:JSON.stringify(this.data),type:t,subProcessName:this.subProcessName,remarks:this.remarks};"tmp"!=t&&(s.datas=JSON.stringify(this.selectedRows)),this.$(this.$refs.submitting.$el).modal("show"),this.$axios.post("/task/process/tempSaveLib",s).then((function(t){e.$("#submitting").modal("hide"),e.$(e.$refs.submitting.$el).modal("hide"),"200"!=t.data.code?(console.log(t),e.$message.error(e.$t(t.data.code))):(e.$message.success(e.$t("commitSucc")),e.initPage())})).catch((function(t){e.$(e.$refs.submitting.$el).modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))},initPage:function(){this.initColumns();var t=this,e={processId:this.process.id,subId:this.subId};this.tableLoad=!0,this.$axios.post("/task/process/libInit",e).then((function(e){if(t.tableLoad=!1,"200"!=e.data.code)t.$message.error(t.$t(e.data.code));else{if(t.data=new Array,0!=e.data.retMap.libs.length)for(var s in e.data.retMap.libs){var a=e.data.retMap.libs[s];B.isNull(a.createdbtime)||(a.createdbtime=ht(new Date(a.createdbtime),"yyyy-MM-dd")),a.key=a.id,t.data.push(a)}t.cacheData=t.data.map((function(t){return Object(Fs["a"])({},t)})),t.allUsers=e.data.retMap.allUsers,t.subs=e.data.retMap.subs,t.selectedRows=[],t.selectedRowKeys=[]}})).catch((function(e){t.tableLoad=!1,console.log(e),t.$message.error(t.$t("systemErr"))}))},initColumns:function(){var t=this,e=0,s=new Array;for(var a in s.push({title:this.$t("index"),dataIndex:"index",width:"50px",fixed:"left",scopedSlots:{customRender:"index"}}),e+=50,s.push({title:this.$t("createdbtime"),dataIndex:"createdbtime",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"createdbtime"},onFilter:function(t,e){return!B.isNull(e.createdbtime)&&e.createdbtime.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e+=150,s.push({title:this.$t("sampleIndex"),dataIndex:"selfnumber",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"selfnumber"},onFilter:function(t,e){return!B.isNull(e.selfnumber)&&e.selfnumber.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e+=150,s.push({title:this.$t("middleIndex"),dataIndex:"middleindex",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"middleindex"},onFilter:function(t,e){return!B.isNull(e.middleindex)&&e.middleindex.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e+=150,s.push({title:this.$t("sampleName"),dataIndex:"samplename",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"samplename"},onFilter:function(t,e){return!B.isNull(e.samplename)&&e.samplename.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e+=150,s.push({title:this.$t("species"),dataIndex:"species",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"species"},onFilter:function(t,e){return!B.isNull(e.species)&&e.species.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e+=150,s.push({title:this.concentrationName,dataIndex:"concentration",width:"150px",scopedSlots:{customRender:"concentration"}}),e+=150,s.push({title:this.totalNumberTitle,dataIndex:"totalnumber",width:"150px",scopedSlots:{customRender:"totalnumber"}}),e+=150,s.push({title:this.$t("cellLife"),dataIndex:"celllife",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"celllife"},onFilter:function(t,e){return!B.isNull(e.celllife)&&e.celllife.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e+=150,s.push({title:this.$t("useNumber"),dataIndex:"usenumber",width:"150px",scopedSlots:{customRender:"usenumber"}}),e+=150,s.push({title:this.$t("partsize"),dataIndex:"partsize",width:"150px",scopedSlots:{customRender:"partsize"}}),e+=150,s.push({title:"index",dataIndex:"libindex",width:"100px",scopedSlots:{customRender:"libindex"}}),e+=100,s.push({title:"barcode",dataIndex:"libbarcode",width:"100px",scopedSlots:{customRender:"libbarcode"}}),e+=100,s.push({title:this.$t("cyclenumber"),dataIndex:"cyclenumber",width:"100px",scopedSlots:{customRender:"cyclenumber"}}),e+=100,s.push({title:this.$t("databasetype2"),dataIndex:"databasetype",width:"200px",scopedSlots:{customRender:"databasetype"}}),e+=200,s.push({title:this.$t("databaseindex"),dataIndex:"databaseindex",width:"200px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"databaseindex"},onFilter:function(t,e){return!B.isNull(e.databaseindex)&&e.databaseindex.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e+=200,s.push({title:this.$t("createdbuser"),dataIndex:"createdbuser",width:"150px",scopedSlots:{customRender:"createdbuser"}}),e+=150,s.push({title:this.$t("reviewer"),dataIndex:"reviewer",width:"150px",scopedSlots:{customRender:"reviewer"}}),e+=150,s.push({title:this.$t("qbit"),dataIndex:"qbit",width:"150px",scopedSlots:{customRender:"qbit"}}),e+=150,s.push({title:this.$t("libsize"),dataIndex:"libsize",width:"150px",scopedSlots:{customRender:"libsize"}}),e+=150,s.push({title:this.$t("seqmethods"),dataIndex:"seqmethods",width:"150px",scopedSlots:{customRender:"seqmethods"}}),e+=150,s.push({title:this.$t("uploadsize"),dataIndex:"uploadsize",width:"150px",scopedSlots:{customRender:"uploadsize"}}),e+=150,s.push({title:this.$t("databaseunit"),dataIndex:"databaseunit",width:"150px",scopedSlots:{customRender:"databaseunit"}}),e+=150,s.push({title:this.$t("libremark"),dataIndex:"libremark",width:"150px",scopedSlots:{customRender:"libremark"}}),e+=150,s.push({title:this.$t("uploadremark"),dataIndex:"uploadremark",width:"150px",scopedSlots:{customRender:"uploadremark"}}),e+=150,s.push({title:this.$t("upload"),dataIndex:"upload",width:"200px",scopedSlots:{customRender:"upload"}}),e+=200,s.push({title:this.$t("operation"),dataIndex:"operation",width:"150px",fixed:"right",scopedSlots:{customRender:"operation"}}),e+=150,this.scroll.x=e,this.columns=s,this.columnNames=new Array,s)this.columnNames.push(s[a].dataIndex)},handleChange:function(t,e,s){var a=Object(Os["a"])(this.data),i=a.filter((function(t){return e===t.key}))[0];i&&(i[s]=t,this.data=a)},onDelete:function(t){var e=Object(Os["a"])(this.data);this.data=e.filter((function(e){return e.key!==t}))},edit:function(t){var e=Object(Os["a"])(this.data),s=e.filter((function(e){return t===e.key}))[0];this.editingKey=t,s&&(s.editable=!0,this.data=e)},save:function(t){var e=Object(Os["a"])(this.data),s=Object(Os["a"])(this.cacheData),a=e.filter((function(e){return t===e.key}))[0];a.add=!1;var i=s.filter((function(e){return t===e.key}))[0];a&&i&&(this.data=e,Object.assign(i,a),this.cacheData=s),a.editable=!1,this.editingKey=""},cancel:function(t){var e=Object(Os["a"])(this.data),s=e.filter((function(e){return t===e.key}))[0];if(1==s.add)return this.editingKey="",void this.onDelete(s.key);this.editingKey="",s&&(Object.assign(s,this.cacheData.filter((function(e){return t===e.key}))[0]),s.editable=!1,this.data=e)},checkRowData:function(t,e){var s="第【"+e+"】行，";return B.isNull(t.createdbtime)?(this.$message.error(s+this.$t("createdbtime")+this.$t("not_null")),!1):B.isNull(t.selfnumber)?(this.$message.error(s+this.$t("sampleIndex")+this.$t("not_null")),!1):B.isNull(t.samplename)?(this.$message.error(s+this.$t("sampleName")+this.$t("not_null")),!1):B.isNull(t.species)?(this.$message.error(s+this.$t("species")+this.$t("not_null")),!1):B.isNull(t.concentration)?(this.$message.error(s+this.$t("concentration")+this.$t("not_null")),!1):B.isNull(t.totalnumber)?(this.$message.error(s+this.$t("totalNumber")+this.$t("not_null")),!1):B.isNull(t.celllife)?(this.$message.error(s+this.$t("cellLife")+this.$t("not_null")),!1):B.isNull(t.usenumber)?(this.$message.error(s+this.$t("useNumber")+this.$t("not_null")),!1):B.isNull(t.partsize)?(this.$message.error(s+this.$t("partsize")+this.$t("not_null")),!1):B.isNull(t.libindex)?(this.$message.error(s+"index"+this.$t("not_null")),!1):B.isNull(t.libbarcode)?(this.$message.error(s+"libbarcode"+this.$t("not_null")),!1):B.isNull(t.cyclenumber)?(this.$message.error(s+this.$t("cyclenumber")+this.$t("not_null")),!1):B.isNull(t.databasetype)?(this.$message.error(s+this.$t("databaseType")+this.$t("not_null")),!1):B.isNull(t.databaseindex)?(this.$message.error(s+this.$t("databaseindex")+this.$t("not_null")),!1):B.isNull(t.createdbuser)?(this.$message.error(s+this.$t("createdbuser")+this.$t("not_null")),!1):B.isNull(t.reviewer)?(this.$message.error(s+this.$t("reviewer")+this.$t("not_null")),!1):B.isNull(t.qbit)?(this.$message.error(s+this.$t("qbit")+this.$t("not_null")),!1):B.isNull(t.libsize)?(this.$message.error(s+this.$t("libsize")+this.$t("not_null")),!1):B.isNull(t.seqmethods)?(this.$message.error(s+this.$t("seqmethods")+this.$t("not_null")),!1):!B.isNull(t.uploadsize)||(this.$message.error(s+this.$t("uploadsize")+this.$t("not_null")),!1)},showText:function(t,e,s){if("index"==t)return s+1;if("createdbtime"==t)return B.isNull(e)?"":ht(new Date(e),"yyyy-MM-dd");if("createdbuser"==t||"reviewer"==t)for(var a in this.allUsers){var i=this.allUsers[a];if(i.id==e)return i.name}return e}},computed:{uploadUrl:function(){return B.commonUploadUrl()},concentrationName:function(){return"01"==this.process.sampletype?this.$t("concentration")+"(ng/ul)":this.$t("concentration")+"("+this.$t("cellNumber")+"/μl)"},totalNumberTitle:function(){return"01"==this.process.sampletype?this.$t("nucleicAcid")+this.$t("totalNumber")+"(ug)":this.$t("cell")+this.$t("totalNumber")+"("+this.$t("cellNumber")+")"},canOperating:function(){return"30"==this.process.taskstatu&&!(!this.$store.getters.isCurrentUser(this.process.sampleinput)&&!this.isAdmin)},cansubmit:function(){if(0==this.selectedRowKeys.length)return!0;for(var t in this.selectedRows)if("03"!=this.selectedRows[t].currentstatu)return!0;return!1},canDivide:function(){if(0==this.selectedRowKeys.length)return!0;for(var t in this.selectedRows)if(!B.isNull(this.selectedRows[t].subid)||"02"==this.selectedRows[t].currentstatu||"03"==this.selectedRows[t].currentstatu)return!0;return!1},canComplete:function(){if(0==this.selectedRowKeys.length)return!0;for(var t in this.selectedRows)if("02"==this.selectedRows[t].currentstatu||"03"==this.selectedRows[t].currentstatu||"07"==this.selectedRows[t].currentstatu||"09"==this.selectedRows[t].currentstatu)return!0;return!1},isEnd:function(){return!(this.process.taskstatu.startsWith("7")||!this.$store.getters.isCurrentUser(this.process.librarypreparation))},rowSelection:function(){var t=this,e=this.selectedRowKeys,s=this.selectedRows;return{selectedRowKeys:e,selectedRows:s,onChange:function(e,s){console.log("selectedRowKeys: ".concat(e),"selectedRows: ",s),t.selectedRowKeys=e,t.selectedRows=s},getCheckboxProps:function(t){return{props:{disabled:"09"==t.currentstatu||"07"==t.currentstatu}}}}},canPase:function(){return!(this.process.taskstatu.startsWith("7")||!this.$store.getters.isCurrentUser(this.process.creater))},disabledPass:function(){if(0==this.selectedRowKeys.length)return!0;for(var t in this.selectedRows)if("02"!=this.selectedRows[t].currentstatu)return!0;return!1}},watch:{process:{handler:function(){this.initPage()},deep:!0}}},ra=ia,oa=Object(l["a"])(ra,sa,aa,!1,null,"129b17c9",null),na=oa.exports,la=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:t.$t("dismountData"),"sub-title":t.process.projectname}},[s("template",{slot:"extra"},[t.canPase?s("a-button",{attrs:{type:"danger",disabled:t.disabledPass},on:{click:function(e){return t.batchUnPass()}}},[t._v(" "+t._s(t.$t("unPass"))+" ")]):t._e(),t.canPase?s("a-button",{attrs:{type:"primary",disabled:t.disabledPass},on:{click:function(e){return t.submitData("pass")}}},[t._v(" "+t._s(t.$t("pass"))+" ")]):t._e(),this.isEnd?s("a-popconfirm",{attrs:{placement:"topLeft","ok-text":t.$t("yes"),disabled:0==t.selectedRows.length,"cancel-text":t.$t("no")},on:{confirm:t.deleteByIds}},[s("template",{slot:"title"},[s("p",[t._v(t._s(t.$t("areyousureDelete")))])]),s("a-button",{attrs:{disabled:t.canComplete,type:"danger"}},[t._v(" "+t._s(t.$t("delete"))+" ")])],2):t._e(),this.isEnd?s("a-button",{attrs:{disabled:t.canDivide,type:"primary"},on:{click:t.subTaskInfo}},[t._v(" "+t._s(t.$t("divide"))+" ")]):t._e(),this.isEnd?s("a-button",{attrs:{type:"primary",disabled:t.canComplete},on:{click:function(e){return t.submitData("complete")}}},[t._v(" "+t._s(t.$t("submit"))+" ")]):t._e(),this.isEnd?s("a-button",{attrs:{type:"primary",disabled:t.cansubmit},on:{click:function(e){return t.submitData("real")}}},[t._v(" "+t._s(t.$t("bioinformaticsAnalysis"))+" ")]):t._e(),this.isEnd?s("a-button",{on:{click:function(e){return t.submitData("tmp")}}},[t._v(" "+t._s(t.$t("tmpSave"))+" ")]):t._e(),s("a-button",{attrs:{icon:"download",disabled:0==this.selectedRowKeys.length},on:{click:t.downLoad}},[t._v(" "+t._s(t.$t("outPut"))+" ")]),this.isEnd?s("a-upload",{attrs:{name:"file",accept:".xls,.xlsx","show-upload-list":!1,headers:{token:this.$cookies.get("token"),processId:this.process.id},action:this.$axios.defaults.baseURL+"/file/import/dismountImport"},on:{change:t.handleUploadChange}},[s("a-button",[s("a-icon",{attrs:{type:"upload"}}),t._v(" "+t._s(t.$t("input"))+" ")],1)],1):t._e()],1),s("a-row",{attrs:{type:"flex"}},[s("a-tag",{staticClass:"pointer",attrs:{color:"#87d068"},on:{click:function(e){return t.showSubTask("03")}}},[t._v(" "+t._s(t.$t("allAllow"))+" ")]),s("a-tag",{staticClass:"pointer",attrs:{color:"#108ee9"},on:{click:function(e){return t.showSubTask("02")}}},[t._v(" "+t._s(t.$t("submitted"))+" ")]),t._l(t.subs,(function(e){return s("a-tag",{key:e.id,staticClass:"pointer",attrs:{color:"blue"},on:{click:function(s){return t.showSubTask(e.id)}}},[t._v(" "+t._s(e.name)+" ")])})),s("a-tag",{staticClass:"pointer",attrs:{color:"#f50"},on:{click:function(e){return t.showSubTask("00")}}},[t._v(" "+t._s(t.$t("init"))+" ")])],2)],2),s("a-table",{attrs:{columns:t.columns,"data-source":t.data,bordered:"",loading:t.tableLoad,"row-selection":t.rowSelection,scroll:t.scroll,pagination:!1,size:"middle"},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var a=e.setSelectedKeys,i=e.selectedKeys,r=e.confirm,o=e.clearFilters,n=e.column;return s("div",{staticStyle:{padding:"8px"}},[s("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{value:i[0]},on:{change:function(t){return a(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(i,r,n.dataIndex)}}}),s("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(i,r,n.dataIndex)}}},[t._v(" "+t._s(t.$t("search"))+" ")]),s("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v(" "+t._s(t.$t("reset"))+" ")])],1)}},{key:"filterIcon",fn:function(t){return s("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},t._l(this.columnNames,(function(e){return{key:e,fn:function(a,i,r){return[s("div",{key:e},["sequencingplatform"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isDisabled(e,i)},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.sequencingplatform,callback:function(e){t.$set(i,"sequencingplatform",e)},expression:"record.sequencingplatform"}},t._l(t.seqPlants,(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"index"!=e?s("a-input",{staticStyle:{margin:"-5px 0"},attrs:{disabled:t.isDisabled(e,i),value:a},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i[e],callback:function(s){t.$set(i,e,s)},expression:"record[col]"}}):[t._v(" "+t._s(t.showText(e,a,r))+" ")]],2)]}}})),{key:"operation",fn:function(e,a){return[s("div",{staticClass:"editable-row-operations"},[s("span",["03"==a.currentstatu?s("a-icon",{attrs:{type:"check-circle",theme:"twoTone","two-tone-color":"#52c41a"}}):t._e(),"02"==a.currentstatu?s("a-icon",{attrs:{type:"clock-circle",theme:"twoTone","two-tone-color":"#FFCC00"}}):t._e(),"07"==a.currentstatu?s("a-icon",{attrs:{type:"close-circle",theme:"twoTone","two-tone-color":"#eb2f96"}}):t._e(),"09"==a.currentstatu?s("a-icon",{attrs:{type:"stop",theme:"twoTone","two-tone-color":"#CC0000"}}):t._e()],1),"01"==a.currentstatu||"00"==a.currentstatu?s("span",[s("a",{attrs:{disabled:!t.isEnd},on:{click:function(e){return t.submitItem(a,"complete")}}},[t._v(t._s(t.$t("submit")))]),t._v(" "),t.data.length>1?s("a-popconfirm",{attrs:{title:"Sure to delete?",disabled:!t.isEnd},on:{confirm:function(e){return t.deleteItem(a)}}},[s("a",{attrs:{disabled:!t.isEnd}},[t._v(t._s(t.$t("delete")))])]):t._e()],1):t._e(),"02"==a.currentstatu?s("span",[s("a",{attrs:{disabled:!t.canPase},on:{click:function(e){return t.passItem(a,!0)}}},[t._v(t._s(t.$t("pass")))]),t._v(" "),s("a",{attrs:{disabled:!t.canPase},on:{click:function(e){return t.passItem(a,!1)}}},[t._v(t._s(t.$t("unPass")))])]):t._e(),"07"==a.currentstatu?s("span",[t._v(" "),s("a",{on:{click:function(e){return t.showReason(a.id)}}},[t._v(t._s(t.$t("showReason")))])]):t._e(),"03"==a.currentstatu?s("span",[t._v(" "),s("a",{attrs:{disabled:!t.isEnd},on:{click:function(){return t.submitItem(a,"real")}}},[t._v(t._s(t.$t("bioinformaticsAnalysis")))])]):t._e()])]}}],null,!0)}),s("submitting",{ref:"submitting",attrs:{title:t.$t("submitting")}}),s("sub-task-info",{ref:"subTask",on:{subTaskInfo:t.startProcess}}),s("refuse-alert",{ref:"unPassAlert",attrs:{"modal-title":t.$t("unPass")},on:{confirmFun:t.confirmFun}})],1)},ca=[],da={name:"processStep4",components:{RefuseAlert:ge,SubTaskInfo:Zs,Submitting:j},props:{process:Object},data:function(){return this.cacheData=[],{tableLoad:!1,data:[],columns:[],columnNames:[],scroll:{x:1500},editingKey:"",allUsers:[],selectedRowKeys:[],selectedRows:[],subs:[],subtask:{},showAll:!1,subProcessName:"",remarks:"",subId:"00"}},beforeMount:function(){this.initPage()},methods:{showReason:function(t){var e=this;this.$axios.post("/task/process/showStopReason",{detailId:t}).then((function(t){"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):e.$error({title:e.$t("reason"),content:t.data.retMap.reason})})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))},deleteItem:function(t){this.selectedRows=new Array,this.selectedRows.push(t),this.selectedRowKeys=new Array,this.selectedRowKeys.push(t.id),this.deleteByIds()},passItem:function(t,e){this.selectedRows=new Array,this.selectedRows.push(t),this.selectedRowKeys=new Array,this.selectedRowKeys.push(t.id),e?this.submitData("pass"):this.$(this.$refs.unPassAlert.$el).modal("show")},submitItem:function(t,e){this.selectedRows=new Array,this.selectedRows.push(t),this.selectedRowKeys=new Array,this.selectedRowKeys.push(t.id),this.submitData(e)},confirmFun:function(t,e){this.$(this.$refs.unPassAlert.$el).modal("hide");var s={processId:this.process.id,datas:JSON.stringify(this.selectedRows),type:"unPass",subProcessName:this.subProcessName,remarks:this.remarks,reason:t,remark:e},a=this;this.$(this.$refs.submitting.$el).modal("show"),this.$axios.post("/task/process/refuseDis",s).then((function(t){console.log(t),a.$(a.$refs.submitting.$el).modal("hide"),200!=t.data.code?a.$message.error(a.$t(t.data.code)):(a.$message.success(a.$t("commitSucc")),a.initPage())})).catch((function(t){a.$(a.$refs.submitting.$el).modal("hide"),console.log(t),a.$message.error(a.$t("systemErr"))}))},batchUnPass:function(){this.$(this.$refs.unPassAlert.$el).modal("show")},deleteByIds:function(){var t=this,e={ids:this.selectedRowKeys,type:"04"};this.$(this.$refs.submitting.$el).modal("show"),this.$axios.post("/task/process/deleteByIds",e).then((function(e){t.$(t.$refs.submitting.$el).modal("hide"),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.$message.success(t.$t("commitSucc")),t.initPage())})).catch((function(e){t.$(t.$refs.submitting.$el).modal("hide"),console.log(e),t.$message.error(t.$t("systemErr"))}))},handleReset:function(t){t(),this.searchText=""},handleSearch:function(t,e,s){e(),this.searchText=t[0],this.searchedColumn=s},showSubTask:function(t){this.subId=t,this.initPage()},subTaskInfo:function(){this.$(this.$refs.subTask.$el).modal("show")},startProcess:function(t,e){this.$(this.$refs.subTask.$el).modal("hide"),this.subProcessName=t,this.remarks=e,this.submitData("divide")},showAllChange:function(){this.initPage()},backToTotal:function(){this.$router.push({name:"processInit",query:{taskId:this.process.taskid}})},handleUploadChange:function(t){B.commonHandleUploadChange(t)},isDisabled:function(t,e){return!this.isEnd||("sampleindex"==t||"samplename"==t||("02"==e.currentstatu||"03"==e.currentstatu||"07"==e.currentstatu))},downLoad:function(){var t={processId:this.process.id,disIds:JSON.stringify(this.selectedRowKeys)};B.downLoad(t,"/task/process/downloadDismount","测序分析.xls")},initPage:function(){this.initCols();var t=this,e={processId:this.process.id,subId:this.subId};this.tableLoad=!0,this.$axios.post("/task/process/dismountInit",e).then((function(e){if(t.tableLoad=!1,"200"!=e.data.code)t.$message.error(t.$t(e.data.code));else{if(t.data=new Array,0!=e.data.retMap.datas.length)for(var s in e.data.retMap.datas){var a=e.data.retMap.datas[s];a.key=a.id,t.data.push(a)}t.cacheData=t.data.map((function(t){return Object(Fs["a"])({},t)})),t.allUsers=e.data.retMap.allUsers,t.subs=e.data.retMap.subs,t.selectedRowKeys=[],t.selectedRows=[]}})).catch((function(e){t.tableLoad=!1,console.log(e),t.$message.error(t.$t("systemErr"))}))},initCols:function(){var t=this,e=0,s=new Array;for(var a in s.push({title:this.$t("index"),dataIndex:"index",width:"50px",fixed:"left",scopedSlots:{customRender:"index"}}),e+=50,s.push({title:this.$t("sampleIndex"),dataIndex:"sampleindex",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"sampleindex"},onFilter:function(t,e){return!B.isNull(e.sampleindex)&&e.sampleindex.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e+=150,s.push({title:this.$t("sampleName"),dataIndex:"samplename",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"samplename"},onFilter:function(t,e){return!B.isNull(e.samplename)&&e.samplename.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e+=150,s.push({title:this.$t("dateaccount"),dataIndex:"dateaccount",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"dateaccount"},onFilter:function(t,e){return!B.isNull(e.dateaccount)&&e.dateaccount.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e+=150,s.push({title:this.$t("datepassword"),dataIndex:"datepassword",width:"150px",scopedSlots:{customRender:"datepassword"}}),e+=150,s.push({title:this.$t("datepath"),dataIndex:"datepath",width:"300px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"datepath"},onFilter:function(t,e){return!B.isNull(e.datepath)&&e.datepath.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e+=300,s.push({title:this.$t("SequencingPlatform"),dataIndex:"sequencingplatform",width:"200px",scopedSlots:{customRender:"sequencingplatform"}}),e+=200,s.push({title:this.$t("remarks"),dataIndex:"remarks",width:"200px",scopedSlots:{customRender:"remarks"}}),e+=200,s.push({title:this.$t("operation"),dataIndex:"operation",width:"150px",fixed:"right",scopedSlots:{customRender:"operation"}}),e+=150,this.scroll.x=e,this.columns=s,this.columnNames=new Array,s)this.columnNames.push(s[a].dataIndex)},handleChange:function(t,e,s){var a=Object(Os["a"])(this.data),i=a.filter((function(t){return e===t.key}))[0];i&&(i[s]=t,this.data=a)},onDelete:function(t){var e=Object(Os["a"])(this.data);this.data=e.filter((function(e){return e.key!==t}))},edit:function(t){var e=Object(Os["a"])(this.data),s=e.filter((function(e){return t===e.key}))[0];this.editingKey=t,s&&(s.editable=!0,this.data=e)},save:function(t){var e=Object(Os["a"])(this.data),s=Object(Os["a"])(this.cacheData),a=e.filter((function(e){return t===e.key}))[0];a.add=!1;var i=s.filter((function(e){return t===e.key}))[0];a&&i&&(this.data=e,Object.assign(i,a),this.cacheData=s),a.editable=!1,this.editingKey=""},cancel:function(t){var e=Object(Os["a"])(this.data),s=e.filter((function(e){return t===e.key}))[0];if(1==s.add)return this.editingKey="",void this.onDelete(s.key);this.editingKey="",s&&(Object.assign(s,this.cacheData.filter((function(e){return t===e.key}))[0]),s.editable=!1,this.data=e)},submitData:function(t){var e={processId:this.process.id,datas:JSON.stringify(this.data),type:t,subProcessName:this.subProcessName,remarks:this.remarks};"tmp"!=t&&(e.datas=JSON.stringify(this.selectedRows));var s=this;this.$(this.$refs.submitting.$el).modal("show"),this.$axios.post("/task/process/saveDismountData",e).then((function(t){console.log(t),s.$(s.$refs.submitting.$el).modal("hide"),200!=t.data.code?s.$message.error(s.$t(t.data.code)):(s.$message.success(s.$t("commitSucc")),s.initPage())})).catch((function(t){s.$(s.$refs.submitting.$el).modal("hide"),console.log(t),s.$message.error(s.$t("systemErr"))}))},showText:function(t,e,s){return console.log(t,e,s),"index"==t?s+1:e}},computed:{canOperating:function(){return"40"==this.process.taskstatu&&!(!this.$store.getters.isCurrentUser(this.process.dismountdata)&&!this.isAdmin)},seqPlants:function(){return B.seqPlants()},canDivide:function(){if(0==this.selectedRowKeys.length)return!0;for(var t in this.selectedRows)if(!B.isNull(this.selectedRows[t].subid)||"02"==this.selectedRows[t].currentstatu||"03"==this.selectedRows[t].currentstatu)return!0;return!1},cansubmit:function(){if(0==this.selectedRowKeys.length)return!0;for(var t in this.selectedRows)if("03"!=this.selectedRows[t].currentstatu)return!0;return!1},canComplete:function(){if(0==this.selectedRowKeys.length)return!0;for(var t in this.selectedRows)if("02"==this.selectedRows[t].currentstatu||"03"==this.selectedRows[t].currentstatu||"07"==this.selectedRows[t].currentstatu)return!0;return!1},isEnd:function(){return!(this.process.taskstatu.startsWith("7")||!this.$store.getters.isCurrentUser(this.process.dismountdata))},rowSelection:function(){var t=this,e=this.selectedRowKeys,s=this.selectedRows;return{selectedRowKeys:e,selectedRows:s,onChange:function(e,s){console.log("selectedRowKeys: ".concat(e),"selectedRows: ",s),t.selectedRowKeys=e,t.selectedRows=s},getCheckboxProps:function(t){return{props:{disabled:"09"==t.currentstatu||"07"==t.currentstatu}}}}},canPase:function(){return!(this.process.taskstatu.startsWith("7")||!this.$store.getters.isCurrentUser(this.process.creater))},disabledPass:function(){if(0==this.selectedRowKeys.length)return!0;for(var t in this.selectedRows)if("02"!=this.selectedRows[t].currentstatu)return!0;return!1}},watch:{process:{handler:function(){this.initPage()},deep:!0}}},ua=da,ma=Object(l["a"])(ua,la,ca,!1,null,"61e19d10",null),pa=ma.exports,ha=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:t.$t("bioinformaticsAnalysis"),"sub-title":t.process.projectname}},[s("template",{slot:"extra"},[t.canPase?s("a-button",{attrs:{type:"danger",disabled:t.disabledPass},on:{click:function(e){return t.batchUnPass()}}},[t._v(" "+t._s(t.$t("unPass"))+" ")]):t._e(),t.canPase?s("a-button",{attrs:{type:"primary",disabled:t.disabledPass},on:{click:function(e){return t.submitData("pass")}}},[t._v(" "+t._s(t.$t("pass"))+" ")]):t._e(),t.isEnd?s("a-popconfirm",{attrs:{placement:"topLeft","ok-text":t.$t("yes"),disabled:0==t.selectedRows.length,"cancel-text":t.$t("no")},on:{confirm:t.deleteByIds}},[s("template",{slot:"title"},[s("p",[t._v(t._s(t.$t("areyousureDelete")))])]),s("a-button",{attrs:{disabled:t.canComplete,type:"danger"}},[t._v(" "+t._s(t.$t("delete"))+" ")])],2):t._e(),t.isEnd?s("a-button",{on:{click:function(e){return t.submitData("tmp")}}},[t._v(" "+t._s(t.$t("tmpSave"))+" ")]):t._e(),t.isEnd?s("a-button",{attrs:{type:"primary",disabled:t.canComplete},on:{click:function(e){return t.submitData("complete")}}},[t._v(" "+t._s(t.$t("submit"))+" ")]):t._e(),s("a-button",{attrs:{icon:"download",disabled:0==this.selectedRowKeys},on:{click:t.downLoad}},[t._v(" "+t._s(t.$t("outPut"))+" ")]),t.isEnd?s("a-upload",{attrs:{name:"file",accept:".xls,.xlsx","show-upload-list":!1,headers:{token:this.$cookies.get("token"),processId:this.process.id},action:this.$axios.defaults.baseURL+"/file/import/analysisImport"},on:{change:t.handleUploadChange}},[s("a-button",[s("a-icon",{attrs:{type:"upload"}}),t._v(" "+t._s(t.$t("input"))+" ")],1)],1):t._e()],1),s("a-row",{attrs:{type:"flex"}},[s("a-tag",{staticClass:"pointer",attrs:{color:"#87d068"},on:{click:function(e){return t.showSubTask("03")}}},[t._v(" "+t._s(t.$t("allAllow"))+" ")]),s("a-tag",{staticClass:"pointer",attrs:{color:"#108ee9"},on:{click:function(e){return t.showSubTask("02")}}},[t._v(" "+t._s(t.$t("submitted"))+" ")]),t._l(t.subs,(function(e){return s("a-tag",{key:e.id,staticClass:"pointer",attrs:{color:"blue"},on:{click:function(s){return t.showSubTask(e.id)}}},[t._v(" "+t._s(e.name)+" ")])})),s("a-tag",{staticClass:"pointer",attrs:{color:"#f50"},on:{click:function(e){return t.showSubTask("00")}}},[t._v(" "+t._s(t.$t("init"))+" ")])],2)],2),s("a-table",{attrs:{columns:t.columns,"data-source":t.data,bordered:"",loading:t.tableLoad,pagination:!1,"row-selection":t.rowSelection,scroll:t.scroll,size:"middle"},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var a=e.setSelectedKeys,i=e.selectedKeys,r=e.confirm,o=e.clearFilters,n=e.column;return s("div",{staticStyle:{padding:"8px"}},[s("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{value:i[0]},on:{change:function(t){return a(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(i,r,n.dataIndex)}}}),s("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(i,r,n.dataIndex)}}},[t._v(" "+t._s(t.$t("search"))+" ")]),s("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v(" "+t._s(t.$t("reset"))+" ")])],1)}},{key:"filterIcon",fn:function(t){return s("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},t._l(this.columnNames,(function(e){return{key:e,fn:function(a,i,r){return[s("div",{key:e},["analyst"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isDisabled(e,i)},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i.analyst,callback:function(e){t.$set(i,"analyst",e)},expression:"record.analyst"}},t._l(t.allUsers,(function(e){return s("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1):"index"!=e?s("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:a,disabled:t.isDisabled(e,i)},on:{change:function(s){return t.handleChange(s.target.value,i.key,e)}},model:{value:i[e],callback:function(s){t.$set(i,e,s)},expression:"record[col]"}}):[t._v(" "+t._s(t.showText(e,a,r))+" ")]],2)]}}})),{key:"operation",fn:function(e,a){return[s("div",{staticClass:"editable-row-operations"},[s("span",["03"==a.currentstatu?s("a-icon",{attrs:{type:"check-circle",theme:"twoTone","two-tone-color":"#52c41a"}}):t._e(),"02"==a.currentstatu?s("a-icon",{attrs:{type:"clock-circle",theme:"twoTone","two-tone-color":"#FFCC00"}}):t._e(),"07"==a.currentstatu?s("a-icon",{attrs:{type:"close-circle",theme:"twoTone","two-tone-color":"#eb2f96"}}):t._e(),"09"==a.currentstatu?s("a-icon",{attrs:{type:"stop",theme:"twoTone","two-tone-color":"#CC0000"}}):t._e()],1),"01"==a.currentstatu||"00"==a.currentstatu?s("span",[s("a",{attrs:{disabled:!t.isEnd},on:{click:function(e){return t.submitItem(a,"complete")}}},[t._v(t._s(t.$t("submit")))]),t._v(" "),t.data.length>1?s("a-popconfirm",{attrs:{title:"Sure to delete?",disabled:!t.isEnd},on:{confirm:function(e){return t.deleteItem(a)}}},[s("a",{attrs:{disabled:!t.isEnd}},[t._v(t._s(t.$t("delete")))])]):t._e()],1):t._e(),"02"==a.currentstatu?s("span",[s("a",{attrs:{disabled:!t.canPase},on:{click:function(e){return t.passItem(a,!0)}}},[t._v(t._s(t.$t("pass")))]),t._v(" "),s("a",{attrs:{disabled:!t.canPase},on:{click:function(e){return t.passItem(a,!1)}}},[t._v(t._s(t.$t("unPass")))])]):t._e(),"07"==a.currentstatu?s("span",[t._v(" "),s("a",{on:{click:function(e){return t.showReason(a.id)}}},[t._v(t._s(t.$t("showReason")))])]):t._e()])]}}],null,!0)}),s("submitting",{ref:"submitting",attrs:{title:t.$t("submitting")}}),s("sub-task-info",{ref:"subTask",on:{subTaskInfo:t.startProcess}}),s("refuse-alert",{ref:"unPassAlert",attrs:{"modal-title":t.$t("unPass")},on:{confirmFun:t.confirmFun}})],1)},fa=[],ba={name:"processStep5",components:{RefuseAlert:ge,SubTaskInfo:Zs,Submitting:j},props:{process:Object},data:function(){return this.cacheData=[],{tableLoad:!1,data:[],columns:[],selectedRowKeys:[],selectedRows:[],columnNames:[],scroll:{x:1500},editingKey:"",allUsers:[],subtask:{},subProcessName:"",remarks:"",subId:"00",subs:[]}},beforeMount:function(){this.initPage()},methods:{showReason:function(t){var e=this;this.$axios.post("/task/process/showStopReason",{detailId:t}).then((function(t){"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):e.$error({title:e.$t("reason"),content:t.data.retMap.reason})})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))},passItem:function(t,e){this.selectedRows=new Array,this.selectedRows.push(t),this.selectedRowKeys=new Array,this.selectedRowKeys.push(t.id),e?this.submitData("pass"):this.$(this.$refs.unPassAlert.$el).modal("show")},confirmFun:function(t,e){this.$(this.$refs.unPassAlert.$el).modal("hide");var s=this,a={processId:this.process.id,subId:this.subId,datas:JSON.stringify(this.selectedRows),type:"unPass",subProcessName:this.subProcessName,remarks:this.remarks,reason:t,remark:e};this.$(this.$refs.submitting.$el).modal("show"),this.$axios.post("/task/process/refuseAnalysis",a).then((function(t){s.$(s.$refs.submitting.$el).modal("hide"),200!=t.data.code?s.$message.error(s.$t(t.data.code)):(s.$message.success(s.$t("commitSucc")),s.initPage())})).catch((function(t){s.$(s.$refs.submitting.$el).modal("hide"),console.log(t),s.$message.error(s.$t("systemErr"))}))},submitItem:function(t,e){this.selectedRows=new Array,this.selectedRows.push(t),this.selectedRowKeys=new Array,this.selectedRowKeys.push(t.id),this.submitData(e)},batchUnPass:function(){this.$(this.$refs.unPassAlert.$el).modal("show")},deleteItem:function(t){this.selectedRows=new Array,this.selectedRows.push(t),this.selectedRowKeys=new Array,this.selectedRowKeys.push(t.id),this.deleteByIds()},deleteByIds:function(){var t=this,e={ids:this.selectedRowKeys,type:"05"};this.$(this.$refs.submitting.$el).modal("show"),this.$axios.post("/task/process/deleteByIds",e).then((function(e){t.$(t.$refs.submitting.$el).modal("hide"),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.$message.success(t.$t("commitSucc")),t.initPage())})).catch((function(e){t.$(t.$refs.submitting.$el).modal("hide"),console.log(e),t.$message.error(t.$t("systemErr"))}))},handleReset:function(t){t(),this.searchText=""},handleSearch:function(t,e,s){e(),this.searchText=t[0],this.searchedColumn=s},showSubTask:function(t){this.subId=t,this.initPage()},startProcess:function(t,e){this.$(this.$refs.subTask.$el).modal("hide"),this.subProcessName=t,this.remarks=e,this.submitData("real")},subTaskInfo:function(){this.$(this.$refs.subTask.$el).modal("show")},backToTotal:function(){this.$router.push({name:"processInit",query:{taskId:this.process.taskid}})},handleUploadChange:function(t){B.commonHandleUploadChange(t)},downLoad:function(){var t={processId:this.process.id,ids:JSON.stringify(this.selectedRowKeys)};B.downLoad(t,"/task/process/downloadAnalysis","生信分析.xls")},isDisabled:function(t,e){return!this.isEnd||("sampleindex"==t||"samplename"==t||("02"==e.currentstatu||"03"==e.currentstatu||"07"==e.currentstatu))},initPage:function(){this.initCols();var t=this,e={processId:this.process.id,subId:this.subId};this.$axios.post("/task/process/analyseInit",e).then((function(e){if(t.data=new Array,200!=e.data.code)t.$message.error(t.$t(e.data.code));else{if(0!=e.data.retMap.datas.length)for(var s in t.data=new Array,e.data.retMap.datas){var a=e.data.retMap.datas[s];a.key=a.id,t.data.push(a)}t.cacheData=t.data.map((function(t){return Object(Fs["a"])({},t)})),t.allUsers=e.data.retMap.allUsers,t.subs=e.data.retMap.subs,t.selectedRows=[],t.selectedRowKeys=[]}})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},initCols:function(){var t=this,e=0,s=new Array;for(var a in s.push({title:this.$t("index"),dataIndex:"index",width:"50px",fixed:"left",scopedSlots:{customRender:"index"}}),e+=50,s.push({title:this.$t("sampleIndex"),dataIndex:"sampleindex",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"sampleindex"},onFilter:function(t,e){return!B.isNull(e.sampleindex)&&e.sampleindex.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e+=150,s.push({title:this.$t("sampleName"),dataIndex:"samplename",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"samplename"},onFilter:function(t,e){return!B.isNull(e.samplename)&&e.samplename.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e+=150,s.push({title:this.$t("resultpath"),dataIndex:"resultpath",width:"300px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"resultpath"},onFilter:function(t,e){return!B.isNull(e.resultpath)&&e.resultpath.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e+=300,s.push({title:this.$t("reportpath"),dataIndex:"reportpath",width:"300px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"reportpath"},onFilter:function(t,e){return!B.isNull(e.reportpath)&&e.reportpath.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e+=300,s.push({title:this.$t("args"),dataIndex:"args",width:"300px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"args"},onFilter:function(t,e){return!B.isNull(e.args)&&e.args.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e+=300,s.push({title:this.$t("analyst"),dataIndex:"analyst",width:"150px",scopedSlots:{customRender:"analyst"}}),e+=150,s.push({title:this.$t("remarks"),dataIndex:"remarks",width:"200px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"remarks"},onFilter:function(t,e){return!B.isNull(e.remarks)&&e.remarks.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e+=200,s.push({title:this.$t("operation"),dataIndex:"operation",width:"150px",fixed:"right",scopedSlots:{customRender:"operation"}}),e+=150,this.scroll.x=e,this.columns=s,this.columnNames=new Array,s)this.columnNames.push(s[a].dataIndex)},handleChange:function(t,e,s){var a=Object(Os["a"])(this.data),i=a.filter((function(t){return e===t.key}))[0];i&&(i[s]=t,this.data=a)},onDelete:function(t){var e=Object(Os["a"])(this.data);this.data=e.filter((function(e){return e.key!==t}))},edit:function(t){var e=Object(Os["a"])(this.data),s=e.filter((function(e){return t===e.key}))[0];this.editingKey=t,s&&(s.editable=!0,this.data=e)},save:function(t){var e=Object(Os["a"])(this.data),s=Object(Os["a"])(this.cacheData),a=e.filter((function(e){return t===e.key}))[0];a.add=!1;var i=s.filter((function(e){return t===e.key}))[0];a&&i&&(this.data=e,Object.assign(i,a),this.cacheData=s),a.editable=!1,this.editingKey=""},cancel:function(t){var e=Object(Os["a"])(this.data),s=e.filter((function(e){return t===e.key}))[0];if(1==s.add)return this.editingKey="",void this.onDelete(s.key);this.editingKey="",s&&(Object.assign(s,this.cacheData.filter((function(e){return t===e.key}))[0]),s.editable=!1,this.data=e)},showText:function(t,e,s){return console.log(t,e,s),"index"==t?s+1:e},submitData:function(t){var e=this,s={processId:this.process.id,subId:this.subId,datas:JSON.stringify(this.data),type:t,subProcessName:this.subProcessName,remarks:this.remarks};"tmp"!=t&&(s.datas=JSON.stringify(this.selectedRows)),this.$(this.$refs.submitting.$el).modal("show"),this.$axios.post("/task/process/saveAnalyse",s).then((function(t){e.$(e.$refs.submitting.$el).modal("hide"),200!=t.data.code?e.$message.error(e.$t(t.data.code)):(e.$message.success(e.$t("commitSucc")),e.initPage())})).catch((function(t){e.$(e.$refs.submitting.$el).modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))}},computed:{canOperating:function(){return"50"==this.process.taskstatu&&!(!this.$store.getters.isCurrentUser(this.process.bioinformaticsanalysis)&&!this.isAdmin)},isEnd:function(){return!(this.process.taskstatu.startsWith("7")||!this.$store.getters.isCurrentUser(this.process.dismountdata))},canComplete:function(){if(0==this.selectedRowKeys.length)return!0;for(var t in this.selectedRows)if("02"==this.selectedRows[t].currentstatu||"03"==this.selectedRows[t].currentstatu)return!0;return!1},rowSelection:function(){var t=this,e=this.selectedRowKeys,s=this.selectedRows;return{selectedRowKeys:e,selectedRows:s,onChange:function(e,s){console.log("selectedRowKeys: ".concat(e),"selectedRows: ",s),t.selectedRowKeys=e,t.selectedRows=s},getCheckboxProps:function(t){return{props:{disabled:"09"==t.currentstatu}}}}},canPase:function(){return!(this.process.taskstatu.startsWith("7")||!this.$store.getters.isCurrentUser(this.process.creater))},disabledPass:function(){if(0==this.selectedRowKeys.length)return!0;for(var t in this.selectedRows)if("02"!=this.selectedRows[t].currentstatu)return!0;return!1}},watch:{process:{handler:function(){this.initPage()},deep:!0}}},ga=ba,va=Object(l["a"])(ga,ha,fa,!1,null,"11104b9b",null),$a=va.exports,ya=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-result",{attrs:{title:"Great, we have done all the operations!"},scopedSlots:t._u([{key:"icon",fn:function(){return[s("icon-font",{attrs:{type:"icon-jiyinjiancebaogao"}})]},proxy:!0},{key:"extra",fn:function(){return[s("a-button",{attrs:{type:"primary"}},[t._v(" Next ")])]},proxy:!0}])})],1)},ka=[],wa=Ds["a"].createFromIconfontCN({scriptUrl:B.alicdnIcon}),_a={name:"processStep6",components:{IconFont:wa},props:{process:Object},data:function(){return{}}},xa=_a,Ca=Object(l["a"])(xa,ya,ka,!1,null,"75b5c6fc",null),Sa=Ca.exports,Ia={name:"processDetail",components:{ProcessStep6:Sa,ProcessStep5:$a,ProcessStep4:pa,ProcessStep3:na,ProcessStep2:ea,TopNav:ut},data:function(){return{current:0,canClick:0,process:{},subTask:{},subId:"",stepStyle:{boxShadow:"0px -1px 0 0 #e8e8e8 inset"}}},beforeMount:function(){console.log(this.$route.query.subId),this.subId=this.$route.query.subId,this.initPage()},methods:{initPage:function(){var t=this,e={subId:this.subId};B.isNull(this.subId)||this.$axios.post("/task/process/subinit",e).then((function(e){200!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.process=e.data.retMap.process,t.subTask=e.data.retMap.subTask,"10"==t.subTask.currentstatu||"20"==t.subTask.currentstatu?(t.current=0,t.canClick=0):"30"==t.subTask.currentstatu?(t.current=1,t.canClick=1):"40"==t.subTask.currentstatu?(t.current=2,t.canClick=2):"50"==t.subTask.currentstatu?(t.current=3,t.canClick=3):"60"==t.subTask.currentstatu?(t.current=4,t.canClick=4):(t.current=0,t.canClick=0))})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},setpStatu:function(t){return t<this.canClick?"finish":t>this.canClick?"wait":"process"},isDisabled:function(t){return t>this.canClick}},watch:{getsubId:function(t){console.log(t),this.subId=t,this.initPage()}},computed:{getsubId:function(){return console.log(this.$route.query.subId),this.$route.query.subId}}},Da=Ia,Na=(s("0a16"),Object(l["a"])(Da,Es,Ms,!1,null,"11961902",null)),Pa=Na.exports,Ra=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("top-nav"),s("div",{staticClass:"about-container"},[s("a-comment",[s("a-avatar",{attrs:{slot:"avatar",src:t.userHeadSrc,alt:t.userName},slot:"avatar"}),s("div",{attrs:{slot:"content"},slot:"content"},[s("a-form-item",[s("a-textarea",{attrs:{rows:4},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),s("a-form-item",[s("a-button",{attrs:{"html-type":"submit",loading:t.submitting,disabled:0==this.value.length,type:"primary"},on:{click:function(e){return t.handleSubmit("new")}}},[t._v(" Add Comment ")])],1)],1)],1),t.comments.length?s("a-list",{attrs:{"data-source":t.comments,header:t.comments.length+" "+(t.comments.length>1?"replies":"reply"),"item-layout":"horizontal"},scopedSlots:t._u([{key:"renderItem",fn:function(e){return s("a-list-item",{},[s("a-comment",{staticStyle:{width:"100%"},attrs:{author:e.user.name,datetime:t.longToStr(e.createtime)}},[s("span",{key:"comment-nested-reply-to",attrs:{slot:"actions"},on:{click:function(s){t.replayId=e.id}},slot:"actions"},[t._v("Reply to")]),s("a-avatar",{attrs:{slot:"avatar",src:t.getUserHeadSrc(e.user.id),alt:e.user.name},slot:"avatar"}),s("div",{staticStyle:{width:"100%"},attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(e.comments)+" "),t.replayId==e.id?s("div",{staticStyle:{width:"100%"}},[s("a-form-item",[s("a-textarea",{attrs:{rows:4},model:{value:t.replayText,callback:function(e){t.replayText=e},expression:"replayText"}})],1),s("a-form-item",[s("a-button",{attrs:{"html-type":"submit",loading:t.submitting,type:"primary",disabled:0==t.replayText.length},on:{click:function(e){return t.handleSubmit("old")}}},[t._v(" add reply ")])],1)],1):t._e()]),t._l(e.replys,(function(e){return s("a-comment",{key:e.id,staticStyle:{width:"100%"},attrs:{author:e.user.name,datetime:t.longToStr(e.createtime)}},[s("a-avatar",{attrs:{slot:"avatar",src:t.getUserHeadSrc(e.user.id),alt:e.user.name},slot:"avatar"}),s("p",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(e.comments)+" ")])],1)}))],2)],1)}}],null,!1,1172601566)}):t._e()],1)],1)},Ta=[],ja={name:"about",components:{TopNav:ut},data:function(){return{comments:[],submitting:!1,value:"",moment:Rt.a,replayId:"",replayText:""}},beforeMount:function(){this.initPage()},methods:{initPage:function(){var t=this;this.$axios.get("/about/suggest").then((function(e){console.log(e),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):t.comments=e.data.retMap.comments})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},longToStr:function(t){var e=new Date(t);return ht(e,"yyyy-MM-dd hh:mm:ss")},handleSubmit:function(t){this.submitting=!0;var e="";"new"==t?(this.replayId="",e=this.value):e=this.replayText;var s={comment:e,replayId:this.replayId},a=this;this.$axios.post("/about/suggest/commit",s).then((function(t){console.log(t),a.submitting=!1,"200"!=t.data.code?a.$message.error(a.$t(t.data.code)):(a.$message.success(a.$t("commitSucc")),a.value="",a.initPage())})).catch((function(t){a.submitting=!1,console.log(t),a.$message.error(a.$t("systemErr"))}))},handleChange:function(t){this.value=t.target.value},getUserHeadSrc:function(t){return this.$axios.defaults.baseURL+"user/userHead/"+t+".png"}},computed:{userId:function(){return this.$store.getters.getUser.id},userHeadSrc:function(){return this.$axios.defaults.baseURL+"user/userHead/"+this.userId+".png"},userName:function(){return this.$store.getters.getUser.name}}},Ea=ja,Ma=(s("340b"),Object(l["a"])(Ea,Ra,Ta,!1,null,"86fc05cc",null)),Aa=Ma.exports,La=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("top-nav"),s("div",{staticClass:"resource-container"},[s("a-radio-group",{attrs:{"button-style":"solid"},on:{change:t.onChange},model:{value:t.resource,callback:function(e){t.resource=e},expression:"resource"}},t._l(t.meters,(function(e){return s("a-radio-button",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(t.showName(e))+" ")])})),1),s("a-calendar",{attrs:{disabledDate:t.disabledDate},on:{select:t.showSelectTime},scopedSlots:t._u([{key:"dateCellRender",fn:function(e){return s("ul",{staticClass:"events"},t._l(t.getListData(e),(function(t){return s("li",{key:t.content},[s("a-badge",{attrs:{status:t.type,text:t.content}})],1)})),0)}}])})],1),s("select-time",{attrs:{"current-date":t.selectDate,resource:t.resource},on:{submitData:t.commitTimes}}),s("submitting",{attrs:{title:t.$t("submitting")}})],1)},Oa=[],Fa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{id:"selectTime",tabindex:"-1",role:"dialog","aria-labelledby":"selectTimeLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"selectTimeLabel"}},[t._v(t._s(t.$t("selectOrderTime")))]),t._m(0)]),s("div",{staticClass:"modal-body"},[s("a-checkbox-group",{on:{change:t.onChange},model:{value:t.times,callback:function(e){t.times=e},expression:"times"}},[s("a-card",t._l(t.checkedList,(function(e){return s("a-card-grid",{key:e.key,staticStyle:{width:"25%","text-align":"center"}},[s("a-checkbox",{attrs:{value:e.key,disabled:e.stat}},[t._v(" "+t._s(e.val)+" ")])],1)})),1)],1),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group-sm col-md-12",staticStyle:{"text-align":"left"}},[s("label",{attrs:{for:"remarks"}},[t._v(t._s(t.$t("remarks")))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"form-control",attrs:{id:"remarks",placeholder:"实验",rows:"2"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])])],1),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:0==t.times.length},on:{click:t.submitData}},[t._v(t._s(t.$t("confirm")))])])])])])},Ua=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],za={name:"selectTime",props:{currentDate:Object,resource:String},data:function(){return{checkedList:[{key:9,val:"9:00-10:00",stat:!1},{key:10,val:"10:00-11:00",stat:!1},{key:11,val:"11:00-12:00",stat:!1},{key:12,val:"12:00-13:00",stat:!1},{key:13,val:"13:00-14:00",stat:!1},{key:14,val:"14:00-15:00",stat:!1},{key:15,val:"15:00-16:00",stat:!1},{key:16,val:"16:00-17:00",stat:!1}],times:[],records:[],remarks:""}},beforeMount:function(){this.initPage()},methods:{initPage:function(){if(void 0!=this.currentDate){this.times=[],console.log(this.currentDate.toDate(),this.resource);var t={currentDate:ht(this.currentDate.toDate(),"yyyy-MM-dd"),resource:this.resource},e=this;this.$axios.post("/task/resource/currentDate",t).then((function(t){if(200!=t.data.code)e.$message.error(e.$t(t.data.code));else if(console.log(t),e.records=t.data.retMap.records,t.data.retMap.records.length>0)for(var s=0;s<t.data.retMap.records.length;s++)for(var a=t.data.retMap.records[s],i=new Date(a.starttime),r=0;r<e.checkedList.length;r++){var o=e.checkedList[r];i.getHours()==o.key&&(o.stat=!0)}})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))}},onChange:function(t){console.log("checked = ",t)},submitData:function(){for(var t=new Array,e=0;e<this.times.length;e++){var s=this.currentDate.toDate(),a=this.times[e];s.setHours(a);var i=s;t.push(i)}var r=JSON.stringify(t);this.times=[],this.$("#selectTime").modal("hide"),this.$emit("submitData",this.resource,r,this.remarks)}},watch:{currentDate:{handler:function(){this.initPage()},deep:!0},resource:function(){this.initPage()}}},Ka=za,qa=Object(l["a"])(Ka,Fa,Ua,!1,null,"28e989b8",null),Va=qa.exports,Ya={name:"resource",components:{Submitting:j,SelectTime:Va,TopNav:ut},data:function(){return{resource:"",meters:[],records:[],selectDate:void 0}},beforeMount:function(){this.initPage()},methods:{showName:function(t){return void 0==t.email?t.name:t.name+"协助"},onChange:function(){},showSelectTime:function(t){this.selectDate=t,this.$("#selectTime").modal("show")},getListData:function(t){for(var e=new Array,s=0;s<this.records.length;s++){var a=this.records[s];if(ht(new Date(a.starttime),"yyyy-MM-dd")==ht(t.toDate(),"yyyy-MM-dd")){var i=ht(new Date(a.starttime),"hh:00"),r=ht(new Date(a.endtime),"hh:00");e.push({type:"success",content:i+" - "+r})}}return e||[]},initPage:function(){var t=this;this.$axios.post("/task/resource/init").then((function(e){"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.meters=new Array,t.meters=t.meters.concat(e.data.retMap.feeds),t.meters=t.meters.concat(e.data.retMap.meterials),t.resource=t.meters[0].id)})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},disabledDate:function(t){var e=new Date,s=new Date(e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate());return t<s},commitTimes:function(t,e,s){console.log(t,e);var a={resourceId:t,times:e,remarks:s},i=this;i.$("#submitting").modal("show"),this.$axios.post("/task/resource/commitTask",a).then((function(t){console.log(t),i.$("#submitting").modal("hide"),200!=t.data.code?i.$message.error(i.$t(t.data.code)):(i.$message.success(i.$t("commitSucc")),window.location.reload())})).catch((function(t){i.$("#submitting").modal("hide"),console.log(t),i.$message.error(i.$t("systemErr"))}))}},watch:{resource:function(t){var e=this;this.$axios.post("/task/resource/getRecords",{recordId:t}).then((function(t){"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(console.log(t),e.records=t.data.retMap.records)})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))}}},Ha=Ya,Ba=(s("45e7"),Object(l["a"])(Ha,La,Oa,!1,null,"086ad77e",null)),Ja=Ba.exports,Ga=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("top-nav"),s("div",{staticClass:"main-container"},[s("process-step1-new",{attrs:{process:t.process}})],1)],1)},Wa=[],Za=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"process-step1"},[s("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:t.$t("sampleInput"),"sub-title":t.process.projectname}},[s("template",{slot:"extra"},[t.canPase?s("a-button",{attrs:{type:"danger",disabled:t.disabledPass},on:{click:function(e){return t.batchUnPass()}}},[t._v(" "+t._s(t.$t("unPass"))+" ")]):t._e(),t.canPase?s("a-button",{attrs:{type:"primary",disabled:t.disabledPass},on:{click:function(e){return t.submitData("pass")}}},[t._v(" "+t._s(t.$t("pass"))+" ")]):t._e(),t.canEdit?s("a-button",{attrs:{disabled:t.canDelete,type:"primary","data-toggle":"collapse",href:"#batchUpdate",role:"button","aria-expanded":"false","aria-controls":"batchUpdate"}},[t._v(" "+t._s(t.$t("batchUpdate"))+" ")]):t._e(),t.canEdit?s("a-popconfirm",{attrs:{placement:"topLeft","ok-text":t.$t("yes"),disabled:0==t.selectedRows.length,"cancel-text":t.$t("no")},on:{confirm:t.deleteInputs}},[s("template",{slot:"title"},[s("p",[t._v(t._s(t.$t("areyousureDelete")))])]),t.canEdit?s("a-button",{attrs:{disabled:t.canDelete,type:"danger"}},[t._v(" "+t._s(t.$t("delete"))+" ")]):t._e()],2):t._e(),t.canEdit?s("a-button",{attrs:{disabled:t.canDivide,type:"primary"},on:{click:t.subTaskInfo}},[t._v(" "+t._s(t.$t("divide"))+" ")]):t._e(),t.canEdit?s("a-button",{attrs:{disabled:t.canDelete,type:"primary"},on:{click:function(e){return t.submitData("complete")}}},[t._v(" "+t._s(t.$t("submit"))+" ")]):t._e(),t.canPase?s("a-button",{attrs:{disabled:t.cansubmit,type:"primary"},on:{click:function(e){return t.submitData("real")}}},[t._v(" "+t._s(t.$t("samplePreparation"))+" ")]):t._e(),t.canEdit?s("a-button",{attrs:{color:"orange"},on:{click:function(e){return t.submitData("tmp")}}},[t._v(" "+t._s(t.$t("tmpSave"))+" ")]):t._e(),t.canEdit?s("a-button",{staticClass:"editable-add-btn",on:{click:t.handleAdd}},[t._v(" "+t._s(t.$t("add"))+" ")]):t._e(),s("a-button",{attrs:{icon:"download",disabled:0==this.selectedRowKeys.length},on:{click:t.downLoad}},[t._v(" "+t._s(t.$t("outPut"))+" ")]),t.canEdit?s("a-upload",{attrs:{name:"file",accept:".xls,.xlsx",headers:{token:this.$cookies.get("token"),processId:t.process.id},"show-upload-list":!1,action:this.$axios.defaults.baseURL+"/file/import/sampleInput"},on:{change:t.handUploadChange,reject:t.handUnaccept}},[s("a-tooltip",{attrs:{placement:"topLeft",title:t.$t("overText")}},[s("a-button",[s("a-icon",{attrs:{type:"upload"}}),t._v(" "+t._s(t.$t("input"))+" ")],1)],1)],1):t._e()],1),s("a-row",{attrs:{type:"flex"}},[s("a-tag",{staticClass:"pointer",attrs:{color:"#87d068"},on:{click:function(e){return t.showSubTask("03")}}},[t._v(" "+t._s(t.$t("allAllow"))+" ")]),s("a-tag",{staticClass:"pointer",attrs:{color:"#108ee9"},on:{click:function(e){return t.showSubTask("02")}}},[t._v(" "+t._s(t.$t("submitted"))+" ")]),t._l(t.subs,(function(e){return s("a-tag",{key:e.id,staticClass:"pointer",attrs:{color:"#2db7f5"},on:{click:function(s){return t.showSubTask(e.id)}}},[t._v(" "+t._s(e.name)+" ")])})),s("a-tag",{staticClass:"pointer",attrs:{color:"#f50"},on:{click:function(e){return t.showSubTask("00")}}},[t._v(" "+t._s(t.$t("init"))+" ")])],2)],2),s("div",{staticClass:"collapse",attrs:{id:"batchUpdate"}},[s("div",{staticClass:"card card-body"},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"arrindex"}},[t._v(t._s(t.$t("arrindex")))]),s("a-input",{attrs:{id:"arrindex"},model:{value:t.editObj.arrindex,callback:function(e){t.$set(t.editObj,"arrindex",e)},expression:"editObj.arrindex"}})],1),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"initSample"}},[t._v(t._s(t.$t("initSample")))]),s("a-select",{staticStyle:{width:"100%"},attrs:{id:"initSample"},model:{value:t.editObj.initsample,callback:function(e){t.$set(t.editObj,"initsample",e)},expression:"editObj.initsample"}},t._l(t.sampleInits,(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1)],1),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"sampleName"}},[t._v(t._s(t.$t("sampleName")))]),s("a-input",{attrs:{id:"sampleName"},model:{value:t.editObj.samplename,callback:function(e){t.$set(t.editObj,"samplename",e)},expression:"editObj.samplename"}})],1),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"species"}},[t._v(t._s(t.$t("species")))]),s("a-input",{attrs:{id:"species"},model:{value:t.editObj.species,callback:function(e){t.$set(t.editObj,"species",e)},expression:"editObj.species"}})],1),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"tissue"}},[t._v(t._s(this.$t("tissue")+t.$t("animal_stock_resource")))]),s("a-input",{attrs:{id:"tissue"},model:{value:t.editObj.tissue,callback:function(e){t.$set(t.editObj,"tissue",e)},expression:"editObj.tissue"}})],1),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"sampleMsg"}},[t._v(t._s(t.$t("sampleMsg")))]),s("a-select",{staticStyle:{width:"100%"},attrs:{id:"sampleMsg"},model:{value:t.editObj.samplemsg,callback:function(e){t.$set(t.editObj,"samplemsg",e)},expression:"editObj.samplemsg"}},t._l(t.sampletypes(t.editObj.initsample),(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1)],1),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"sampleStatu"}},[t._v(t._s(t.$t("sampleStatu")))]),s("a-select",{staticStyle:{width:"100%"},attrs:{id:"sampleStatu"},model:{value:t.editObj.samplestatu,callback:function(e){t.$set(t.editObj,"samplestatu",e)},expression:"editObj.samplestatu"}},t._l(t.sampletypes(t.editObj.initsample),(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1)],1),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"tissueNumber"}},[t._v(t._s(t.$t("tissueNumber")+"（g）"))]),s("div",{attrs:{id:"tissueNumber"}},[s("a-input-number",{staticStyle:{width:"100%"},model:{value:t.editObj.tissuenumber,callback:function(e){t.$set(t.editObj,"tissuenumber",e)},expression:"editObj.tissuenumber"}})],1)]),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"bloodVolume"}},[t._v(t._s(t.$t("bloodVolume")+"(ml)"))]),s("div",{attrs:{id:"bloodVolume"}},[s("a-input-number",{staticStyle:{width:"100%"},model:{value:t.editObj.bloodvolume,callback:function(e){t.$set(t.editObj,"bloodvolume",e)},expression:"editObj.bloodvolume"}})],1)]),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"concentration"}},[t._v(t._s(t.concentrationName))]),s("div",{attrs:{id:"concentration"}},[s("a-input-number",{staticStyle:{width:"100%"},model:{value:t.editObj.concentration,callback:function(e){t.$set(t.editObj,"concentration",e)},expression:"editObj.concentration"}})],1)]),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"samplevolume"}},[t._v(t._s(t.$t("sampleVolume")+"(ul)"))]),s("div",{attrs:{id:"samplevolume"}},[s("a-input-number",{staticStyle:{width:"100%"},model:{value:t.editObj.samplevolume,callback:function(e){t.$set(t.editObj,"samplevolume",e)},expression:"editObj.samplevolume"}})],1)]),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"totalnumber"}},[t._v(t._s(t.totalNumberTitle))]),s("div",{attrs:{id:"totalnumber"}},[s("a-input-number",{staticStyle:{width:"100%"},model:{value:t.editObj.totalnumber,callback:function(e){t.$set(t.editObj,"totalnumber",e)},expression:"editObj.totalnumber"}})],1)]),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"celllife"}},[t._v(t._s(t.$t("cellLife")))]),s("a-input",{attrs:{id:"celllife"},model:{value:t.editObj.celllife,callback:function(e){t.$set(t.editObj,"celllife",e)},expression:"editObj.celllife"}})],1),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"cellSort"}},[t._v(t._s(t.$t("cellSort")))]),s("a-select",{staticStyle:{width:"100%"},attrs:{id:"cellSort"},model:{value:t.editObj.cellsort,callback:function(e){t.$set(t.editObj,"cellsort",e)},expression:"editObj.cellsort"}},t._l(t.cellSortMethods,(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1)],1),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"databaseType"}},[t._v(t._s(t.$t("databaseType")))]),s("a-select",{staticStyle:{width:"100%"},attrs:{id:"databaseType"},model:{value:t.editObj.databasetype,callback:function(e){t.$set(t.editObj,"databasetype",e)},expression:"editObj.databasetype"}},t._l(t.databaseTypes(t.editObj.initsample),(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1)],1),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"SequencingPlatform"}},[t._v(t._s(t.$t("SequencingPlatform")))]),s("a-select",{staticStyle:{width:"100%"},attrs:{id:"SequencingPlatform"},model:{value:t.editObj.sequencingplatform,callback:function(e){t.$set(t.editObj,"sequencingplatform",e)},expression:"editObj.sequencingplatform"}},t._l(t.seqPlants,(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1)],1)]),s("div",{staticClass:"modal-footer",staticStyle:{"text-align":"center"}},[s("a-popconfirm",{attrs:{placement:"topLeft","ok-text":t.$t("yes"),disabled:0==t.selectedRows.length,"cancel-text":t.$t("no")},on:{confirm:t.tmpSaveData}},[s("template",{slot:"title"},[s("p",[t._v(t._s("数据将保存到页面上，确认无误后点击'暂存'才可以真正保存数据！"))])]),s("a-button",{attrs:{type:"primary",disabled:0==t.selectedRows.length}},[t._v(" "+t._s(t.$t("confirm"))+" ")])],2)],1)])]),s("a-table",{attrs:{columns:t.columns,"data-source":t.data,bordered:"",loading:t.tableLoad,scroll:t.scroll,"row-selection":t.rowSelection,pagination:!1,size:"middle"},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var a=e.setSelectedKeys,i=e.selectedKeys,r=e.confirm,o=e.clearFilters,n=e.column;return s("div",{staticStyle:{padding:"8px"}},[s("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{value:i[0]},on:{change:function(t){return a(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(i,r,n.dataIndex)}}}),s("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(i,r,n.dataIndex)}}},[t._v(" "+t._s(t.$t("search"))+" ")]),s("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v(" "+t._s(t.$t("reset"))+" ")])],1)}},{key:"filterIcon",fn:function(t){return s("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},t._l(this.columnNames,(function(e){return{key:e,fn:function(a,i,r){return[s("div",{key:e},["samplemsg"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isDisabled(i)},model:{value:i.samplemsg,callback:function(e){t.$set(i,"samplemsg",e)},expression:"record.samplemsg"}},t._l(t.sampletypes(i.initsample),(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"samplestatu"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isDisabled(i)},model:{value:i.samplestatu,callback:function(e){t.$set(i,"samplestatu",e)},expression:"record.samplestatu"}},t._l(t.sampleStatu(i.initsample),(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"cellsort"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.colIsDisabed(i.initsample,"cellsort")||t.isDisabled(i)},model:{value:i.cellsort,callback:function(e){t.$set(i,"cellsort",e)},expression:"record.cellsort"}},t._l(t.cellSortMethods,(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"databasetype"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isDisabled(i)},model:{value:i.databasetype,callback:function(e){t.$set(i,"databasetype",e)},expression:"record.databasetype"}},t._l(t.databaseTypes(i.initsample),(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"initsample"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isDisabled(i)},model:{value:i.initsample,callback:function(e){t.$set(i,"initsample",e)},expression:"record.initsample"}},t._l(t.sampleInits,(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"species"==e?s("div",[s("a-select",{staticStyle:{width:"100%"},attrs:{mode:"default",showSearch:!0,maxTagCount:1,disabled:t.isDisabled(i)},model:{value:i.species,callback:function(e){t.$set(i,"species",e)},expression:"record.species"}},[s("a-select-option",{attrs:{value:"Homo sapiens"}},[t._v("Homo sapiens")]),s("a-select-option",{attrs:{value:"Mus musculus"}},[t._v("Mus musculus")]),s("a-select-option",{attrs:{value:"Drosophila melanogaster"}},[t._v("Drosophila melanogaster")]),s("a-select-option",{attrs:{value:"Drosophila simulans"}},[t._v("Drosophila simulans")]),s("a-select-option",{attrs:{value:"Drosophila yakuba"}},[t._v("Drosophila yakuba")]),s("a-select-option",{attrs:{value:"other"}},[t._v("other")])],1),"other"==i.species?s("a-input",{attrs:{disabled:t.isDisabled(i)},model:{value:i.otherSpecies,callback:function(e){t.$set(i,"otherSpecies",e)},expression:"record.otherSpecies"}}):t._e()],1):"sequencingplatform"==e?s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isDisabled(i)},model:{value:i.sequencingplatform,callback:function(e){t.$set(i,"sequencingplatform",e)},expression:"record.sequencingplatform"}},t._l(t.seqPlants,(function(e){return s("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"samplevolume"==e?s("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0,disabled:t.colIsDisabed(i.initsample,"samplevolume")||t.isDisabled(i)},model:{value:i.samplevolume,callback:function(e){t.$set(i,"samplevolume",e)},expression:"record.samplevolume"}}):"tissuenumber"==e?s("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0,disabled:t.colIsDisabed(i.initsample,"tissuenumber")||t.isDisabled(i)},model:{value:i.tissuenumber,callback:function(e){t.$set(i,"tissuenumber",e)},expression:"record.tissuenumber"}}):"bloodvolume"==e?s("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0,disabled:t.colIsDisabed(i.initsample,"bloodvolume")||t.isDisabled(i)},model:{value:i.bloodvolume,callback:function(e){t.$set(i,"bloodvolume",e)},expression:"record.bloodvolume"}}):"concentration"==e?s("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0,disabled:t.colIsDisabed(i.initsample,"concentration")||t.isDisabled(i)},model:{value:i.concentration,callback:function(e){t.$set(i,"concentration",e)},expression:"record.concentration"}}):"totalnumber"==e?s("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0,disabled:t.colIsDisabed(i.initsample,"totalnumber")||t.isDisabled(i)},model:{value:i.totalnumber,callback:function(e){t.$set(i,"totalnumber",e)},expression:"record.totalnumber"}}):"index"!=e?s("a-input",{staticStyle:{margin:"-5px 0"},attrs:{disabled:t.colIsDisabed(i.initsample,e)||t.isDisabled(i)},model:{value:i[e],callback:function(s){t.$set(i,e,s)},expression:"record[col]"}}):[t._v(" "+t._s(t.showText(e,a,r,i))+" ")]],2)]}}})),{key:"operation",fn:function(e,a){return[s("div",{staticClass:"editable-row-operations"},[s("span",["03"==a.currentstatu?s("a-icon",{attrs:{type:"check-circle",theme:"twoTone","two-tone-color":"#52c41a"}}):t._e(),"02"==a.currentstatu?s("a-icon",{attrs:{type:"clock-circle",theme:"twoTone","two-tone-color":"#FFCC00"}}):t._e(),"08"==a.currentstatu?s("a-icon",{attrs:{type:"close-circle",theme:"twoTone","two-tone-color":"#eb2f96"}}):t._e(),"09"==a.currentstatu?s("a-icon",{attrs:{type:"stop",theme:"twoTone","two-tone-color":"#CC0000"}}):t._e()],1),"01"==a.currentstatu||"00"==a.currentstatu?s("span",[t._v(" "),s("a",{attrs:{disabled:!t.canEdit},on:{click:function(e){return t.submitItem(a,"complete")}}},[t._v(t._s(t.$t("submit")))]),t._v(" "),t.data.length>1?s("a-popconfirm",{attrs:{title:"Sure to delete?",disabled:!t.canOperating},on:{confirm:function(){return t.onDelete(a.key)}}},[s("a",{attrs:{disabled:!t.canOperating}},[t._v(t._s(t.$t("delete")))])]):t._e()],1):t._e(),"02"==a.currentstatu?s("span",[t._v(" "),s("a",{attrs:{disabled:!t.canPase},on:{click:function(e){return t.passItem(a,!0)}}},[t._v(t._s(t.$t("pass")))]),t._v(" "),s("a",{attrs:{disabled:!t.canPase},on:{click:function(e){return t.passItem(a,!1)}}},[t._v(t._s(t.$t("unPass")))])]):t._e(),"08"==a.currentstatu?s("span",[t._v(" "),s("a",{on:{click:function(){return t.showReason(a.id)}}},[t._v(t._s(t.$t("showReason")))])]):t._e(),"03"==a.currentstatu?s("span",[t._v(" "),s("a",{attrs:{disabled:!t.canOperating},on:{click:function(){return t.submitItem(a,"real")}}},[t._v(t._s(t.$t("samplePreparation")))])]):t._e()])]}}],null,!0)},[s("template",{slot:"initSampleTitle"},[s("a-tooltip",[s("template",{slot:"title"},[t._v(" "+t._s(t.$t("process.sampleInitTip"))+" ")]),t._v(" "+t._s(this.$t("initSample"))+" "),s("a-icon",{attrs:{type:"question-circle",theme:"twoTone"}})],2)],1),s("template",{slot:"sampleIndexTitle"},[s("a-tooltip",[s("template",{slot:"title"},[t._v(" "+t._s(t.$t("process.sampleIndexTip"))+" ")]),t._v(" "+t._s(this.$t("sampleIndex"))+" "),s("a-icon",{attrs:{type:"question-circle",theme:"twoTone"}})],2)],1),s("template",{slot:"speciesTitle"},[s("a-tooltip",[s("template",{slot:"title"},[t._v(" "+t._s(t.$t("process.speciesTip"))+" ")]),t._v(" "+t._s(this.$t("species"))+" "),s("a-icon",{attrs:{type:"question-circle",theme:"twoTone"}})],2)],1)],2),s("sub-task-info",{ref:"subTask",on:{subTaskInfo:t.startProcess}}),s("submitting",{ref:"submitting",attrs:{title:t.$t("submitting")}}),s("refuse-alert",{ref:"refuseAlert",attrs:{modalTitle:t.$t("unPass")},on:{confirmFun:t.confirmFun}})],1)},Xa=[],Qa=(s("4160"),s("c975"),s("b64b"),s("159b"),{name:"processStep1New",components:{RefuseAlert:ge,SubTaskInfo:Zs,Submitting:j},props:{process:Object},data:function(){return this.cacheData=[],{tableLoad:!1,data:[],columns:[],searchInput:null,searchedColumn:"",columnNames:[],selectedRowKeys:[],selectedRows:[],scroll:{x:1500},editingKey:"",subs:[],curFlag:"01",subId:"00",editObj:{arrindex:"",initsample:"",samplename:"",species:"",tissue:"",samplemsg:"",samplestatu:"",tissuenumber:0,bloodvolume:0,concentration:0,samplevolume:0,totalnumber:0,celllife:"",cellsort:"",databasetype:""}}},beforeMount:function(){this.initPage()},methods:{batchUnPass:function(){this.$(this.$refs.refuseAlert.$el).modal("show")},showReason:function(t){var e=this;this.$axios.post("/task/process/showStopReason",{detailId:t}).then((function(t){"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):e.$error({title:e.$t("reason"),content:t.data.retMap.reason})})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))},confirmFun:function(t,e){console.log(t,e),this.$(this.$refs.refuseAlert.$el).modal("hide");var s={processId:this.process.id,datas:JSON.stringify(this.selectedRows),type:"unPass",reason:t,remark:e},a=this;a.$(a.$refs.submitting.$el).modal("show"),this.$axios.post("/task/process/refuseInput",s).then((function(t){a.$(a.$refs.submitting.$el).modal("hide"),"200"!=t.data.code?a.$message.error(a.$t(t.data.code)):(a.$message.success(a.$t("commitSucc")),a.initPage())})).catch((function(t){console.log(t),a.$(a.$refs.submitting.$el).modal("hide"),a.$message.error(a.$t("systemErr"))}))},passItem:function(t,e){this.selectedRows=new Array,this.selectedRows.push(t),this.selectedRowKeys=new Array,this.selectedRowKeys.push(t.id),e?this.submitData("pass"):this.$(this.$refs.refuseAlert.$el).modal("show")},submitItem:function(t,e){this.selectedRows=new Array,this.selectedRows.push(t),this.selectedRowKeys=new Array,this.selectedRowKeys.push(t.id),this.submitData(e)},tmpSaveData:function(){var t=this;Object.keys(this.editObj).forEach((function(e){for(var s=0;s<t.data.length;s++){var a=t.data[s];"01"!=a.currentstatu||-1==t.selectedRowKeys.indexOf(a.key)||B.isNull(t.editObj[e])||(a[e]=t.editObj[e])}}))},deleteInputs:function(){var t=this;t.$(t.$refs.submitting.$el).modal("show");var e={inputIds:this.selectedRowKeys};this.$axios.post("/task/process/deleteInput",e).then((function(e){t.$(t.$refs.submitting.$el).modal("hide"),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.$message.success(t.$t("commitSucc")),t.initPage())})).catch((function(e){console.log(e),t.$(t.$refs.submitting.$el).modal("hide"),t.$message.error(t.$t("systemErr"))}))},isDisabled:function(t){return!this.canEdit||("02"==t.currentstatu||"03"==t.currentstatu||"08"==t.currentstatu)},downLoad:function(){var t={processId:this.process.id,inputIds:JSON.stringify(this.selectedRowKeys)},e=this;this.$axios({url:"/task/process/downloadSampleInput",method:"post",data:t,responseType:"blob"}).then((function(t){var e=t.data;if(e){var s=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.style.display="none",a.href=s,a.setAttribute("download","样品录入.xls"),document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(a.href),document.body.removeChild(a)}})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))},handleSearch:function(t,e,s){e(),this.searchText=t[0],this.searchedColumn=s},handleReset:function(t){t(),this.searchText=""},colIsDisabed:function(t,e){return"sampleindex"==e||(("tissuenumber"==e||"bloodvolume"==e)&&"02"!=t||(("concentration"==e||"samplevolume"==e||"totalnumber"==e)&&"02"==t||("cellsort"==e||"celllife"==e)&&"03"!=t))},subTaskInfo:function(){this.$(this.$refs.subTask.$el).modal("show")},showSubTask:function(t){this.subId=t,this.initPage()},startProcess:function(t,e){this.$(this.$refs.subTask.$el).modal("hide");var s={datas:JSON.stringify(this.selectedRows),processId:this.process.id,type:"complete",subProcessName:t,remarks:e},a=this;this.$(this.$refs.submitting.$el).modal("show"),this.$axios.post("/task/process/startSubTask",s).then((function(t){a.$(a.$refs.submitting.$el).modal("hide"),"200"!=t.data.code?a.$message.error(a.$t(t.data.code)):(a.$message.success(a.$t("commitSucc")),a.initPage())})).catch((function(t){console.log(t),a.$(a.$refs.submitting.$el).modal("hide"),a.$message.error(a.$t("systemErr"))}))},submitData:function(t){var e=this;this.data.forEach((function(t){"other"==t.species&&(t.species=t.otherSpecies)}));var s={processId:this.process.id,datas:JSON.stringify(this.data),type:t};"tmp"!=t&&(e.selectedRows.forEach((function(t){"other"==t.species&&(t.species=t.otherSpecies)})),s.datas=JSON.stringify(e.selectedRows)),this.$(this.$refs.submitting.$el).modal("show"),this.$axios.post("/task/process/commitDatas",s).then((function(t){if(e.$(e.$refs.submitting.$el).modal("hide"),"200"!=t.data.code){if("E560"==t.data.code){for(var s=e.$t("sampleIndex")+e.$t("repeat")+"：",a=0;a<t.data.retMap.sameList.length;a++){var i=t.data.retMap.sameList[a];s+=i.sampleindex+","}return void e.$message.error(s)}e.$message.error(e.$t(t.data.code))}else e.$message.success(e.$t("commitSucc")),e.selectedRowKeys=[],e.selectedRows=[],e.initPage()})).catch((function(t){console.log(t),e.$(e.$refs.submitting.$el).modal("hide"),e.$message.error(e.$t("systemErr"))}))},handBeforeUpload:function(t){return 0!=t.name.indexOf("样本录入-")||"01"==this.process.sampletype&&-1==t.name.indexOf("-核酸-")||"02"==this.process.sampletype&&-1==t.name.indexOf("-组织-")?(this.$message.error(this.$t("fileNameErr")),!1):"02"!=this.process.sampletype||-1!=!t.name.indexOf("-组织-")||(this.$message.error(this.$t("fileNameErr")),!1)},handUnaccept:function(){this.$message.error(this.$t("unAcceptFile"))},handUploadChange:function(t){"done"==t.file.status&&this.initPage()},onDelete:function(t){var e=Object(Os["a"])(this.data);this.data=e.filter((function(e){return e.key!==t}))},edit:function(t){var e=Object(Os["a"])(this.data),s=e.filter((function(e){return t===e.key}))[0];this.editingKey=t,s&&(s.editable=!0,this.data=e)},save:function(t){console.log(t);var e=Object(Os["a"])(this.data),s=Object(Os["a"])(this.cacheData),a=e.filter((function(e){return t===e.key}))[0];if(this.checkRowData(a)){a.add=!1;var i=s.filter((function(e){return t===e.key}))[0];a&&i&&(this.data=e,Object.assign(i,a),this.cacheData=s),a.editable=!1,this.editingKey=""}},cancel:function(t){var e=Object(Os["a"])(this.data),s=e.filter((function(e){return t===e.key}))[0];if(1==s.add)return this.editingKey="",void this.onDelete(s.key);this.editingKey="",s&&(Object.assign(s,this.cacheData.filter((function(e){return t===e.key}))[0]),s.editable=!1,this.data=e)},checkRowData:function(t){return this.isNull(t.samplename)?(this.$message.error(this.$t("sampleName")+this.$t("not_null")),!1):this.isNull(t.species)?(this.$message.error(this.$t("species")+this.$t("not_null")),!1):this.isNull(t.tissue)?(this.$message.error(this.$t("tissue")+this.$t("not_null")),!1):this.isNull(t.samplemsg)?(this.$message.error(this.$t("sampleMsg")+this.$t("not_null")),!1):this.isNull(t.samplestatu)?(this.$message.error(this.$t("sampleStatu")+this.$t("not_null")),!1):"03"==this.process.sampletype&&this.isNull(t.celllife)?(this.$message.error(this.$t("celllife")+this.$t("not_null")),!1):"03"==this.process.sampletype&&this.isNull(t.cellsort)?(this.$message.error(this.$t("cellsort")+this.$t("not_null")),!1):this.isNull(t.databasetype)?(this.$message.error(this.$t("databaseType")+this.$t("not_null")),!1):!this.isNull(t.sequencingplatform)||(this.$message.error(this.$t("SequencingPlatform")+this.$t("not_null")),!1)},isNull:function(t){return""==t||null==t||void 0==t},initPage:function(){if(this.initColumns(this.process.sampletype),!B.isNull(this.process)&&!B.isNull(this.process.id)){var t={processId:this.process.id,curFlag:this.curFlag,subId:this.subId},e=this;this.tableLoad=!0,e.data=new Array,this.$axios.post("/task/process/sampleInput",t).then((function(t){if(e.tableLoad=!1,"200"!=t.data.code)e.$message.error(e.$t(t.data.code));else{if(void 0==t.data.retMap.sampleInputs||null==t.data.retMap.sampleInputs||0==t.data.retMap.sampleInputs.length);else{e.editingKey="";for(var s=0;s<t.data.retMap.sampleInputs.length;s++){var a=t.data.retMap.sampleInputs[s];a.key=a.id,e.data.push(a)}e.cacheData=e.data.map((function(t){return Object(Fs["a"])({},t)})),console.log(e.data)}e.subs=t.data.retMap.subs,e.selectedRows=[],e.selectedRowKeys=[],e.$notification.warning({key:"step1",placement:"bottomRight",message:e.$t("remind"),description:e.$t("processStep1Tip"),duration:60,getContainer:function(){return e.$(".process-step1")[0]}})}})).catch((function(t){console.log(t),e.tableLoad=!1,e.$message.error(e.$t("systemErr"))}))}},handleAdd:function(){this.editingKey=(new Date).getTime();var t=this.createNewRowData();t.key=this.editingKey,t.editable=!0,t.add=!0,this.data=[].concat(Object(Os["a"])(this.data),[t]),this.cacheData=this.data.map((function(t){return Object(Fs["a"])({},t)}))},createNewRowData:function(){return{index:1,samplename:"",species:"",tissue:"",samplemsg:"",samplestatu:"",tissuenumber:0,bloodvolume:0,concentration:0,samplevolume:0,totalnumber:0,celllife:"",cellsort:"",databasetype:"",sequencingplatform:"",remarks:"",files:[]}},initColumns:function(t){var e=this;console.log(t);var s=0,a=new Array;for(var i in a.push({title:this.$t("index"),dataIndex:"index",width:"50px",fixed:"left",scopedSlots:{customRender:"index"}}),s+=50,a.push({dataIndex:"initsample",width:"150px",slots:{title:"initSampleTitle"},scopedSlots:{customRender:"initsample"}}),s+=150,a.push({title:this.$t("sampleName"),dataIndex:"samplename",width:"150px",scopedSlots:{customRender:"samplename",filterDropdown:"filterDropdown",filterIcon:"filterIcon"},onFilter:function(t,e){return e.samplename.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){e.searchInput.focus()}),0)}}),s+=150,a.push({dataIndex:"sampleindex",width:"150px",slots:{title:"sampleIndexTitle"},scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"sampleindex"},onFilter:function(t,e){return e.sampleindex.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){e.searchInput.focus()}),0)}}),s+=150,a.push({dataIndex:"species",width:"200px",slots:{title:"speciesTitle"},scopedSlots:{customRender:"species"}}),s+=200,a.push({title:this.$t("tissue")+this.$t("animal_stock_resource"),dataIndex:"tissue",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"tissue"},onFilter:function(t,e){return e.tissue.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){e.searchInput.focus()}),0)}}),s+=150,a.push({title:"*"+this.$t("sampleMsg"),dataIndex:"samplemsg",width:"150px",scopedSlots:{customRender:"samplemsg"}}),s+=150,a.push({title:"*"+this.$t("sampleStatu"),dataIndex:"samplestatu",width:"150px",scopedSlots:{customRender:"samplestatu"}}),s+=150,a.push({title:this.$t("tissueNumber")+"（g）",dataIndex:"tissuenumber",width:"130px",scopedSlots:{customRender:"tissuenumber"}}),s+=130,a.push({title:this.$t("bloodVolume")+"(ml)",dataIndex:"bloodvolume",width:"130px",scopedSlots:{customRender:"bloodvolume"}}),s+=130,a.push({title:this.concentrationName,dataIndex:"concentration",width:"130px",scopedSlots:{customRender:"concentration"}}),s+=130,a.push({title:this.$t("sampleVolume")+"(ul)",dataIndex:"samplevolume",width:"130px",scopedSlots:{customRender:"samplevolume"}}),s+=130,a.push({title:this.totalNumberTitle,dataIndex:"totalnumber",width:"130px",scopedSlots:{customRender:"totalnumber"}}),s+=130,a.push({title:this.$t("cellLife"),dataIndex:"celllife",width:"100px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"search",customRender:"celllife"},onFilter:function(t,e){return!B.isNull(e.celllife)&&e.celllife.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){e.searchInput.focus()}),0)}}),s+=100,a.push({title:this.$t("cellSort"),dataIndex:"cellsort",width:"200px",scopedSlots:{customRender:"cellsort"}}),s+=200,a.push({title:"*"+this.$t("databaseType"),dataIndex:"databasetype",width:"200px",scopedSlots:{customRender:"databasetype"}}),s+=200,a.push({title:"*"+this.$t("SequencingPlatform"),dataIndex:"sequencingplatform",width:"200px",scopedSlots:{customRender:"sequencingplatform"}}),s+=200,a.push({title:this.$t("remarks"),dataIndex:"remarks",width:"200px",scopedSlots:{customRender:"remarks"}}),s+=200,a.push({title:this.$t("operation"),dataIndex:"operation",width:"150px",fixed:"right",scopedSlots:{customRender:"operation"}}),s+=150,this.scroll.x=s,this.columns=a,this.columnNames=new Array,a)this.columnNames.push(a[i].dataIndex)},showText:function(t,e,s,a){if("samplemsg"==t)for(var i in this.sampletypes(a.initsample)){var r=this.sampletypes[i];if(r.key==e)return r.val}if("samplestatu"==t)for(var o in this.sampleStatu(a.initsample)){var n=this.sampleStatu[o];if(n.key==e)return n.val}if("cellsort"==t)for(var l in this.cellSortMethods){var c=this.cellSortMethods[l];if(c.key==e)return c.val}if("databasetype"==t)for(var d in this.databaseTypes(a.initsample)){var u=this.databaseTypes[d];if(u.key==e)return u.val}if("sequencingplatform"==t)for(var m in this.seqPlants){var p=this.seqPlants[m];if(p.key==e)return p.val}if("initSample"==t)for(var h in this.sampleInits){var f=this.sampleInits[h];if(f.key==f)return f.val}return"index"==t?s+1:e},sampletypes:function(t){return B.sampletypes(t)},sampleStatu:function(t){return B.sampleStatu(t)},databaseTypes:function(t){return B.databaseTypes(t)}},computed:{concentrationName:function(){return"01"==this.process.sampletype?this.$t("concentration")+"(ng/ul)":this.$t("concentration")+"("+this.$t("cellNumber")+"/μl)"},totalNumberTitle:function(){return"01"==this.process.sampletype?this.$t("nucleicAcid")+this.$t("totalNumber")+"(ug)":this.$t("cell")+this.$t("totalNumber")+"("+this.$t("cellNumber")+")"},seqPlants:function(){return B.seqPlants()},sampleInits:function(){return B.sampleInits()},cellSortMethods:function(){return B.cellSortMethods()},canOperating:function(){return!this.process.taskstatu.startsWith("7")&&!(!this.$store.getters.isCurrentUser(this.process.sampleinput)&&!this.isAdmin)},rowSelection:function(){var t=this,e=this.selectedRowKeys,s=this.selectedRows;return{selectedRowKeys:e,selectedRows:s,onChange:function(e,s){console.log("selectedRowKeys: ".concat(e),"selectedRows: ",s),t.selectedRowKeys=e,t.selectedRows=s},getCheckboxProps:function(t){return{props:{disabled:"00"==t.currentstatu||"09"==t.currentstatu||"08"==t.currentstatu}}}}},cansubmit:function(){if(0==this.selectedRowKeys.length)return!0;for(var t in this.selectedRows)if("03"!=this.selectedRows[t].currentstatu)return!0;return!1},canDivide:function(){if(0==this.selectedRowKeys.length)return!0;for(var t in this.selectedRows)if(!B.isNull(this.selectedRows[t].subid)||"02"==this.selectedRows[t].currentstatu||"03"==this.selectedRows[t].currentstatu)return!0;return!1},canDelete:function(){if(0==this.selectedRowKeys.length)return!0;for(var t in this.selectedRows)if("02"==this.selectedRows[t].currentstatu||"03"==this.selectedRows[t].currentstatu||"08"==this.selectedRows[t].currentstatu)return!0;return!1},canEdit:function(){return!(this.process.taskstatu.startsWith("7")||!this.$store.getters.isCurrentUser(this.process.sampleinput))},canPase:function(){return!(this.process.taskstatu.startsWith("7")||!this.$store.getters.isCurrentUser(this.process.samplepreparation))},disabledPass:function(){if(0==this.selectedRowKeys.length)return!0;for(var t in this.selectedRows)if("02"!=this.selectedRows[t].currentstatu)return!0;return!1}},watch:{process:{handler:function(){this.initPage()},deep:!0}}}),ti=Qa,ei=(s("3600"),Object(l["a"])(ti,Za,Xa,!1,null,"7196e4cc",null)),si=ei.exports,ai={name:"processInit",components:{ProcessStep1New:si,TopNav:ut},data:function(){return{taskId:"",process:{}}},beforeMount:function(){this.taskId=this.$route.query.taskId,console.log(this.taskId),this.initPage()},methods:{initPage:function(){var t=this,e={taskId:this.taskId};""!=this.taskId&&void 0!=this.taskId&&null!=this.taskId&&this.$axios.post("/task/process/init",e).then((function(e){200!=e.data.code?t.$message.error(t.$t(e.data.code)):t.process=e.data.retMap.process})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))}},watch:{getTaskId:function(t){console.log(t),this.taskId=t,this.initPage()}},computed:{getTaskId:function(){return this.$route.query.taskId}}},ii=ai,ri=Object(l["a"])(ii,Ga,Wa,!1,null,"7412e2c6",null),oi=ri.exports,ni=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("top-nav"),s("div",{staticClass:"main-container"},[s("a-result",{attrs:{title:t.showTitle,"sub-title":t.subTitle},scopedSlots:t._u([{key:"icon",fn:function(){return["00"==t.partner.taskstatu?s("icon-font",{attrs:{type:"icon-xiezhu"}}):t._e(),"01"==t.partner.taskstatu?s("icon-font",{attrs:{type:"icon-chenggong"}}):t._e(),"02"==t.partner.taskstatu?s("icon-font",{attrs:{type:"icon-jujue"}}):t._e(),"03"==t.partner.taskstatu?s("icon-font",{attrs:{type:"icon-quxiao"}}):t._e(),"04"==t.partner.taskstatu?s("icon-font",{attrs:{type:"icon-yiguoqi"}}):t._e()]},proxy:!0},{key:"extra",fn:function(){return[t.canOperate?s("div",[s("a-button",{attrs:{type:"primary"},on:{click:t.acceptPartner}},[t._v(" "+t._s(t.$t("accept"))+" ")]),t._v(" "),s("a-button",{attrs:{type:"danger"},on:{click:t.showRefuse}},[t._v(" "+t._s(t.$t("refuse"))+" ")])],1):t.canCreateOperate?s("div",[s("a-popconfirm",{attrs:{placement:"top","ok-text":t.$t("yes"),"cancel-text":t.$t("no")},on:{confirm:t.cancelTask}},[s("template",{slot:"title"},[s("p",[t._v(t._s(t.$t("confirmCancel")))])]),s("a-button",[t._v(t._s(t.$t("cancel")))])],2)],1):t._e()]},proxy:!0}])})],1),s("refuse-alert",{attrs:{modalTitle:t.$t("refuse")},on:{confirmFun:t.refuse}}),s("submitting",{attrs:{title:t.$t("submitting")}})],1)},li=[],ci=Ds["a"].createFromIconfontCN({scriptUrl:B.alicdnIcon}),di={name:"partnerDetail",components:{Submitting:j,RefuseAlert:ge,IconFont:ci,TopNav:ut},data:function(){return{taskId:"",creater:{},records:[],partner:{},fail:{},task:{}}},beforeMount:function(){this.taskId=this.$route.query.taskId,this.initPage()},methods:{initPage:function(){if(!B.isNull(this.taskId)){var t={taskId:this.taskId},e=this;this.$axios.post("/task/partner/init",t).then((function(t){if(console.log(t),e.submitting=!1,"200"!=t.data.code)e.$message.error(e.$t(t.data.code));else{if(console.log(t),B.isNull(t.data.retMap))return;e.creater=t.data.retMap.creater,e.records=t.data.retMap.records,e.partner=t.data.retMap.partner,e.fail=t.data.retMap.fail,e.task=t.data.retMap.task}})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))}},cancelTask:function(){var t={partnerId:this.partner.id},e=this;this.$("#submitting").modal("show"),this.$axios.post("/task/partner/cancel",t).then((function(t){e.$("#submitting").modal("hide"),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(e.$message.success(e.$t("commitSucc")),e.initPage())})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))},showRefuse:function(){this.$("#refuseAlert").modal("show")},refuse:function(t,e){console.log(t,e);var s={partnerId:this.partner.id,reason:t,remarks:e},a=this;this.$("#refuseAlert").modal("hide"),this.$("#submitting").modal("show"),this.$axios.post("/task/partner/refuse",s).then((function(t){a.$("#submitting").modal("hide"),"200"!=t.data.code?a.$message.error(a.$t(t.data.code)):(a.$message.success(a.$t("commitSucc")),a.initPage())})).catch((function(t){a.$("#submitting").modal("hide"),console.log(t),a.$message.error(a.$t("systemErr"))}))},acceptPartner:function(){var t={partnerId:this.partner.id},e=this;this.$("#submitting").modal("show"),this.$axios.post("/task/partner/accept",t).then((function(t){e.$("#submitting").modal("hide"),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(e.$message.success(e.$t("commitSucc")),e.initPage())})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))}},watch:{getTaskId:function(t){this.taskId=t,this.initPage()}},computed:{getTaskId:function(){return this.$route.query.taskId},showTitle:function(){return this.creater.name+"提出的协作请求！"},subTitle:function(){var t="时间：";if("00"==this.partner.taskstatu)for(var e=0;e<this.records.length;e++){var s=this.records[e];t+="自 "+ht(new Date(s.starttime),"yyyy-MM-dd hh:00")+" 到 "+ht(new Date(s.endtime),"yyyy-MM-dd hh:00")+"       "}else t+=this.partner.remark,"02"==this.partner.taskstatu&&(t+=" "+this.$t("reason")+":"+this.fail.reason);return t},canOperate:function(){return"00"==this.partner.taskstatu&&!!this.$store.getters.isCurrentUser(this.task.currentuser)},canCreateOperate:function(){return"02"!=this.partner.taskstatu&&"03"!=this.partner.taskstatu&&"04"!=this.partner.taskstatu&&!!this.$store.getters.isCurrentUser(this.task.createuser)}}},ui=di,mi=Object(l["a"])(ui,ni,li,!1,null,"369adbe6",null),pi=mi.exports,hi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("top-nav"),s("div",{staticClass:"main-container "},[s("div",{staticClass:"form-row"},[s("a-divider",{attrs:{orientation:"left"}},[t._v(" "+t._s(t.$t("baseInfo"))+" ")]),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"animalName"}},[t._v(t._s(t.$t("animalName")))]),s("a-input",{attrs:{id:"animalName",disabled:""},model:{value:t.stock.animal.name,callback:function(e){t.$set(t.stock.animal,"name",e)},expression:"stock.animal.name"}},[s("icon-font",{attrs:{slot:"prefix",type:"icon-guoying"},slot:"prefix"})],1)],1),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"stockID"}},[t._v(t._s(t.$t("animal_stock_stockID")))]),s("a-input",{attrs:{id:"stockID",disabled:""},model:{value:t.stock.animal.stockId,callback:function(e){t.$set(t.stock.animal,"stockId",e)},expression:"stock.animal.stockId"}},[s("icon-font",{attrs:{slot:"prefix",type:"icon-bianhao"},slot:"prefix"})],1)],1),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"genotype"}},[t._v(t._s(t.$t("animal_stock_genotype")))]),s("a-input",{attrs:{id:"genotype",disabled:""},model:{value:t.stock.animal.genotype,callback:function(e){t.$set(t.stock.animal,"genotype",e)},expression:"stock.animal.genotype"}},[s("icon-font",{attrs:{slot:"prefix",type:"icon-jiyingongcheng"},slot:"prefix"})],1)],1),s("div",{staticClass:"form-group col-md-6 col-sm-12 col-lg-4"},[s("label",{attrs:{for:"resource"}},[t._v(t._s(t.$t("animal_stock_resource")))]),s("a-input",{attrs:{id:"resource",disabled:""},model:{value:t.stock.animal.resource,callback:function(e){t.$set(t.stock.animal,"resource",e)},expression:"stock.animal.resource"}},[s("icon-font",{attrs:{slot:"prefix",type:"icon-laiyuan"},slot:"prefix"})],1)],1)],1),s("a-divider",{attrs:{orientation:"left"}},[t._v(t._s(t.$t("personnal_btn_stock"))+" ")]),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"container"}},[t._v(t._s(t.$t("animal_stock_container")))]),s("a-input",{attrs:{id:"container"},model:{value:t.stock.contanertype,callback:function(e){t.$set(t.stock,"contanertype",e)},expression:"stock.contanertype"}},[s("icon-font",{attrs:{slot:"prefix",type:"icon-rongqi"},slot:"prefix"})],1)],1),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"number"}},[t._v(t._s(t.$t("animal_stock_number")))]),s("div",{attrs:{id:"number"}},[s("a-input-number",{staticStyle:{width:"100%"},attrs:{min:"0"},model:{value:t.stock.contanernmuber,callback:function(e){t.$set(t.stock,"contanernmuber",e)},expression:"stock.contanernmuber"}})],1)]),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"useType"}},[t._v(t._s(t.$t("useType")))]),s("div",{attrs:{id:"useType"}},[s("a-select",{staticStyle:{width:"100%"},on:{change:t.handleChange},model:{value:t.stock.usagetype,callback:function(e){t.$set(t.stock,"usagetype",e)},expression:"stock.usagetype"}},[s("a-select-option",{attrs:{value:"keep"}},[t._v(" "+t._s(t.$t("keep"))+" ")]),s("a-select-option",{attrs:{value:"stock"}},[t._v(" "+t._s(t.$t("personnal_btn_stock"))+" ")])],1)],1)]),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"environment"}},[t._v(t._s(t.$t("animal_stock_environment")))]),s("div",{attrs:{id:"environment"}},[s("a-select",{staticStyle:{width:"100%"},on:{change:t.handleChange},model:{value:t.stock.environment,callback:function(e){t.$set(t.stock,"environment",e)},expression:"stock.environment"}},t._l(t.stock.envs,(function(e){return s("a-select-option",{key:e.id},[t._v(" "+t._s(e.displayname)+" ")])})),1)],1)]),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"location"}},[t._v(t._s(t.$t("location")))]),s("a-input",{attrs:{id:"location"},model:{value:t.stock.location,callback:function(e){t.$set(t.stock,"location",e)},expression:"stock.location"}},[s("icon-font",{attrs:{slot:"prefix",type:"icon-weizhi"},slot:"prefix"})],1)],1),s("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"birthday"}},[t._v(t._s(t.$t("birthday")))]),s("div",{attrs:{id:"birthday"}},[s("date-picker",{attrs:{"value-type":"format",format:"YYYY-MM-DD",required:""},model:{value:t.birthday,callback:function(e){t.birthday=e},expression:"birthday"}})],1)])]),s("div",{staticClass:"modal-footer",staticStyle:{"margin-top":"10px"}},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.handleState}},[t._v(t._s(t.$t("confirm")))]),s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deleteSotck}},[t._v(t._s(t.$t("delete")))])])],1),s("submitting",{attrs:{title:t.$t("submitting")}})],1)},fi=[],bi=Ds["a"].createFromIconfontCN({scriptUrl:B.alicdnIcon}),gi={name:"editStock",components:{Submitting:j,TopNav:ut,IconFont:bi},data:function(){return{stockId:"",stock:{},birthday:""}},beforeMount:function(){this.stockId=this.$route.query.stockId,this.initPage()},methods:{deleteSotck:function(){var t=this;this.$confirm({title:this.$t("areyousureDelete"),okText:this.$t("yes"),okType:"danger",cancelText:this.$t("no"),onOk:function(){t.deleteThisStock()}})},deleteThisStock:function(){var t=new Array;t.push(this.stockId);var e={stockIds:t},s=this;this.$("#submitting").modal("show"),this.$axios.post("/stock/edit/delete",e).then((function(t){s.$("#submitting").modal("hide"),"200"!=t.data.code?s.$message.error(s.$t(t.data.code)):s.$router.push("/stock/currentStock")})).catch((function(t){s.$("#submitting").modal("hide"),console.log(t),s.$message.error(s.$t("systemErr"))}))},initPage:function(){if(!B.isNull(this.stockId)){var t={stockId:this.stockId},e=this;this.$("#submitting").modal("show"),this.$axios.post("/stock/edit/init",t).then((function(t){e.$("#submitting").modal("hide"),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(console.log(t),e.stock=t.data.retMap.stock)})).catch((function(t){e.$("#submitting").modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))}},handleState:function(){var t={stock:JSON.stringify(this.stock)};this.$("#submitting").modal("show");var e=this;this.$axios.post("/stock/edit/updateStock",t).then((function(t){e.$("#submitting").modal("hide"),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(console.log(t),window.location.reload())})).catch((function(t){e.$("#submitting").modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))}},watch:{getStockId:function(t){this.stockId=t,this.initPage()},birthday:function(t){this.stock.birthday=t},stock:{handler:function(t){this.birthday=ht(new Date(t.birthday),"yyyy-MM-dd")},deep:!0}},computed:{getStockId:function(){return this.$route.query.stockId}}},vi=gi,$i=Object(l["a"])(vi,hi,fi,!1,null,"2faa2267",null),yi=$i.exports,ki=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("top-nav"),s("div",{staticClass:"main-container"},[s("a-layout",{attrs:{id:"components-layout-demo-top-side"}},[s("a-layout-content",[s("a-layout",{staticStyle:{padding:"24px 0",background:"#fff"}},[s("a-layout-sider",{staticStyle:{background:"#fff","text-align":"center"},attrs:{width:"20%"}},[s("a-menu",{staticStyle:{height:"100%"},attrs:{mode:"inline","default-selected-keys":["1"]},model:{value:t.menuId,callback:function(e){t.menuId=e},expression:"menuId"}},[s("a-menu-item",{key:"1",on:{click:function(e){return t.showContent("1")}}},[t._v(" "+t._s(t.$t("accountInfo"))+" ")]),t.$store.getters.isAdmin?s("a-menu-item",{key:"3",on:{click:function(e){return t.showContent("3")}}},[t._v(" "+t._s(t.$t("userManager"))+" ")]):t._e()],1)],1),s("a-layout-content",{style:{padding:"0 24px",minHeight:"280px"}},["1"==this.menuId?s("personal-info"):t._e(),"3"==this.menuId?s("user-manager"):t._e()],1)],1)],1)],1)],1)],1)},wi=[],_i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{"text-align":"left"}},[s("br"),s("br"),s("a-form",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[s("a-form-item",{attrs:{label:t.$t("userHead")}},[s("div",[s("a-tooltip",{attrs:{placement:"topLeft"}},[s("template",{slot:"title"},[s("span",[t._v("点击更换头像")])]),s("a-upload",{attrs:{name:"file",showUploadList:!1,action:this.$axios.defaults.baseURL+"file/import/userImage",headers:{token:this.$cookies.get("token")}},on:{change:t.headUpload}},[s("a-avatar",{attrs:{size:50,src:t.userHeadSrc}})],1)],2)],1)]),s("a-form-item",{attrs:{label:t.$t("userName")}},[s("a-input",{attrs:{id:"userName",disabled:""},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1),s("a-form-item",{attrs:{label:t.$t("userPwd")}},[s("a-input-password",{attrs:{id:"userPwd",disabled:!t.isEditPwd},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}}),t.isEditPwd?s("a-input-password",{attrs:{id:"userPwd2"},model:{value:t.passwd2,callback:function(e){t.passwd2=e},expression:"passwd2"}}):t._e(),t.isEditPwd?s("a-input",{attrs:{placeholder:"输入验证码"},model:{value:t.vid,callback:function(e){t.vid=e},expression:"vid"}}):t._e(),t.isEditPwd?s("a-button",{on:{click:t.comfirmPwd}},[t._v(t._s(t.$t("confirm")))]):t._e(),t.isEditPwd?s("a-button",{on:{click:t.cancelClick}},[t._v(t._s(t.$t("cancel")))]):t._e(),t.isEditPwd?t._e():s("a-button",{on:{click:t.editPassword}},[t._v("修改密码")])],1),s("a-form-item",{attrs:{label:t.$t("userEmail")}},[s("a-input",{attrs:{id:"userEmail",disabled:""},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1),s("a-form-item",{attrs:{label:t.$t("role")}},t._l(t.roles,(function(e){return s("a-tag",{key:e.id,attrs:{color:"#87d068"}},[t._v(" "+t._s(e.rolename)+" ")])})),1),s("a-form-item",{attrs:{label:t.$t("department")}},[s("a-input",{attrs:{id:"department",disabled:""},model:{value:t.user.group.groupname,callback:function(e){t.$set(t.user.group,"groupname",e)},expression:"user.group.groupname"}})],1)],1),s("submitting",{attrs:{title:t.$t("submitting")}})],1)},xi=[],Ci={name:"personalInfo",components:{Submitting:j},data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:12}},user:{},isEditPwd:!1,passwd2:"",vid:""}},beforeMount:function(){this.initPage()},methods:{initPage:function(){this.isEditPwd=!1,this.user=this.$store.getters.getUser},headUpload:function(t){console.log(t),"done"==t.file.status&&window.location.reload()},cancelClick:function(){window.location.reload()},comfirmPwd:function(){if(B.isNull(this.user.password))this.$message.error(this.$t("userPwdNull"));else if(B.isNull(this.passwd2))this.$message.error(this.$t("userPwd2Null"));else if(this.user.password==this.passwd2)if(B.isNull(this.vid))this.$message.error(this.$t("verification"));else{var t=this,e={password:this.$md5(this.passwd2),vid:this.vid};this.$("#submitting").modal("show"),this.$axios.post("/personal/editPassword/confirm",e).then((function(e){t.$("#submitting").modal("hide"),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.$message.success("修改成功！"),t.isEditPwd=!1)})).catch((function(e){t.$("#submitting").modal("hide"),console.log(e),t.$message.error(t.$t("systemErr"))}))}else this.$message.error(this.$t("userPwd2NotSame"))},editPassword:function(){var t=this;this.$("#submitting").modal("show"),this.$axios.post("/personal/editPwd/sendVid").then((function(e){t.$("#submitting").modal("hide"),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.$message.success("验证码已发送至您的邮箱！"),t.isEditPwd=!0,t.user.password="")})).catch((function(e){t.$("#submitting").modal("hide"),console.log(e),t.$message.error(t.$t("systemErr"))}))}},computed:{roles:function(){return this.$store.getters.getUser.roles},userId:function(){return this.$store.getters.getUser.id},userHeadSrc:function(){return this.$axios.defaults.baseURL+"user/userHead/"+this.userId+".png"}}},Si=Ci,Ii=Object(l["a"])(Si,_i,xi,!1,null,"2cade8ba",null),Di=Ii.exports,Ni=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:t.$t("userManager")}},[s("template",{slot:"extra"},[s("a-button",{attrs:{type:"primary"},on:{click:t.newDepartment}},[t._v(" "+t._s(t.$t("newDepartment"))+" ")]),s("a-button",{attrs:{type:"primary"},on:{click:t.addNewRole}},[t._v(" "+t._s(t.$t("newRole"))+" ")]),s("a-button",{attrs:{type:"primary",disabled:0==this.selectedRows.length},on:{click:t.updateUsers}},[t._v(" "+t._s(t.$t("update"))+" ")])],1)],2),s("a-table",{attrs:{columns:t.columns,"data-source":t.allUsers,bordered:"",loading:t.tableLoad,"row-selection":t.rowSelection,pagination:!1,size:"middle"},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var a=e.setSelectedKeys,i=e.selectedKeys,r=e.confirm,o=e.clearFilters,n=e.column;return s("div",{staticStyle:{padding:"8px"}},[s("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{value:i[0]},on:{change:function(t){return a(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(i,r,n.dataIndex)}}}),s("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(i,r,n.dataIndex)}}},[t._v(" "+t._s(t.$t("search"))+" ")]),s("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v(" "+t._s(t.$t("reset"))+" ")])],1)}},{key:"filterIcon",fn:function(t){return s("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},t._l(this.columnNames,(function(e){return{key:e,fn:function(a,i,r){return[s("div",{key:e},["roles"==e?s("a-select",{staticStyle:{width:"200px"},attrs:{mode:"multiple"},on:{change:function(e){return t.consoleValue(i.rolesIds)}},model:{value:i.rolesIds,callback:function(e){t.$set(i,"rolesIds",e)},expression:"record.rolesIds"}},t._l(t.roles,(function(e){return s("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.rolename)+" ")])})),1):"group.groupname"==e?s("a-select",{staticStyle:{width:"100%"},model:{value:i.roleid,callback:function(e){t.$set(i,"roleid",e)},expression:"record.roleid"}},t._l(t.groups,(function(e){return s("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.groupname)+" ")])})),1):[t._v(" "+t._s(t.showText(e,a,r))+" ")]],2)]}}}))],null,!0)}),s("new-department",{ref:"newDep",attrs:{users:t.allUsers},on:{submitDepart:t.submitDepart}}),s("submitting",{ref:"submitting",attrs:{title:t.$t("submitting")}}),s("new-role",{ref:"newRole",on:{sumintNewRole:t.sumintNewRole}})],1)},Pi=[],Ri=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{id:"newDepartment",tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("newDepartment")))]),t._m(0)]),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-sm-4 col-form-label",attrs:{for:"staticEmail"}},[t._v(t._s(t.$t("departmentName")))]),s("div",{staticClass:"col-sm-8"},[s("a-input",{staticStyle:{width:"100%"},attrs:{id:"staticEmail"},model:{value:t.group.name,callback:function(e){t.$set(t.group,"name",e)},expression:"group.name"}})],1)]),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-sm-4 col-form-label",attrs:{for:"inputPassword"}},[t._v(t._s(t.$t("principal")))]),s("div",{staticClass:"col-sm-8"},[s("a-select",{staticStyle:{width:"100%"},attrs:{id:"inputPassword"},model:{value:t.group.groupAdmin,callback:function(e){t.$set(t.group,"groupAdmin",e)},expression:"group.groupAdmin"}},t._l(t.users,(function(e){return s("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("cancel")))]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.submitData}},[t._v(t._s(t.$t("confirm")))])])])])])},Ti=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],ji={name:"newDepartment",props:{users:Array},data:function(){return{group:{name:"",groupAdmin:""}}},methods:{submitData:function(){B.isNull(this.group.name)?this.$message.error(this.$t("departmentName")+this.$t("not_null")):B.isNull(this.group.groupAdmin)?this.$message.error(this.$t("principal")+this.$t("not_null")):this.$emit("submitDepart",this.group)}}},Ei=ji,Mi=Object(l["a"])(Ei,Ri,Ti,!1,null,"06e2e689",null),Ai=Mi.exports,Li=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{id:"newRole",tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("newRole")))]),t._m(0)]),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-sm-4 col-form-label",attrs:{for:"roleName"}},[t._v(t._s(t.$t("roleName")))]),s("div",{staticClass:"col-sm-8"},[s("a-input",{staticStyle:{width:"100%"},attrs:{id:"roleName"},model:{value:t.role.name,callback:function(e){t.$set(t.role,"name",e)},expression:"role.name"}})],1)]),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-sm-4 col-form-label",attrs:{for:"roleIndex"}},[t._v(t._s(t.$t("roleIndex")))]),s("div",{staticClass:"col-sm-8"},[s("a-input",{staticStyle:{width:"100%"},attrs:{id:"roleIndex"},model:{value:t.role.index,callback:function(e){t.$set(t.role,"index",e)},expression:"role.index"}})],1)])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("cancel")))]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.submitData}},[t._v(t._s(t.$t("confirm")))])])])])])},Oi=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Fi={name:"newRole",data:function(){return{role:{name:"",index:""}}},methods:{submitData:function(){B.isNull(this.role.name)?this.$message.error(this.$t("roleName")+this.$t("not_null")):B.isNull(this.role.index)?this.$message.error(this.$t("roleIndex")+this.$t("not_null")):this.$emit("sumintNewRole",this.role)}}},Ui=Fi,zi=Object(l["a"])(Ui,Li,Oi,!1,null,"529a11a7",null),Ki=zi.exports,qi={name:"userManager",components:{NewRole:Ki,Submitting:j,NewDepartment:Ai},data:function(){return{tableLoad:!1,data:[],selectedRowKeys:[],selectedRows:[],columns:[],columnNames:[],scroll:{x:1500},editingKey:"",allUsers:[],roles:[],groups:[]}},beforeMount:function(){this.initPage()},methods:{addNewRole:function(){this.$(this.$refs.newRole.$el).modal("show")},sumintNewRole:function(t){this.$(this.$refs.newRole.$el).modal("hide"),this.$(this.$refs.submitting.$el).modal("show");var e=this;this.$axios.post("/user/manager/addNewRole",t).then((function(t){e.$(e.$refs.submitting.$el).modal("hide"),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(e.$message.success(e.$t("commitSucc")),e.initPage())})).catch((function(t){e.$(e.$refs.submitting.$el).modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))},updateUsers:function(){if(0!=this.selectedRows.length){this.$(this.$refs.submitting.$el).modal("show");var t=this,e={users:JSON.stringify(this.selectedRows)};this.$axios.post("/user/manager/updateUsers",e).then((function(e){t.$(t.$refs.submitting.$el).modal("hide"),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.$message.success(t.$t("commitSucc")),t.initPage())})).catch((function(e){t.$(t.$refs.submitting.$el).modal("hide"),console.log(e),t.$message.error(t.$t("systemErr"))}))}},newDepartment:function(){this.$(this.$refs.newDep.$el).modal("show")},submitDepart:function(t){this.$(this.$refs.newDep.$el).modal("hide"),this.$(this.$refs.submitting.$el).modal("show");var e=this;this.$axios.post("/user/manager/addNewDepartment",t).then((function(t){e.$(e.$refs.submitting.$el).modal("hide"),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(e.$message.success(e.$t("commitSucc")),e.initPage())})).catch((function(t){e.$(e.$refs.submitting.$el).modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))},handleSearch:function(t,e,s){e(),this.searchText=t[0],this.searchedColumn=s},handleReset:function(t){t(),this.searchText=""},consoleValue:function(t){console.log(t)},getRoleIds:function(t){var e=new Array;return t.map((function(t){return e.push(t.id)})),e},initPage:function(){this.initColumns();var t=this;this.$axios.post("/user/manager/init").then((function(e){"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.allUsers=e.data.retMap.users,t.roles=e.data.retMap.roles,t.groups=e.data.retMap.groups,t.allUsers.map((function(t){return t.key=t.id})),t.selectedRowKeys=new Array,t.selectedRows=new Array)})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},initColumns:function(){var t=this,e=new Array;for(var s in e.push({title:this.$t("userName"),dataIndex:"name",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"name"},onFilter:function(t,e){return!B.isNull(e.name)&&e.name.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e.push({title:this.$t("userEmail"),dataIndex:"email",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"email"},onFilter:function(t,e){return!B.isNull(e.email)&&e.email.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e.push({title:this.$t("role"),dataIndex:"roles",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"roles"},onFilter:function(t,e){if(B.isNull(e.roles))return!1;for(var s=0;s<e.roles.length;s++){var a=e.roles[s];if(a.rolename.toString().toLowerCase().includes(t.toLowerCase()))return!0}return!1},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e.push({title:this.$t("department"),dataIndex:"group.groupname",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"group.groupname"},onFilter:function(t,e){return!B.isNull(e.group.groupname)&&e.group.groupname.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),this.columns=e,this.columnNames=new Array,e)this.columnNames.push(e[s].dataIndex)},showText:function(t,e,s){return console.log(t,e,s),e}},computed:{rowSelection:function(){var t=this,e=this.selectedRowKeys,s=this.selectedRows;return{selectedRowKeys:e,selectedRows:s,onChange:function(e,s){console.log("selectedRowKeys: ".concat(e),"selectedRows: ",s),t.selectedRowKeys=e,t.selectedRows=s}}}}},Vi=qi,Yi=Object(l["a"])(Vi,Ni,Pi,!1,null,"c5754c0c",null),Hi=Yi.exports,Bi={name:"personalMain",components:{UserManager:Hi,PersonalInfo:Di,TopNav:ut},data:function(){return{collapsed:!1,menuId:"1"}},methods:{showContent:function(t){this.menuId=t}},computed:{}},Ji=Bi,Gi=(s("d4a2"),Object(l["a"])(Ji,ki,wi,!1,null,"e027b12a",null)),Wi=Gi.exports,Zi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("top-nav"),s("div",{staticClass:"main-container process-detailAll"},[s("a-tabs",{attrs:{type:"card"},on:{change:t.callback}},[s("a-tab-pane",{key:"6",attrs:{tab:t.$t("baseInfo")}},[s("process-base-info",{attrs:{process:t.process}})],1),10!=t.process.taskstatu&&21!=t.process.taskstatu&&22!=t.process.taskstatu?[s("a-tab-pane",{key:"1",attrs:{tab:t.$t("sampleInput")}},[s("process-step1-new",{attrs:{process:t.process}})],1),s("a-tab-pane",{key:"2",attrs:{tab:t.$t("samplePreparation")}},[s("process-step2",{attrs:{process:t.process,"task-id":t.taskId}})],1),s("a-tab-pane",{key:"3",attrs:{tab:t.$t("libraryPreparation")}},[s("process-step3",{attrs:{process:t.process}})],1),s("a-tab-pane",{key:"4",attrs:{tab:t.$t("dismountData")}},[s("process-step4",{attrs:{process:t.process}})],1),s("a-tab-pane",{key:"5",attrs:{tab:t.$t("bioinformaticsAnalysis")}},[s("process-step5",{attrs:{process:t.process}})],1)]:t._e(),s("div",{attrs:{slot:"tabBarExtraContent"},slot:"tabBarExtraContent"},["71"==this.process.taskstatu?s("a-tag",{staticClass:"pointer",attrs:{color:"#f50"}},[t._v(" "+t._s("基因组学中心已拒绝："+this.fail.reason)+" ")]):"72"==this.process.taskstatu?s("a-tag",{staticClass:"pointer",attrs:{color:"#f50"}},[t._v(" "+t._s("部门负责人已拒绝："+this.fail.reason)+" ")]):t.isStop?s("a-tag",{attrs:{color:"#87d068"}},[t._v(" "+t._s(t.$t("allcomplete"))+" ")]):s("a-popconfirm",{attrs:{placement:"topLeft","ok-text":t.$t("yes"),"cancel-text":t.$t("no")},on:{confirm:t.completeTask}},[s("template",{slot:"title"},[s("p",[t._v(t._s(t.$t("areyousureCompleteProject")))])]),s("a-button",{attrs:{type:"danger"}},[t._v(" "+t._s(t.$t("projectComplete"))+" ")])],2)],1)],2)],1)],1)},Xi=[],Qi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-divider",{attrs:{orientation:"left"}},[t._v(t._s(t.$t("processMsg")))]),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-3"},[s("label",{attrs:{for:"projectName"}},[t._v(t._s(t.$t("projectName")))]),s("a-tooltip",{attrs:{id:"projectName",trigger:["hover"],placement:"topLeft",title:t.process.projectname,"auto-adjust-overflow":!0}},[s("a-input",{attrs:{disabled:!0},model:{value:t.process.projectname,callback:function(e){t.$set(t.process,"projectname",e)},expression:"process.projectname"}})],1)],1),s("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"principal"}},[t._v(t._s(t.$t("principal")))]),s("div",{attrs:{id:"principal"}},[s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:t.process.principal,callback:function(e){t.$set(t.process,"principal",e)},expression:"process.principal"}},t._l(t.users,(function(e){return s("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),s("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-3"},[s("label",{attrs:{for:"email"}},[t._v(t._s(t.$t("userEmail")))]),s("a-tooltip",{attrs:{placement:"topRight",title:"数据下载及报告分析完成后将发送相关信息至以上邮箱列表",mouseLeaveDelay:1,"auto-adjust-overflow":!0}},[s("div",{attrs:{id:"email"}},t._l(t.processEmails,(function(e){return s("a-tag",{key:e.email,attrs:{color:"blue"}},[t._v(" "+t._s(e.email)+" ")])})),1)])],1),s("div",{staticClass:"form-group-sm col-md-12"},[s("label",{attrs:{for:"projectDesc"}},[t._v(t._s(t.$t("projectDesc")))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.process.projectdesc,expression:"process.projectdesc"}],staticClass:"form-control",attrs:{id:"projectDesc",maxlength:"1000",placeholder:"例：果蝇近缘物种雌雄脑睾丸子宫转录组",rows:"3",disabled:!0},domProps:{value:t.process.projectdesc},on:{input:function(e){e.target.composing||t.$set(t.process,"projectdesc",e.target.value)}}})]),s("a-divider",{attrs:{orientation:"left"}},[t._v(t._s(t.$t("staffing")))]),s("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"sampleInput"}},[t._v(t._s(t.$t("sampleInput")+t.$t("principal")))]),s("div",{attrs:{id:"sampleInput"}},[s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isNotConfirm&&t.isPInotConfirm},model:{value:t.process.sampleinput,callback:function(e){t.$set(t.process,"sampleinput",e)},expression:"process.sampleinput"}},t._l(t.geneGroupUser,(function(e){return s("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),s("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"samplePreparation"}},[t._v(t._s(t.$t("samplePreparation")+t.$t("principal")))]),s("div",{attrs:{id:"samplePreparation"}},[s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isNotConfirm&&t.isPInotConfirm},model:{value:t.process.samplepreparation,callback:function(e){t.$set(t.process,"samplepreparation",e)},expression:"process.samplepreparation"}},t._l(t.geneGroupUser,(function(e){return s("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),s("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"libraryPreparation"}},[t._v(t._s(t.$t("libraryPreparation")+t.$t("principal")))]),s("div",{attrs:{id:"libraryPreparation"}},[s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isNotConfirm&&t.isPInotConfirm},model:{value:t.process.librarypreparation,callback:function(e){t.$set(t.process,"librarypreparation",e)},expression:"process.librarypreparation"}},t._l(t.geneGroupUser,(function(e){return s("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),s("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"dismountData"}},[t._v(t._s(t.$t("dismountData")+t.$t("principal")))]),s("div",{attrs:{id:"dismountData"}},[s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isNotConfirm&&t.isPInotConfirm},model:{value:t.process.dismountdata,callback:function(e){t.$set(t.process,"dismountdata",e)},expression:"process.dismountdata"}},t._l(t.geneGroupUser,(function(e){return s("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),s("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[s("label",{attrs:{for:"bioinformaticsAnalysis"}},[t._v(t._s(t.$t("bioinformaticsAnalysis")+t.$t("principal")))]),s("div",{attrs:{id:"bioinformaticsAnalysis"}},[s("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isNotConfirm&&t.isPInotConfirm},model:{value:t.process.bioinformaticsanalysis,callback:function(e){t.$set(t.process,"bioinformaticsanalysis",e)},expression:"process.bioinformaticsanalysis"}},t._l(t.geneGroupUser,(function(e){return s("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),s("div",{staticClass:"form-group-sm col-md-12"},[s("label",{attrs:{for:"remarks"}},[t._v(t._s(t.$t("remarks")))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.process.remarks,expression:"process.remarks"}],staticClass:"form-control",attrs:{id:"remarks",rows:"3",disabled:!0},domProps:{value:t.process.remarks},on:{input:function(e){e.target.composing||t.$set(t.process,"remarks",e.target.value)}}})])],1),s("div",{staticClass:"modal-footer",staticStyle:{"margin-top":"20px"}},[t.isNotConfirm?t._e():s("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.updateProcess("confirm")}}},[t._v(" "+t._s(t.$t("confirm"))+" ")]),t.isNotConfirm?t._e():s("a-button",{attrs:{type:"danger"},on:{click:function(e){return t.showRefuseAlert("admin")}}},[t._v(" "+t._s(t.$t("refuse"))+" ")]),t.isPInotConfirm?t._e():s("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.updateProcessByPi("confirm")}}},[t._v(" "+t._s(t.$t("confirm"))+" ")]),t.isPInotConfirm?t._e():s("a-button",{attrs:{type:"danger"},on:{click:function(e){return t.showRefuseAlert("pi")}}},[t._v(" "+t._s(t.$t("refuse"))+" ")]),"20"==this.process.taskstatu||"21"==this.process.taskstatu?s("a-tag",{staticClass:"pointer",attrs:{color:"#87d068"}},[t._v(" "+t._s("部门负责人已确认")+" ")]):t._e(),"20"==this.process.taskstatu||"22"==this.process.taskstatu?s("a-tag",{staticClass:"pointer",attrs:{color:"#87d068"}},[t._v(" "+t._s("基因组学中心已确认")+" ")]):t._e()],1),s("submitting",{ref:"submitting",attrs:{title:t.$t("submitting")}}),s("refuse-alert",{ref:"refuse",attrs:{"modal-title":t.$t("refuse")},on:{confirmFun:t.refuseFun}})],1)},tr=[],er=(s("1276"),{name:"processBaseInfo",components:{RefuseAlert:ge,Submitting:j},props:{process:Object},data:function(){return{users:[],processEmails:[],sampleTypes:[],jyzxGroup:{},task:{},groupAdmin:{},refuseFlag:"",reason:"",remark:"",fail:{}}},beforeMount:function(){this.initPage()},methods:{initPage:function(){if(!B.isNull(this.process.id)){console.log(this.process),this.sampleTypes=this.process.sampletype.split("##");var t=this,e={processId:this.process.id};this.$axios.post("/task/process/baseInfo",e).then((function(e){console.log(e),200!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.users=e.data.retMap.users,t.processEmails=e.data.retMap.processEmails,t.jyzxGroup=e.data.retMap.jyzxzx,t.task=e.data.retMap.task,t.fail=e.data.retMap.fail,t.groupAdmin=e.data.retMap.groupAdmin,t.$notification.warning({key:"processBase",placement:"bottomRight",message:t.$t("remind"),description:t.$t("processSelectPre"),duration:60,getContainer:function(){return t.$(".process-detailAll")[0]}}))})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))}},refuseFun:function(t,e){this.$(this.$refs.refuse.$el).modal("hide"),this.reason=t,this.remark=e,"pi"==this.refuseFlag?this.updateProcessByPi("refuse"):"admin"==this.refuseFlag&&this.updateProcess("refuse")},showRefuseAlert:function(t){this.refuseFlag=t,this.$(this.$refs.refuse.$el).modal("show")},updateProcessByPi:function(t){if("confirm"!=t&&this.checkPre()){var e=this;this.$(this.$refs.submitting.$el).modal("show");var s={process:JSON.stringify(this.process),flag:t,reason:this.reason,remark:this.remark};this.$axios.post("/task/process/pisetPrincepal",s).then((function(t){e.$(e.$refs.submitting.$el).modal("hide"),200!=t.data.code?e.$message.error(e.$t(t.data.code)):(e.$message.success(e.$t("save_success")),window.location.reload())})).catch((function(t){e.$(e.$refs.submitting.$el).modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))}},checkPre:function(){return B.isNull(this.process.sampleinput)?(this.$message.error(this.$t("sampleInput")+this.$t("principal")+this.$t("not_null")),!1):B.isNull(this.process.samplepreparation)?(this.$message.error(this.$t("samplePreparation")+this.$t("principal")+this.$t("not_null")),!1):B.isNull(this.process.librarypreparation)?(this.$message.error(this.$t("libraryPreparation")+this.$t("principal")+this.$t("not_null")),!1):B.isNull(this.process.dismountdata)?(this.$message.error(this.$t("dismountData")+this.$t("principal")+this.$t("not_null")),!1):!B.isNull(this.process.bioinformaticsanalysis)||(this.$message.error(this.$t("bioinformaticsAnalysis")+this.$t("principal")+this.$t("not_null")),!1)},updateProcess:function(t){if("confirm"!=t&&this.checkPre()){var e={process:JSON.stringify(this.process),reason:this.reason,remark:this.remark,flag:t},s=this;this.$(this.$refs.submitting.$el).modal("show"),this.$axios.post("/task/process/setPrincepal",e).then((function(t){s.$(s.$refs.submitting.$el).modal("hide"),200!=t.data.code?s.$message.error(s.$t(t.data.code)):(s.$message.success(s.$t("save_success")),window.location.reload())})).catch((function(t){s.$(s.$refs.submitting.$el).modal("hide"),console.log(t),s.$message.error(s.$t("systemErr"))}))}}},watch:{process:{handler:function(t){B.isNull(t)||this.initPage()},deep:!0}},computed:{isNotConfirm:function(){return"10"!=this.process.taskstatu&&"21"!=this.process.taskstatu||this.task.currentuser!=this.$store.getters.getUser.id},isPInotConfirm:function(){return"10"!=this.process.taskstatu&&"22"!=this.process.taskstatu||this.groupAdmin.id!=this.$store.getters.getUser.id},geneGroupUser:function(){return this.users}}}),sr=er,ar=Object(l["a"])(sr,Qi,tr,!1,null,"7fcb7466",null),ir=ar.exports,rr={name:"processDetailNew",components:{ProcessBaseInfo:ir,ProcessStep5:$a,ProcessStep4:pa,ProcessStep3:na,ProcessStep2:ea,ProcessStep1New:si,TopNav:ut},data:function(){return{taskId:"",process:{},fail:{}}},beforeMount:function(){this.taskId=this.$route.query.taskId,console.log(this.taskId),this.initPage()},methods:{completeTask:function(){var t={processId:this.process.id},e=this;this.$axios.post("/task/process/completeProject",t).catch((function(t){200!=t.data.code?e.$message.error(e.$t(t.data.code)):(e.$message.success(e.$t("save_success")),window.location.reload())})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))},callback:function(t){console.log(t)},initPage:function(){var t=this,e={taskId:this.taskId};""!=this.taskId&&void 0!=this.taskId&&null!=this.taskId&&this.$axios.post("/task/process/init",e).then((function(e){200!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.process=e.data.retMap.process,t.fail=e.data.retMap.fail)})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))}},watch:{getTaskId:function(t){console.log(t),this.taskId=t,this.initPage()}},computed:{getTaskId:function(){return this.$route.query.taskId},isStop:function(){return!!this.process.taskstatu.startsWith("7")}}},or=rr,nr=Object(l["a"])(or,Zi,Xi,!1,null,"92a9ae96",null),lr=nr.exports,cr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-result",{attrs:{status:"404",title:"404","sub-title":"Sorry, the page you visited does not exist."},scopedSlots:t._u([{key:"extra",fn:function(){return[s("a-button",{attrs:{type:"primary"},on:{click:t.backHome}},[t._v(" Back Home ")])]},proxy:!0}])})},dr=[],ur={name:"errorPage",beforeMount:function(){this.$("body").css("background-image","none")},methods:{backHome:function(){this.$router.push("/home")}}},mr=ur,pr=Object(l["a"])(mr,cr,dr,!1,null,"2c84c040",null),hr=pr.exports,fr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("top-nav"),s("div",{staticClass:"main-container current-stock"},[s("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:t.$t("current_stock")}},[s("template",{slot:"extra"},[t.canOrder?s("a-button",{attrs:{type:"primary",disabled:0==this.selectedRowKeys.length},on:{click:t.batchOrder}},[t._v(" "+t._s(t.$t("batchEdit"))+" ")]):t._e(),t.canEdit?s("a-button",{attrs:{type:"primary"},on:{click:t.addNewStock}},[t._v(" "+t._s(t.$t("add"))+" ")]):t._e(),t.canEdit?s("a-button",{attrs:{type:"danger",disabled:0==t.selectedRowKeys.length},on:{click:t.batchDelete}},[t._v(" "+t._s(t.$t("delete"))+" ")]):t._e(),t.canEdit?s("a-upload",{attrs:{name:"file",multiple:!1,action:this.$axios.defaults.baseURL+"/file/import/stockImport",headers:{token:this.$cookies.get("token")},"show-upload-list":!1},on:{change:t.handleUploadChange}},[s("a-button",[s("a-icon",{attrs:{type:"upload"}}),t._v(" "+t._s(t.$t("input"))+" ")],1)],1):t._e(),this.$store.getters.isResearcher?s("a-upload",{attrs:{name:"file",multiple:!0,action:t.importOrderUrl,headers:{token:this.$cookies.get("token")},"show-upload-list":!1},on:{change:t.handleChange}},[s("a-button",[s("a-icon",{attrs:{type:"upload"}}),t._v(t._s(t.$t("importOrder")))],1)],1):t._e()],1)],2),s("a-table",{attrs:{"data-source":t.data,bordered:"","row-selection":t.rowSelection,pagination:t.pagina,loading:t.tableLoad,columns:t.columns},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var a=e.setSelectedKeys,i=e.selectedKeys,r=e.confirm,o=e.clearFilters,n=e.column;return s("div",{staticStyle:{padding:"8px"}},[s("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{value:i[0]},on:{change:function(t){return a(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(i,r,n.dataIndex)}}}),s("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(i,r,n.dataIndex)}}},[t._v(" "+t._s(t.$t("search"))+" ")]),s("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v(" "+t._s(t.$t("reset"))+" ")])],1)}},{key:"filterIcon",fn:function(t){return s("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},t._l(this.columnNames,(function(e){return{key:e,fn:function(a,i){return[s("div",{key:e},["operation"==e?s("div",[t.canOrder?s("button",{staticClass:"btn btn-primary btn-sm stock-action",attrs:{type:"button",disabled:i.contanernmuber<1||null==i.contanernmuber},on:{click:function(e){return t.makeAppointment(i.id)}}},[t._v(" 预约 ")]):t._e(),t._v(" "),t.canEdit?s("button",{staticClass:"btn btn-primary btn-sm stock-action",attrs:{type:"button"},on:{click:function(e){return t.editStock(i.id)}}},[t._v(" 编辑 ")]):t._e()]):[s("a-tooltip",{attrs:{placement:"topLeft",title:t.showText(a,e,i)}},[t._v(" "+t._s(t.showText(a,e,i))+" ")])]],2)]}}})),{key:"customRender",fn:function(e,a,i){return[[s("a-tooltip",{attrs:{placement:"topLeft",title:t.showText(e,a,i)}},[t._v(" "+t._s(t.showText(e,a,i))+" ")])]]}}],null,!0)})],1),s("AppointmentDialog",{attrs:{"stock-ids":t.orderIds},on:{submitData:t.submitAllData}}),s("submitting",{attrs:{title:t.$t("submitting")}}),s("add-new-stock",{ref:"addNewStock",on:{currentInit:t.initStockTable}})],1)},br=[],gr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{id:"addNewStock",tabindex:"-1",role:"dialog","aria-labelledby":"addNewStockLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"addNewStockLabel"}},[t._v(t._s(t.$t("addNewStock")))]),t._m(0)]),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-4 mb-3"},[s("label",{attrs:{for:"selectStrain"}},[t._v(t._s(t.$t("strain")))]),s("div",{attrs:{id:"selectStrain"}},[s("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","filter-option":t.filterOption},model:{value:t.stock.drosophilaId,callback:function(e){t.$set(t.stock,"drosophilaId",e)},expression:"stock.drosophilaId"}},t._l(t.animals,(function(e){return s("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.selfindex+"-"+e.genotype)+" ")])})),1)],1)]),s("div",{staticClass:"form-group col-md-4 mb-3"},[s("label",{attrs:{for:"container"}},[t._v(t._s(t.$t("animal_stock_container")))]),s("a-input",{attrs:{id:"container"},model:{value:t.stock.contanertype,callback:function(e){t.$set(t.stock,"contanertype",e)},expression:"stock.contanertype"}},[s("icon-font",{attrs:{slot:"prefix",type:"icon-rongqi"},slot:"prefix"})],1)],1),s("div",{staticClass:"form-group col-md-4 mb-3"},[s("label",{attrs:{for:"number"}},[t._v(t._s(t.$t("animal_stock_number")))]),s("div",{attrs:{id:"number"}},[s("a-input-number",{staticStyle:{width:"100%"},attrs:{min:"0"},model:{value:t.stock.contanernmuber,callback:function(e){t.$set(t.stock,"contanernmuber",e)},expression:"stock.contanernmuber"}})],1)]),s("div",{staticClass:"form-group col-md-4 mb-3"},[s("label",{attrs:{for:"useType"}},[t._v(t._s(t.$t("useType")))]),s("div",{attrs:{id:"useType"}},[s("a-select",{staticStyle:{width:"100%"},model:{value:t.stock.usagetype,callback:function(e){t.$set(t.stock,"usagetype",e)},expression:"stock.usagetype"}},[s("a-select-option",{attrs:{value:"keep"}},[t._v(" "+t._s(t.$t("keep"))+" ")]),s("a-select-option",{attrs:{value:"stock"}},[t._v(" "+t._s(t.$t("personnal_btn_stock"))+" ")])],1)],1)]),s("div",{staticClass:"form-group col-md-4 mb-3"},[s("label",{attrs:{for:"environment"}},[t._v(t._s(t.$t("animal_stock_environment")))]),s("div",{attrs:{id:"environment"}},[s("a-select",{staticStyle:{width:"100%"},model:{value:t.stock.environment,callback:function(e){t.$set(t.stock,"environment",e)},expression:"stock.environment"}},t._l(t.envs,(function(e){return s("a-select-option",{key:e.id},[t._v(" "+t._s(e.displayname)+" ")])})),1)],1)]),s("div",{staticClass:"form-group col-md-4 mb-3"},[s("label",{attrs:{for:"location"}},[t._v(t._s(t.$t("location")))]),s("a-input",{attrs:{id:"location"},model:{value:t.stock.location,callback:function(e){t.$set(t.stock,"location",e)},expression:"stock.location"}},[s("icon-font",{attrs:{slot:"prefix",type:"icon-weizhi"},slot:"prefix"})],1)],1),s("div",{staticClass:"form-group col-md-4 mb-3"},[s("label",{attrs:{for:"birthday"}},[t._v(t._s(t.$t("birthday")))]),s("div",{attrs:{id:"birthday"}},[s("date-picker",{attrs:{"value-type":"format",format:"YYYY-MM-DD"},model:{value:t.stock.birthday,callback:function(e){t.$set(t.stock,"birthday",e)},expression:"stock.birthday"}})],1)]),s("div",{staticClass:"form-group col-md-4 mb-3"},[s("label",{attrs:{for:"createContainerTime"}},[t._v(t._s(t.$t("createContainerTime")))]),s("div",{attrs:{id:"createContainerTime"}},[s("date-picker",{attrs:{"value-type":"format",format:"YYYY-MM-DD"},model:{value:t.stock.createtime,callback:function(e){t.$set(t.stock,"createtime",e)},expression:"stock.createtime"}})],1)])])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("cancel")))]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.submitData}},[t._v(t._s(t.$t("confirm")))])])])])])},vr=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],$r=Ds["a"].createFromIconfontCN({scriptUrl:B.alicdnIcon}),yr={name:"addNewStock",components:{IconFont:$r},data:function(){return{stock:{drosophilaId:"",contanertype:"",contanernmuber:0,usagetype:"keep",environment:"",location:"",birthday:new Date,createtime:new Date},animals:[],envs:[]}},beforeMount:function(){this.initPage()},methods:{submitData:function(){var t=this;if(this.checkData()){var e={stock:JSON.stringify(this.stock)};this.$("#addNewStock").modal("hide"),this.$("#submitting").modal("show"),this.$axios.post("/stock/addNewStock",e).then((function(e){t.$("#submitting").modal("hide"),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.$message.success(t.$t("commitSucc")),t.$emit("currentInit"))})).catch((function(e){t.$("#submitting").modal("hide"),console.log(e),t.$message.error(t.$t("systemErr"))}))}},checkData:function(){return B.isNull(this.stock.drosophilaId)?(this.$message.error(this.$t("strain")+this.$t("not_null")),!1):B.isNull(this.stock.contanertype)?(this.$message.error(this.$t("animal_stock_container")+this.$t("not_null")),!1):B.isNull(this.stock.usagetype)?(this.$message.error(this.$t("useType")+this.$t("not_null")),!1):B.isNull(this.stock.environment)?(this.$message.error(this.$t("animal_stock_environment")+this.$t("not_null")),!1):!B.isNull(this.stock.birthday)||(this.$message.error(this.$t("birthday")+this.$t("not_null")),!1)},initPage:function(){var t=this;this.$axios.post("/stock/initAddStockPage").then((function(e){"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.animals=e.data.retMap.animals,t.envs=e.data.retMap.envs)})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0}}},kr=yr,wr=(s("e329"),Object(l["a"])(kr,gr,vr,!1,null,"564d4a42",null)),_r=wr.exports,xr={name:"currentStock",components:{AddNewStock:_r,Submitting:j,AppointmentDialog:Yt,TopNav:ut},data:function(){return{data:[],columns:[],columnNames:[],orderIds:[],selectedList:[],titles:[],rows:[],selectedLine:[],currentPage:0,pageSize:10,total:0,selectedRowKeys:[],selectedRows:[],tableLoad:!1}},beforeMount:function(){this.initStockTable()},methods:{handleChange:function(t){console.log(t),"uploading"==t.file.status?this.$("#submitting").modal("show"):(this.$("#submitting").modal("hide"),"error"==t.file.status?this.$message.error(this.$t("systemErr")):"done"==t.file.status&&this.$message.success(this.$t("commitSucc")))},batchDelete:function(){var t={stockIds:this.selectedRowKeys},e=this;this.$("#submitting").modal("show"),this.$axios.post("/stock/edit/delete",t).then((function(t){e.$("#submitting").modal("hide"),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(e.$message.success(e.$t("commitSucc")),e.initStockTable())})).catch((function(t){e.$("#submitting").modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))},handleUploadChange:function(t){B.commonHandleUploadChange(t)},addNewStock:function(){this.$(this.$refs.addNewStock.$el).modal("show")},batchOrder:function(){this.orderIds=new Array;for(var t=0;t<this.selectedRowKeys.length;t++)this.orderIds.push(this.selectedRowKeys[t]);this.$("#exampleModal").modal()},editStock:function(t){this.$router.push({name:"stockEdit",query:{stockId:t}})},makeAppointment:function(t){event.stopPropagation(),this.orderIds=new Array,this.orderIds.push(t),this.$("#exampleModal").modal("show")},handleSearch:function(t,e,s){e(),this.searchText=t[0],this.searchedColumn=s},handleReset:function(t){t(),this.searchText=""},submitAllData:function(t){this.$("#submitting").modal("show");var e=this;console.log(t),this.$axios.post("/task/askTask",t).then((function(t){console.log(t),e.$("#submitting").modal("hide"),200!=t.data.code?e.$message.error(e.$t(t.data.code)):(e.$message.success(e.$t("commitSucc")),window.location.reload())})).catch((function(t){console.log(t),e.$("#submitting").modal("hide"),e.$message.error(e.$t("systemErr"))}))},initStockTable:function(){this.initColumns();var t=this,e={currentPage:this.currentPage,pageSize:this.pageSize};this.tableLoad=!0,this.$axios.post("/stock/currentStock",e).then((function(e){if(console.log(e),t.tableLoad=!1,"200"!=e.data.code)t.$message.error(t.$t(e.data.code));else{t.data=new Array;var s=e.data.retMap.currentStock;if(null!=s&&s.length>0)for(var a=0;a<s.length;a++){var i=s[a];i.key=i.id,t.data.push(i)}t.selectedRows=[],t.selectedRowKeys=[]}})).catch((function(e){t.tableLoad=!1,console.log(e),t.$message.error(t.$t("systemErr"))}))},showText:function(t,e,s){return console.log(t,e,s),"usagetype"==e?"keep"==s.usagetype?"保种":"库存":"createtime"==e?ht(new Date(s.createtime),"yyyy-MM-dd"):t},initColumns:function(){var t=this,e=new Array;for(var s in e.push({title:"库存编号",dataIndex:"stockindex",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"stockindex"},onFilter:function(t,e){return e.stockindex.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e.push({title:"品系编号",dataIndex:"animal.selfindex",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"animal.selfindex"},onFilter:function(t,e){return e.animal.selfindex.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e.push({title:"stock ID",dataIndex:"animal.stockId",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"animal.stockId"},onFilter:function(t,e){return e.animal.stockId.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e.push({title:"genotype",dataIndex:"animal.genotype",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"animal.genotype"},onFilter:function(t,e){return e.animal.genotype.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e.push({title:"数量",dataIndex:"contanernmuber",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"contanernmuber"},onFilter:function(t,e){return e.contanernmuber.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e.push({title:"用途",dataIndex:"usagetype",ellipsis:!0,scopedSlots:{customRender:"usagetype"},filters:[{text:"保种",value:"keep"},{text:"库存",value:"stock"}],onFilter:function(t,e){return 0===e.usagetype.indexOf(t)}}),e.push({title:"保存环境",dataIndex:"env.displayname",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"env.displayname"},onFilter:function(t,e){return e.env.displayname.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e.push({title:"建管日期",dataIndex:"createtime",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"createtime"},onFilter:function(t,e){var s=ht(new Date(e.createtime),"yyyy-MM-dd");return s.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e.push({title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}),this.columns=e,this.columnNames=new Array,e)this.columnNames.push(e[s].dataIndex)}},computed:{canEdit:function(){for(var t=0;t<this.$store.getters.getUser.roles.length;t++){var e=this.$store.getters.getUser.roles[t];if("999999"==e.roletype||"02"==e.roletype)return!0}return!1},canOrder:function(){for(var t=0;t<this.$store.getters.getUser.roles.length;t++){var e=this.$store.getters.getUser.roles[t];if("999999"==e.roletype||"01"==e.roletype)return!0}return!1},pagina:function(){return{showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","50","100"]}},rowSelection:function(){var t=this,e=this.selectedRowKeys,s=this.selectedRows;return{selectedRowKeys:e,selectedRows:s,onChange:function(e,s){console.log("selectedRowKeys: ".concat(e),"selectedRows: ",s),t.selectedRowKeys=e,t.selectedRows=s},getCheckboxProps:function(t){return{props:{disabled:"09"==t.currentstatu}}}}},importOrderUrl:function(){return this.$axios.defaults.baseURL+"task/import/orderTask"}}},Cr=xr,Sr=(s("7459"),Object(l["a"])(Cr,fr,br,!1,null,"cb8ff546",null)),Ir=Sr.exports,Dr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("top-nav"),s("div",{staticClass:"main-container"},[s("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:t.$t("current_strain")}},[s("template",{slot:"extra"},[this.$store.getters.isFeeder?s("a-popconfirm",{attrs:{disabled:0==t.selectedRowKeys.length,title:t.$t("areyousureDelete")},on:{confirm:function(){return t.deleteAllStrain()}}},[s("a-button",{attrs:{type:"danger",disabled:0==t.selectedRowKeys.length}},[t._v(" "+t._s(t.$t("delete"))+" ")])],1):t._e(),this.$store.getters.isFeeder?s("a-button",{attrs:{type:"primary"},on:{click:t.showAdd}},[t._v(" "+t._s(t.$t("add"))+" ")]):t._e(),this.$store.getters.isFeeder?s("a-upload",{attrs:{name:"file",multiple:!1,"show-upload-list":!1,action:this.$axios.defaults.baseURL+"file/import/initDrop",headers:{token:this.$cookies.get("token")}}},[s("a-button",[s("a-icon",{attrs:{type:"upload"}}),t._v(" "+t._s(t.$t("input"))+" ")],1)],1):t._e()],1)],2),s("a-table",{attrs:{"data-source":t.data,"row-selection":t.rowSelection,pagination:t.pagina,loading:t.tableLoad,columns:t.columns},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var a=e.setSelectedKeys,i=e.selectedKeys,r=e.confirm,o=e.clearFilters,n=e.column;return s("div",{staticStyle:{padding:"8px"}},[s("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{value:i[0]},on:{change:function(t){return a(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(i,r,n.dataIndex)}}}),s("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(i,r,n.dataIndex)}}},[t._v(" "+t._s(t.$t("search"))+" ")]),s("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v(" "+t._s(t.$t("reset"))+" ")])],1)}},{key:"filterIcon",fn:function(t){return s("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},t._l(this.columnNames,(function(e){return{key:e,fn:function(a,i){return[s("div",{key:e},["operation"==e?s("div",["09"!=i.curstatu?s("a-popconfirm",{attrs:{title:t.$t("areyousureDelete")},on:{confirm:function(){return t.delStrainById(i.key)}}},[s("a-button",{staticStyle:{margin:"2px 2px"},attrs:{type:"danger",size:"small"}},[t._v(" "+t._s(t.$t("delete"))+" ")])],1):t._e(),"09"!=i.curstatu?s("a-button",{staticStyle:{margin:"2px 2px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.showEditStrain(i.key)}}},[t._v(" "+t._s(t.$t("edit"))+" ")]):t._e()],1):[s("a-tooltip",{attrs:{placement:"topLeft",title:t.showText(a,e,i)}},[t._v(" "+t._s(t.showText(a,e,i))+" ")])]],2)]}}}))],null,!0)})],1),s("add-new-strain",{on:{submitData:t.submitData}}),s("submitting",{attrs:{title:t.$t("submitting")}}),s("edit-strain",{attrs:{"strain-id":t.strainId},on:{updateStrain:t.updateStrain}})],1)},Nr=[],Pr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{id:"addNewStrain",tabindex:"-1",role:"dialog","aria-labelledby":"addNewStrainLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dialog-scrollable modal-xl"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"addNewStrainLabel"}},[t._v(t._s(t.$t("add")))]),t._m(0)]),s("div",{staticClass:"modal-body",staticStyle:{"text-align":"left"}},[s("form",{staticClass:"was-validated"},[s("a-divider",{attrs:{orientation:"left"}},[t._v(" "+t._s(t.$t("baseInfo"))+" ")]),s("br"),s("div",{staticClass:"form-row"},[s("div",{staticClass:"col-md-3 mb-3"},[s("label",{attrs:{for:"animalName"}},[t._v(t._s(t.$t("animalName")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.animalName,expression:"animalName"}],staticClass:"form-control",attrs:{type:"text",id:"animalName",required:"",placeholder:"例：果蝇"},domProps:{value:t.animalName},on:{input:function(e){e.target.composing||(t.animalName=e.target.value)}}})]),s("div",{staticClass:"form-group col-md-3 mb-3"},[s("label",{attrs:{for:"stockID"}},[t._v(t._s(t.$t("animal_stock_stockID")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.stockID,expression:"stockID"}],staticClass:"form-control",attrs:{type:"text",id:"stockID",required:"",placeholder:"例：bc4f93"},domProps:{value:t.stockID},on:{input:function(e){e.target.composing||(t.stockID=e.target.value)}}})]),s("div",{staticClass:"form-group col-md-3 mb-3"},[s("label",{attrs:{for:"genotype"}},[t._v(t._s(t.$t("animal_stock_genotype")))]),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.genotype,expression:"genotype"}],staticClass:"form-control",attrs:{type:"text",id:"genotype",required:"","aria-describedby":"checkExist",placeholder:"例：w1118"},domProps:{value:t.genotype},on:{input:function(e){e.target.composing||(t.genotype=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button",id:"checkExist",disabled:t.canCheckRepe},on:{click:t.checkExist}},[t._v(t._s(t.$t("checkExist")))])])])]),s("div",{staticClass:"form-group col-md-3 mb-3"},[s("label",{attrs:{for:"resource"}},[t._v(t._s(t.$t("animal_stock_resource")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.resource,expression:"resource"}],staticClass:"form-control",attrs:{type:"text",id:"resource",required:"",placeholder:"例：中科院上化学与细胞生物学研究所果蝇资源与技术平台"},domProps:{value:t.resource},on:{input:function(e){e.target.composing||(t.resource=e.target.value)}}})])]),t._l(t.rows,(function(e,a){return s("div",{key:a,staticClass:"stock-statu"},[s("a-divider",{attrs:{orientation:"left"}},[t._v(t._s(t.$t("personnal_btn_stock"))+" "),t.rows.length<2?s("a-icon",{staticStyle:{"font-size":"24px"},attrs:{type:"plus-square",theme:"twoTone"},on:{click:t.addNewRow}}):t._e(),t.rows.length>1?s("a-icon",{staticStyle:{"font-size":"24px"},attrs:{type:"close-square",theme:"twoTone"},on:{click:function(e){return t.delRow(a)}}}):t._e()],1),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"container"}},[t._v(t._s(t.$t("animal_stock_container")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.container,expression:"row.container"}],staticClass:"form-control",attrs:{type:"text",id:"container",required:"",placeholder:"例：小管"},domProps:{value:e.container},on:{input:function(s){s.target.composing||t.$set(e,"container",s.target.value)}}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"number"}},[t._v(t._s(t.$t("animal_stock_number")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.number,expression:"row.number"}],staticClass:"form-control",attrs:{type:"number",min:"0",id:"number",required:""},domProps:{value:e.number},on:{input:function(s){s.target.composing||t.$set(e,"number",s.target.value)}}})]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"useType"}},[t._v(t._s(t.$t("useType")))]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.useType,expression:"row.useType"}],staticClass:"form-control",attrs:{id:"useType",required:""},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"useType",s.target.multiple?a:a[0])}}},[s("option",{attrs:{value:"keep"}},[t._v(t._s(t.$t("keep")))]),s("option",{attrs:{value:"stock"}},[t._v(t._s(t.$t("personnal_btn_stock")))])])]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"birthday"}},[t._v(t._s(t.$t("birthday")))]),s("div",{attrs:{id:"birthday"}},[s("date-picker",{attrs:{"value-type":"format",format:"YYYY-MM-DD",required:""},model:{value:e.birthday,callback:function(s){t.$set(e,"birthday",s)},expression:"row.birthday"}})],1)]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"environment"}},[t._v(t._s(t.$t("animal_stock_environment")))]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.environmentId,expression:"row.environmentId"}],staticClass:"form-control",attrs:{id:"environment",required:""},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"environmentId",s.target.multiple?a:a[0])}}},[s("option",{attrs:{selected:"",value:""}},[t._v(t._s(t.$t("choose")))]),t._l(t.environment,(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.displayname))])}))],2)]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"location"}},[t._v(t._s(t.$t("location")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.location,expression:"row.location"}],staticClass:"form-control",attrs:{type:"text",id:"location",required:""},domProps:{value:e.location},on:{input:function(s){s.target.composing||t.$set(e,"location",s.target.value)}}})])])],1)}))],2)]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.reset}},[t._v(t._s(t.$t("reset")))]),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:t.submitData}},[t._v(t._s(t.$t("submit")))])])])])])},Rr=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Tr={name:"addNewStrain",data:function(){return{animalName:"",stockID:"",genotype:"",resource:"",environment:[],checkExistFlag:!0,rows:[{container:"",number:0,useType:"keep",birthday:"",environmentId:"",location:""}]}},methods:{delRow:function(t){this.$delete(this.rows,t)},addNewRow:function(){var t={container:"",number:0,useType:"keep",birthday:"",environmentId:"",location:""};this.rows.push(t)},checkSumitData:function(){if(""==this.animalName)return this.$message.error(this.$t("animalName")+this.$t("not_null")),!1;if(""==this.stockID)return this.$message.error(this.$t("animal_stock_stockID")+this.$t("not_null")),!1;if(""==this.genotype)return this.$message.error(this.$t("animal_stock_genotype")+this.$t("not_null")),!1;if(""==this.resource)return this.$message.error(this.$t("animal_stock_resource")+this.$t("not_null")),!1;for(var t in this.rows){var e=this.rows[t];if(""==e.container)return this.$message.error(this.$t("animal_stock_container")+this.$t("not_null")),!1;if(e.number<0)return this.$message.error(this.$t("animal_stock_number")+this.$t("not_null")),!1;if(""==e.useType)return this.$message.error(this.$t("useType")+this.$t("not_null")),!1;if(""==e.birthday)return this.$message.error(this.$t("birthday")+this.$t("not_null")),!1;if(""==e.environmentId)return this.$message.error(this.$t("animal_stock_environment")+this.$t("not_null")),!1;if(""==e.location)return this.$message.error(this.$t("location")+this.$t("not_null")),!1}return!0},submitData:function(){if(this.checkSumitData()){var t={animalName:this.animalName,stockID:this.stockID,genotype:this.genotype,resource:this.resource,rows:this.rows};this.$("#addNewStrain").modal("hide"),this.$emit("submitData",t)}},reset:function(){this.animalName="",this.stockID="",this.genotype="",this.resource="",this.environment=[],this.checkExistFlag=!0,this.rows=[{container:"",number:0,useType:"keep",birthday:"",environmentId:"",location:""}],this.initEvn()},initEvn:function(){var t=this;this.$axios({method:"post",url:"/personal/environment"}).then((function(e){"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):t.environment=e.data.retMap.envs})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},checkExist:function(){var t=this,e={gentype:t.genotype};this.$axios.post("/personal/checkGenTypeExist",e).then((function(e){"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):e.data.retMap.hasExist?t.$message.success(t.$t("animal_stock_genotype")+t.$t("hasExist")):t.$message.success(t.$t("animal_stock_genotype")+t.$t("hasNotExist"))})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))}},beforeMount:function(){this.initEvn()},computed:{submitOk:function(){return!0},canCheckRepe:function(){return""==this.genotype}},watch:{}},jr=Tr,Er=(s("5840"),Object(l["a"])(jr,Pr,Rr,!1,null,"389996b6",null)),Mr=Er.exports,Ar=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{id:"editStrainModal",tabindex:"-1",role:"dialog","aria-labelledby":"editStrainLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"editStrainLabel"}},[t._v(t._s(t.$t("edit")))]),t._m(0)]),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-6 col-sm-12 col-lg-4"},[s("label",{attrs:{for:"selfindex"}},[t._v(t._s(t.$t("animal_stock_stockID")))]),s("a-input",{attrs:{id:"selfindex",disabled:""},model:{value:t.strain.selfindex,callback:function(e){t.$set(t.strain,"selfindex",e)},expression:"strain.selfindex"}},[s("icon-font",{attrs:{slot:"prefix",type:"icon-bianhao"},slot:"prefix"})],1)],1),s("div",{staticClass:"form-group col-md-6 col-sm-12 col-lg-4"},[s("label",{attrs:{for:"animalName"}},[t._v(t._s(t.$t("animalName")))]),s("a-input",{attrs:{id:"animalName"},model:{value:t.strain.name,callback:function(e){t.$set(t.strain,"name",e)},expression:"strain.name"}},[s("icon-font",{attrs:{slot:"prefix",type:"icon-guoying"},slot:"prefix"})],1)],1),s("div",{staticClass:"form-group col-md-6 col-sm-12 col-lg-4"},[s("label",{attrs:{for:"stockID"}},[t._v(t._s("stock id"))]),s("a-input",{attrs:{id:"stockID"},model:{value:t.strain.stockId,callback:function(e){t.$set(t.strain,"stockId",e)},expression:"strain.stockId"}},[s("icon-font",{attrs:{slot:"prefix",type:"icon-bianhao"},slot:"prefix"})],1)],1),s("div",{staticClass:"form-group col-md-6 col-sm-12 col-lg-4"},[s("label",{attrs:{for:"genotype"}},[t._v(t._s(t.$t("animal_stock_genotype")))]),s("a-input",{attrs:{id:"genotype"},model:{value:t.strain.genotype,callback:function(e){t.$set(t.strain,"genotype",e)},expression:"strain.genotype"}},[s("icon-font",{attrs:{slot:"prefix",type:"icon-jiyingongcheng"},slot:"prefix"})],1)],1),s("div",{staticClass:"form-group col-md-6 col-sm-12 col-lg-4"},[s("label",{attrs:{for:"resource"}},[t._v(t._s(t.$t("animal_stock_resource")))]),s("a-input",{attrs:{id:"resource"},model:{value:t.strain.resource,callback:function(e){t.$set(t.strain,"resource",e)},expression:"strain.resource"}},[s("icon-font",{attrs:{slot:"prefix",type:"icon-laiyuan"},slot:"prefix"})],1)],1)])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.submitData}},[t._v(t._s(t.$t("confirm")))])])])])])},Lr=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Or=Ds["a"].createFromIconfontCN({scriptUrl:B.alicdnIcon}),Fr={name:"editStrain",components:{IconFont:Or},props:{strainId:String},data:function(){return{strain:{}}},beforeMount:function(){this.initPage()},methods:{submitData:function(){this.$emit("updateStrain",JSON.stringify(this.strain))},initPage:function(){var t={strainId:this.strainId},e=this;this.$axios.post("/editStrain/init",t).then((function(t){"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):e.strain=t.data.retMap.strain})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))}},watch:{strainId:function(){this.initPage()}}},Ur=Fr,zr=(s("5aff5"),Object(l["a"])(Ur,Ar,Lr,!1,null,"1e1d5d6d",null)),Kr=zr.exports,qr={name:"currentStrainNew",components:{EditStrain:Kr,AddNewStrain:Mr,Submitting:j,TopNav:ut},data:function(){return{data:[],tableLoad:!1,strainId:"",columnNames:[],strains:[],columns:[],selectedRowKeys:[],selectedRows:[],pageSize:10,total:0,currentPage:0}},beforeMount:function(){this.initPage()},methods:{updateStrain:function(t){var e={subData:t},s=this;this.$("#editStrainModal").modal("hide"),this.$("#submitting").modal("show"),this.$axios.post("/strain/update",e).then((function(t){s.$("#submitting").modal("hide"),"200"!=t.data.code?s.$message.error(s.$t(t.data.code)):(s.$message.success(s.$t("save_success")),s.initPage())})).catch((function(t){s.$("#submitting").modal("hide"),console.log(t),s.$message.error(s.$t("systemErr"))}))},showEditStrain:function(t){this.strainId=t,this.$("#editStrainModal").modal("show")},deleteAllStrain:function(){this.delStrainByIds(this.selectedRowKeys)},delStrainById:function(t){var e=[t];this.delStrainByIds(e)},delStrainByIds:function(t){var e={ids:t},s=this;this.$("#submitting").modal("show"),this.$axios.post("/stock/delStrains",e).then((function(t){s.$("#submitting").modal("hide"),"200"!=t.data.code?s.$message.error(s.$t(t.data.code)):(s.$message.success(s.$t("save_success")),s.initPage())})).catch((function(t){s.$("#submitting").modal("hide"),console.log(t),s.$message.error(s.$t("systemErr"))}))},handleReset:function(t){t(),this.searchText=""},handleSearch:function(t,e,s){e(),this.searchText=t[0],this.searchedColumn=s},showText:function(t,e,s){return console.log(t,e,s),"usagetype"==e?"keep"==s.usagetype?"保种":"库存":"createtime"==e?ht(new Date(s.createtime),"yyyy-MM-dd"):t},initPage:function(){var t=this;this.initColumns();var e={pageSize:this.pageSize,currentPage:this.currentPage};this.tableLoad=!0,this.$axios.post("/stock/allStrain",e).then((function(e){if(console.log(e),t.tableLoad=!1,"200"!=e.data.code)t.$message.error(t.$t(e.data.code));else{if(t.strains=e.data.retMap.strains,t.data=new Array,t.strains.length>0)for(var s=0;s<t.strains.length;s++)t.strains[s].key=t.strains[s].id,t.data.push(t.strains[s]);t.selectedRows=[],t.selectedRowKeys=[]}})).catch((function(e){t.tableLoad=!1,console.log(e),t.$message.error(t.$t("systemErr"))}))},initColumns:function(){var t=this,e=new Array;for(var s in e.push({title:"物种",dataIndex:"name",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"name"},onFilter:function(t,e){return e.name.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e.push({title:"编号",dataIndex:"selfindex",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"selfindex"},onFilter:function(t,e){return e.selfindex.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e.push({title:"stock id",dataIndex:"stockId",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"stockId"},onFilter:function(t,e){return e.stockId.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e.push({title:"genotype",dataIndex:"genotype",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"genotype"},onFilter:function(t,e){return e.genotype.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),e.push({title:"resource",dataIndex:"resource",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"resource"},onFilter:function(t,e){return e.resource.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}),this.$store.getters.isFeeder&&e.push({title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}),this.columns=e,this.columnNames=new Array,e)this.columnNames.push(e[s].dataIndex)},showAdd:function(){this.$("#addNewStrain").modal("show")},submitData:function(t){this.$("#submitting").modal("show");var e=this;this.$axios.post("/stock/add",t).then((function(t){e.$("#submitting").modal("hide"),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):e.$message.success(e.$t("save_success"))})).catch((function(t){e.$("#submitting").modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))}},computed:{pagina:function(){return{showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","50","100"],total:this.data.length,showTotal:function(t){return"共 ".concat(t," 条")}}},rowSelection:function(){var t=this,e=this.selectedRowKeys,s=this.selectedRows;return{selectedRowKeys:e,selectedRows:s,onChange:function(e,s){console.log("selectedRowKeys: ".concat(e),"selectedRows: ",s),t.selectedRowKeys=e,t.selectedRows=s},getCheckboxProps:function(t){return{props:{disabled:"09"==t.currentstatu}}}}}}},Vr=qr,Yr=Object(l["a"])(Vr,Dr,Nr,!1,null,"669530ed",null),Hr=Yr.exports;a["a"].use(p["a"]);var Br=[{path:"",component:Z,meta:{index:0}},{path:"/login",component:Z,meta:{index:0}},{path:"/register",component:at,meta:{index:0}},{path:"/home",component:_t,meta:{index:0}},{path:"/personal/animalStock",component:Gt,meta:{index:0}},{path:"/task",component:ee,meta:{index:0}},{path:"/about",component:Aa,meta:{index:0}},{path:"/task/process",component:js,meta:{index:0}},{path:"/stock/edit",name:"stockEdit",component:yi,meta:{index:0}},{path:"/stock/currentStock",name:"currentStock",component:Ir,meta:{index:0}},{path:"/personal/main",name:"personalMain",component:Wi,meta:{index:0}},{path:"/task/askDetail",name:"askDetail",component:ps,meta:{index:0}},{path:"/error",name:"error",component:hr,meta:{index:0}},{path:"/task/partnerDetail",name:"partnerDetail",component:pi,meta:{index:0}},{path:"/task/processDetail",name:"processDetail",component:Pa,meta:{index:0}},{path:"/task/processInit",name:"processInit",component:oi,meta:{index:0}},{path:"/task/processDetailNew",name:"processDetailNew",component:lr,meta:{index:0}},{path:"/task/userAllow",name:"userAllow",component:Cs,meta:{index:0}},{path:"/stock/currentStrain",component:Hr,meta:{index:0}},{path:"/task/resourceOrder",name:"resource",component:Ja,meta:{index:0}},{path:"/*",login:Z,meta:{index:0}}],Jr=new p["a"]({routes:Br}),Gr=Jr,Wr="http://localhost:8081",Zr={baseURLpre:Wr},Xr=s("2b27"),Qr=s.n(Xr),to=s("8237"),eo=s.n(to),so=s("2f62");a["a"].use(so["a"]);var ao=new so["a"].Store({state:{user:{}},mutations:{saveUser:function(t,e){t.user=e}},getters:{getUser:function(t){return t.user},isResearcher:function(t){for(var e=0;e<t.user.roles.length;e++){var s=t.user.roles[e];if("999999"==s.roletype||"01"==s.roletype)return!0}return!1},isFeeder:function(t){for(var e=0;e<t.user.roles.length;e++){var s=t.user.roles[e];if("999999"==s.roletype||"02"==s.roletype)return!0}return!1},isAdmin:function(t){for(var e=0;e<t.user.roles.length;e++){var s=t.user.roles[e];if("999999"==s.roletype)return!0}return!1},isGroupAdmin:function(t){if(t.user.group.groupadmin==t.user.id)return!0},isOther:function(t){for(var e=0;e<t.user.roles.length;e++){var s=t.user.roles[e];if("999999"==s.roletype||"09"==s.roletype)return!0}return!1},isCurrentUser:function(t){return function(e){if(t.user.id==e)return!0;for(var s=0;s<t.user.roles.length;s++){var a=t.user.roles[s];if("999999"==a.roletype)return!0}return!1}}}}),io=(s("202f"),s("f23d")),ro=s("ec45"),oo=(s("411c"),s("8e5f")),no=s.n(oo);a["a"].use(io["a"]),a["a"].component("multiselect",no.a),a["a"].use(ro["a"]),a["a"].prototype.GLOBAL=Zr,a["a"].prototype.$axios=m.a,a["a"].prototype.$=V.a,a["a"].prototype.$md5=eo.a,a["a"].prototype.$cookies=Qr.a,a["a"].prototype.$systemFlag="seqpro",m.a.defaults.baseURL="http://119.90.33.35:3568/",m.a.interceptors.request.use((function(t){var e=Qr.a.get("token");return e&&(t.headers["token"]=e),t}),(function(t){return console.log(t),Promise.reject(t)})),m.a.interceptors.response.use((function(t){return t}),(function(t){if(console.log(t),t.response)switch(t.response.status){case 401:return Qr.a.remove("token"),Gr.replace({path:"/login",query:{redirect:Gr.currentRoute.fullPath}}),Promise.reject("转到登录啦！");default:break}Gr.replace({path:"/error",query:{redirect:Gr.currentRoute.fullPath}})})),Gr.beforeEach((function(t,e,s){if("/register"===t.path)s();else if("/login"===t.path||"/"===t.path){var a=Qr.a.get("token");"null"!=a&&""!=a&&null!=a?s("/home"):s()}else{var i=Qr.a.get("token");"null"===i||""===i||null===i?s("/login"):s()}})),a["a"].config.productionTip=!1,new a["a"]({router:Gr,i18n:K,store:ao,render:function(t){return t(d)}}).$mount("#app")},5840:function(t,e,s){"use strict";var a=s("3168"),i=s.n(a);i.a},"5aff5":function(t,e,s){"use strict";var a=s("126f"),i=s.n(a);i.a},"5edb":function(t,e,s){},"5f8d":function(t,e,s){},6036:function(t,e,s){},"612e":function(t,e,s){"use strict";var a=s("95c7"),i=s.n(a);i.a},"6a1e":function(t,e,s){},"6d69":function(t,e,s){},"6ef6":function(t,e,s){"use strict";var a=s("0980"),i=s.n(a);i.a},"709c":function(t,e,s){},7415:function(t,e,s){},7426:function(t,e,s){},7459:function(t,e,s){"use strict";var a=s("eb69"),i=s.n(a);i.a},"80e4":function(t,e,s){"use strict";var a=s("5f8d"),i=s.n(a);i.a},"85ec":function(t,e,s){},"88c6":function(t,e,s){"use strict";var a=s("f776"),i=s.n(a);i.a},"95c7":function(t,e,s){},"9be2":function(t,e,s){"use strict";var a=s("5edb"),i=s.n(a);i.a},af5f:function(t,e,s){},b1c2:function(t,e,s){"use strict";var a=s("fab5"),i=s.n(a);i.a},cd41:function(t,e,s){},d4a2:function(t,e,s){"use strict";var a=s("7415"),i=s.n(a);i.a},e329:function(t,e,s){"use strict";var a=s("6d69"),i=s.n(a);i.a},eb69:function(t,e,s){},f669:function(t,e,s){"use strict";var a=s("cd41"),i=s.n(a);i.a},f776:function(t,e,s){},f92c:function(t,e,s){"use strict";var a=s("1e51"),i=s.n(a);i.a},fab5:function(t,e,s){},fea1:function(t,e,s){}});
//# sourceMappingURL=app.840232e5.js.map