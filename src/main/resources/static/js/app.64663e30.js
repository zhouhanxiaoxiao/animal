(function(t){function e(e){for(var s,o,n=e[0],l=e[1],c=e[2],u=0,m=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&m.push(i[o][0]),i[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(e);while(m.length)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,n=1;n<a.length;n++){var l=a[n];0!==i[l]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},i={app:0},r=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"003f":function(t,e,a){},"034f":function(t,e,a){"use strict";var s=a("85ec"),i=a.n(s);i.a},"07a6":function(t,e,a){t.exports=a.p+"img/login.747ffcef.png"},"0ab0":function(t,e,a){"use strict";var s=a("49af"),i=a.n(s);i.a},"144a":function(t,e,a){"use strict";var s=a("e269"),i=a.n(s);i.a},"1b6b":function(t,e,a){},"1e51":function(t,e,a){},"257e":function(t,e,a){"use strict";var s=a("469e"),i=a.n(s);i.a},"25c6":function(t,e,a){"use strict";var s=a("7556"),i=a.n(s);i.a},2775:function(t,e,a){},"2f4a":function(t,e,a){"use strict";var s=a("cb08"),i=a.n(s);i.a},3168:function(t,e,a){},"321a":function(t,e,a){"use strict";var s=a("58f5"),i=a.n(s);i.a},"3b75":function(t,e,a){},"3cce":function(t,e,a){},4657:function(t,e,a){},4678:function(t,e,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=r(t);return a(e)}function r(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=r,t.exports=i,i.id="4678"},"469e":function(t,e,a){},"485b":function(t,e,a){"use strict";var s=a("1b6b"),i=a.n(s);i.a},4962:function(t,e,a){"use strict";var s=a("003f"),i=a.n(s);i.a},"49af":function(t,e,a){},"4e60":function(t,e,a){"use strict";var s=a("3b75"),i=a.n(s);i.a},5332:function(t,e,a){"use strict";var s=a("2775"),i=a.n(s);i.a},"552e":function(t,e,a){"use strict";var s=a("fea1"),i=a.n(s);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("d3b7"),a("ac1f"),a("5319"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("transition",{attrs:{name:"fade"}},[a("router-view")],1)],1)},r=[],o={name:"App",data:function(){return{transitionName:"slide-right"}},created:function(){this.$store.commit("saveUser",this.$cookies.get("user"))},components:{},watch:{}},n=o,l=(a("034f"),a("9aa7"),a("2877")),c=Object(l["a"])(n,i,r,!1,null,null,null),d=c.exports,u=(a("ab8b"),a("3e48"),a("04e6"),a("bc3a")),m=a.n(u),p=a("8c4f"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"form-group form-contains"},[t._m(0),a("br"),a("br"),a("br"),a("InputwhitName",{ref:"loginEmail",attrs:{"inp-data":t.loginEmailData},on:{updateData:t.updateLogin}}),a("InputwhitName",{ref:"loginPwd",attrs:{"inp-data":t.loginPwdData},on:{updateData:t.updateLogin}}),t._m(1),a("div",{staticClass:"but-div"},[a("button",{staticClass:"btn btn-primary login-btn",attrs:{type:"button"},on:{click:t.submitLogin}},[t._v(t._s(t.$t("userLogin")))]),a("br"),a("button",{staticClass:"btn btn-light login-btn",attrs:{type:"button"},on:{click:function(e){return t.userRegister()}}},[t._v(t._s(t.$t("userRegister")))])])],1),a("language"),a("submitting",{attrs:{title:t.$t("submitting")}})],1)},f=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("img",{attrs:{src:a("07a6"),width:"100%"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"noPassword"},[a("a",[t._v("忘记密码？")])])}],g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-row input-line"},["checkbox"===t.inpData.inputType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"form-control form-control-sm",class:t.isValidClass,attrs:{placeholder:t.inpData.inputLabel,required:"",type:"checkbox"},domProps:{checked:Array.isArray(t.inputValue)?t._i(t.inputValue,null)>-1:t.inputValue},on:{change:[function(e){var a=t.inputValue,s=e.target,i=!!s.checked;if(Array.isArray(a)){var r=null,o=t._i(a,r);s.checked?o<0&&(t.inputValue=a.concat([r])):o>-1&&(t.inputValue=a.slice(0,o).concat(a.slice(o+1)))}else t.inputValue=i},function(e){return t.updatethisdata()}]}}):"radio"===t.inpData.inputType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"form-control form-control-sm",class:t.isValidClass,attrs:{placeholder:t.inpData.inputLabel,required:"",type:"radio"},domProps:{checked:t._q(t.inputValue,null)},on:{change:[function(e){t.inputValue=null},function(e){return t.updatethisdata()}]}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"form-control form-control-sm",class:t.isValidClass,attrs:{placeholder:t.inpData.inputLabel,required:"",type:t.inpData.inputType},domProps:{value:t.inputValue},on:{change:function(e){return t.updatethisdata()},input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}),a("div",{class:t.showClass},[t._v(" "+t._s(t.inpData.checkMsg)+" ")])])},b=[],v={name:"inputLabel",props:{inpData:{inputLabel:String,inputType:String,inputName:String,checkMsg:String,isValid:String}},data:function(){return{inputValue:"",isValidClass:"",showClass:""}},methods:{updatethisdata:function(){this.$emit("updateData",{ipkey:this.inpData.inputName,ipvalue:this.inputValue})}},watch:{inpData:{handler:function(t){"1"==t.isValid?(this.isValidClass="is-valid",this.showClass="valid-feedback"):"2"==t.isValid?(this.isValidClass="is-invalid",this.showClass="invalid-feedback"):(this.isValidClass="",this.showClass="")},deep:!0},checkMsg:function(t){console.log(t)}}},k=v,y=(a("b1c2"),Object(l["a"])(k,g,b,!1,null,"40ba3a7e",null)),$=y.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-select"},[a("div",{staticClass:"btn-group btn-group-sm btn-group-toggle",attrs:{"data-toggle":"buttons"}},[a("label",{staticClass:"btn btn-link active"},[a("input",{attrs:{type:"radio",name:"options",id:"option1",checked:""},on:{click:function(e){return t.changeLanguage("zh")}}}),t._v(" 中文 ")]),a("span",{staticStyle:{color:"cadetblue"}},[t._v("|")]),a("label",{staticClass:"btn btn-link"},[a("input",{attrs:{type:"radio",name:"options",id:"option3"},on:{click:function(e){return t.changeLanguage("en")}}}),t._v(" English ")])])])},w=[],x={name:"language",methods:{changeLanguage:function(t){localStorage.setItem("local",t),window.location.reload()}}},C=x,S=Object(l["a"])(C,_,w,!1,null,"32bde44a",null),N=S.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal",attrs:{id:"submitting","data-backdrop":"static","data-keyboard":"false",tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.title))])]),t._m(0)])])])},P=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-body"},[a("div",{staticClass:"progress"},[a("div",{staticClass:"progress-bar progress-bar-striped bg-success progress-bar-animated ",staticStyle:{width:"100%"},attrs:{role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"}})])])}],I={name:"submitting",props:{title:String}},T=I,j=Object(l["a"])(T,D,P,!1,null,"7b0c4f0d",null),M=j.exports,E={name:"login",data:function(){return{errMsg:"",loginEmailData:{inputLabel:this.$t("userEmail"),inputType:"text",inputName:"loginEmail",checkMsg:"",isValid:"0"},loginPwdData:{inputLabel:this.$t("userPwd"),inputType:"password",inputName:"loginPwd",checkMsg:"",isValid:"0"},loginEmail:"",loginPwd:""}},methods:{submitLogin:function(){var t=this;this.$axios({method:"post",url:"/login",params:{loginEmail:this.loginEmail,password:this.$md5(this.loginPwd)}}).then((function(e){console.log(e),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.$cookies.set("token",e.data.retMap.token,"1h"),t.$cookies.set("user",e.data.retMap.user,"1h"),t.$store.commit("saveUser",e.data.retMap.user),t.$("body").css("background-image","none"),t.$router.push("/home"))})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},updateLogin:function(t){this[t.ipkey]=t.ipvalue},userRegister:function(){this.$router.push("/register")}},components:{Submitting:M,Language:N,InputwhitName:$}},R=E,A=(a("e353"),Object(l["a"])(R,h,f,!1,null,"61cbec20",null)),O=A.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"form-group form-contains"},[t._m(0),a("InputwhitName",{ref:"registerName",attrs:{"inp-data":t.registerNameData},on:{updateData:t.updateRegister}}),a("InputwhitName",{ref:"registerEmail",attrs:{"inp-data":t.registerEmailData},on:{updateData:t.updateRegister}}),a("InputwhitName",{ref:"registerPwd",attrs:{"inp-data":t.registerPwdData},on:{updateData:t.updateRegister}}),a("InputwhitName",{ref:"registerPwd2",attrs:{"inp-data":t.registerPwd2Data},on:{updateData:t.updateRegister}}),a("div",{staticClass:"input-group mb-3",staticStyle:{"margin-top":"10px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.verificationCode,expression:"verificationCode"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.$t("verification"),"aria-label":"输入验证码","aria-describedby":"get-verification-code"},domProps:{value:t.verificationCode},on:{input:function(e){e.target.composing||(t.verificationCode=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary btn-primary",staticStyle:{color:"white"},attrs:{type:"button",id:"get-verification-code"},on:{click:t.getVerification}},[t._v(t._s(t.$t("getverification"))+" ")])])]),a("div",{class:t.codeShowClass},[t._v(" "+t._s(t.codeStatu)+" ")]),a("div",{staticClass:"but-div"},[a("button",{staticClass:"btn btn-primary login-btn",attrs:{type:"button"},on:{click:function(e){return t.userRegister()}}},[t._v(t._s(t.$t("userRegister"))+" ")]),a("br"),a("button",{staticClass:"btn btn-light login-btn",attrs:{type:"button"},on:{click:function(e){return t.userLogin()}}},[t._v(t._s(t.$t("userLogin")))])])],1),a("language"),a("submitting",{attrs:{title:t.$t("submitting")}})],1)},L=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("img",{attrs:{src:a("07a6"),width:"100%"}})])}],q={name:"register",data:function(){return{errMsg:"",toastsMsg:"",codeTimer:"",regetSec:120,verificationCode:"",codeShowClass:"",codeStatu:"",registerNameData:{inputLabel:this.$t("userName"),inputType:"text",inputName:"registerName",checkMsg:"",isValid:"0"},registerEmailData:{inputLabel:this.$t("userEmail"),inputType:"text",inputName:"registerEmail",checkMsg:"",isValid:"0"},registerPwdData:{inputLabel:this.$t("userPwd"),inputType:"password",inputName:"registerPwd",checkMsg:"",isValid:"0"},registerPwd2Data:{inputLabel:this.$t("userPwd2"),inputType:"password",inputName:"registerPwd2",checkMsg:"",isValid:"0"},registerName:"",registerEmail:"",registerPwd:"",registerPwd2:""}},methods:{userLogin:function(){this.$router.push("/login")},updateRegister:function(t){this[t.ipkey]=t.ipvalue},getVerification:function(){var t=this,e=/^\w{3,}@cibr\.ac\.cn$/;if(!e.test(this.registerEmail))return this.registerEmailData.isValid="2",void(this.registerEmailData.checkMsg=this.$t("userEmailErr"));this.$("#submitting").modal("show"),this.$axios({method:"post",url:"/register/getVerification",params:{registerName:this.registerName,registerEmail:this.registerEmail,registerPwd:this.$md5(this.registerPwd)}}).then((function(e){t.$("#submitting").modal("hide"),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.waitReCode(),t.codeTimer=setInterval((function(){t.waitReCode()}),1e3))})).catch((function(e){t.$("#submitting").modal("hide"),console.log(e),t.$message.error(t.$t("systemErr"))}))},waitReCode:function(){var t=this.$("#get-verification-code").eq(0);""!=t.attr("disabled")&&void 0!=t.attr("disabled")||t.attr("disabled","disabled"),t.hasClass("reCode")||t.addClass("reCode"),t.text(this.regetSec+"秒后重新获取"),this.regetSec--,this.regetSec<1&&(clearInterval(this.codeTimer),t.removeAttr("disabled"),t.removeClass("reCode"),t.text(this.$t("getverification")))},checkData:function(){return"1"==this.registerNameData.isValid&&"1"==this.registerEmailData.isValid&&"1"==this.registerPwdData.isValid&&"1"==this.registerPwd2Data.isValid},userRegister:function(){this.verificationServerCode!=this.verificationCode?(this.codeShowClass="invalid-feedback",this.codeStatu=this.$t("verificationStatuOK")):(this.codeShowClass="invalid-feedback",this.codeStatu=this.$t("verificationStatuErr"));var t=this;this.$("#submitting").modal("show"),this.$axios({method:"post",url:"/register/submit",params:{registerName:this.registerName,registerEmail:this.registerEmail,registerPwd:this.$md5(this.registerPwd),verificationCode:this.verificationCode}}).then((function(e){t.$("#submitting").modal("hide"),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.$message.error(t.$t("registerSucc")),t.$router.push("/login"))})).catch((function(e){t.$("#submitting").modal("hide"),console.log(e),t.$message.error(t.$t("systemErr"))}))}},watch:{registerName:function(t,e){if(""==t&&""!=e)this.registerNameData.isValid="2",this.registerNameData.checkMsg=this.$t("userNameNull");else if(""!=t){var a=/^[0-9a-zA-Z\u4E00-\u9FA5]{2,16}$/;if(!a.test(t))return this.registerNameData.isValid="2",void(this.registerNameData.checkMsg=this.$t("userNameErr"));this.registerNameData.isValid="1",this.registerNameData.checkMsg=""}},registerEmail:function(t,e){if(""==t&&""!=e)this.registerEmailData.isValid="2",this.registerEmailData.checkMsg=this.$t("userEmailNull");else if(""!=t){var a=/^\w{3,}@cibr\.ac\.cn$/;if(!a.test(t))return this.registerEmailData.isValid="2",void(this.registerEmailData.checkMsg=this.$t("userEmailErr"));this.registerEmailData.isValid="1",this.registerEmailData.checkMsg=""}},registerPwd:function(t,e){if(""==t&&""!=e)this.registerPwdData.isValid="2",this.registerPwdData.checkMsg=this.$t("userPwdNull");else if(""!=t){var a=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/;if(t==this.registerPwd2?(this.registerPwd2Data.isValid="1",this.registerPwd2Data.checkMsg=""):""!=this.registerPwd2&&(this.registerPwd2Data.isValid="2",this.registerPwd2Data.checkMsg=this.$t("userPwd2NotSame")),!a.test(t))return this.registerPwdData.isValid="2",void(this.registerPwdData.checkMsg=this.$t("userPwdRegErr"));this.registerPwdData.isValid="1",this.registerPwdData.checkMsg=""}},registerPwd2:function(t,e){if(""==t&&""!=e)this.registerPwd2Data.isValid="2",this.registerPwd2Data.checkMsg=this.$t("userPwd2Null");else if(""!=t){if(t!=this.registerPwd)return this.registerPwd2Data.isValid="2",void(this.registerPwd2Data.checkMsg=this.$t("userPwd2NotSame"));this.registerPwd2Data.isValid="1",this.registerPwd2Data.checkMsg=""}}},components:{Submitting:M,Language:N,InputwhitName:$}},F=q,U=(a("25c6"),Object(l["a"])(F,z,L,!1,null,"768e0d57",null)),V=U.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-nav"),a("div",{staticClass:"main-page"},[a("div",{staticClass:"summary-container"},[a("number-and-name",{attrs:{"num-name":"待处理",number:t.selfTaskNumber},nativeOn:{click:function(e){return t.myTask(e)}}}),a("number-and-name",{attrs:{"num-name":"流转中",number:t.selfTaskNumber},nativeOn:{click:function(e){return t.myTask(e)}}}),a("number-and-name",{attrs:{"num-name":t.$t("current_strain"),number:t.allStrainNumber},nativeOn:{click:function(e){return t.currentStrain(e)}}})],1),a("task-table",{attrs:{"page-location":"home"}})],1)],1)},H=[],K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nav-container"},[s("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[s("router-link",{attrs:{to:"/home"}},[s("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[s("img",{attrs:{src:a("07a6"),width:"250px"}})])]),t._m(0),s("div",{staticClass:"collapse navbar-collapse",staticStyle:{"font-size":"20px"},attrs:{id:"navbarNav"}},[s("ul",{staticClass:"navbar-nav"},[s("li",{staticClass:"nav-item active"},[s("router-link",{attrs:{to:"/home"}},[s("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v(t._s(t.$t("nav_home")))])])],1),s("li",{staticClass:"nav-item dropdown"},[s("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"task",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" "+t._s(t.$t("nav_task"))+" ")]),s("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"task"}},[s("router-link",{attrs:{to:"/task"}},[s("a",{staticClass:"dropdown-item"},[t._v(t._s(t.$t("nav_mytask")))])]),s("router-link",{attrs:{to:"/task/resourceOrder"}},[s("a",{staticClass:"dropdown-item"},[t._v(t._s(t.$t("resourceOrder")))])])],1)]),s("li",{staticClass:"nav-item dropdown"},[s("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"personal",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" "+t._s(t.$t("nav_stock"))+" ")]),s("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"personal"}},[s("router-link",{attrs:{to:"/stock/currentStrain"}},[s("a",{staticClass:"dropdown-item"},[t._v(t._s(t.$t("current_strain")))])]),s("router-link",{attrs:{to:"/personal/animalStock"}},[s("a",{staticClass:"dropdown-item"},[t._v(t._s(t.$t("current_stock")))])])],1)]),s("li",{staticClass:"nav-item active"},[s("router-link",{attrs:{to:"/about"}},[s("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v(t._s(t.$t("about")))])])],1)])]),s("div",[s("language")],1),s("div",{staticClass:"personal-info"},[s("div",{staticStyle:{display:"inline-block","margin-right":"10px"}},[s("a-avatar",{attrs:{size:50,src:t.userHeadSrc},on:{click:t.personalPage}})],1),s("div",{staticClass:"dropdown",staticStyle:{display:"inline-block"}},[s("button",{staticClass:"btn btn-outline-primary dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" "+t._s(t.$t("nav_hello")+" , "+t.userName)+" ")]),s("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[s("a",{staticClass:"dropdown-item",attrs:{id:"personalPage"},on:{click:t.personalPage}},[t._v(t._s(t.$t("nav_personal")))]),s("a",{staticClass:"dropdown-item",attrs:{id:"exit"},on:{click:t.sysExit}},[t._v(t._s(t.$t("exit")))])])])])],1),s("div")])},B=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],J=(a("b0c0"),{name:"TopNav",components:{Language:N},data:function(){return{user:{name:""}}},methods:{sysExit:function(){var t=this;this.$axios({url:"/system/exit",method:"post"}).then((function(e){"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.$cookies.remove("token"),t.$router.push("/login"))})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},personalPage:function(){this.$router.push("/personal/main")}},beforeMount:function(){this.$("body").css("background-image","none"),this.$("body").css("background-color","#e9ecef")},computed:{userName:function(){return this.$store.getters.getUser.name},userId:function(){return this.$store.getters.getUser.id},userHeadSrc:function(){return this.$axios.defaults.baseURL+"user/userHead/"+this.userId+".png"}}}),X=J,Z=(a("4962"),Object(l["a"])(X,K,B,!1,null,"09b6fa09",null)),G=Z.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"num-contain"},[a("div",{staticClass:"number-size"},[t._v(" "+t._s(t.number)+" ")]),a("div",{staticClass:"number-name"},[t._v(" "+t._s(t.numName)+" ")])])},Q=[],tt=(a("a9e3"),{name:"NumberAndName",props:{number:Number,numName:String},data:function(){return{}}}),et=tt,at=(a("80c4"),Object(l["a"])(et,W,Q,!1,null,"3adc40b6",null)),st=at.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-container"},[a("table",{staticClass:"table table-striped table-hover"},[a("thead",{staticClass:"task-head"},[a("tr",[a("th",{attrs:{scope:"col",width:"5%"}},[t._v("#")]),a("th",{attrs:{scope:"col",width:"15%"}},[t._v(t._s(t.$t("tasktype")))]),a("th",{attrs:{scope:"col",width:"15%"}},[t._v(t._s(t.$t("currentstatu")))]),a("th",{attrs:{scope:"col",width:"15%"}},[t._v(t._s(t.$t("creater")))]),a("th",{attrs:{scope:"col",width:"15%"}},[t._v(t._s(t.$t("createTime")))]),a("th",{attrs:{scope:"col",width:"20%"}},[t._v(t._s(t.$t("remarks")))]),a("th",{attrs:{scope:"col",width:"15%"}},[t._v(t._s(t.$t("detail")))])])]),a("tbody",{staticClass:"task-body"},t._l(t.taskList,(function(e,s){return a("tr",{key:e.id},[a("th",{attrs:{scope:"row"}},[t._v(t._s(s+1+(t.currentPage-1)*t.pageSize))]),a("td",[t._v(t._s(t.taskType(e.task)))]),a("td",[a("div",[a("a-progress",{attrs:{percent:t.taskPro(e),size:"small",status:t.taskstatu(e.task)}})],1)]),a("td",[t._v(t._s(e.creater.name))]),a("td",[t._v(t._s(t.format(e.task.createtime)))]),a("td",[t._v(t._s(e.task.taskdesc))]),a("td",[a("button",{staticClass:"btn btn-primary btn-sm stock-action",staticStyle:{"font-size":"12px"},attrs:{type:"button"},on:{click:function(a){return t.showDetail(e)}}},[t._v(t._s(t.$t("detail"))+" ")])])])})),0)]),a("div",{staticClass:"page-div"},[a("a-pagination",{attrs:{"show-size-changer":"","page-size":t.pageSize,total:t.total},on:{"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),a("submitting",{attrs:{title:t.$t("submitting")}})],1)},rt=[];a("4d63"),a("25f0");function ot(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var s in a)if(new RegExp("(".concat(s,")")).test(e)){var i=a[s]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?i:nt(i))}return e}function nt(t){return("00"+t).substr(t.length)}var lt={name:"TaskTable",components:{Submitting:M},props:{pageLocation:String},data:function(){return{currentPage:1,pageSize:10,total:0,taskList:[],taskId:""}},beforeMount:function(){this.initPage()},methods:{initPage:function(){var t=this,e={currentPage:t.currentPage-1,pageSize:t.pageSize,pageLocation:this.pageLocation};t.$axios.post("/task/gatAllTask",e).then((function(e){console.log(e),"200"!=e.data.code?(console.log(e),t.$message.error(t.$t(e.data.code))):(t.total=e.data.retMap.total,t.taskList=e.data.retMap.alltask)})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},updateTable:function(t){this.currentPage=t,this.initPage()},taskType:function(t){var e="";return"01"==t.tasktype?e="账号申请":"02"==t.tasktype?e="使用申请":"03"==t.tasktype?e="流程管理":"04"==t.tasktype&&(e="协助申请"),e},tastStatu:function(t){var e="";return"01"==t.taskstatu?e="进行中":"02"==t.taskstatu?e="任务完成":"03"==t.taskstatu&&(e="任务失败"),e},taskPro:function(t){if("01"==t.task.tasktype)return"01"==t.task.taskstatu?50:100;if("02"==t.task.tasktype){var e=t.ask;return"00"==e.currentstatu?10:"01"==e.currentstatu?30:"02"==e.currentstatu||"03"==e.currentstatu?50:"04"==e.currentstatu?75:100}if("03"==t.task.tasktype){var a=t.process;return"10"==a.taskstatu?10:"20"==a.taskstatu?25:"30"==a.taskstatu?40:"40"==a.taskstatu?55:"50"==a.taskstatu?75:"60"==a.taskstatu?90:100}if("04"==t.task.tasktype){var s=t.partner;return"00"==s.taskstatu?50:(s.taskstatu,100)}},taskstatu:function(t){return"01"==t.taskstatu?"active":"02"==t.taskstatu?"success":"03"==t.taskstatu?"exception":void 0},askremarks:function(t){return"02"==t.task.tasktype?t.ask.remarks:""},format:function(t){var e=new Date(t);return ot(e,"yyyy年MM月dd日")},showDetail:function(t){"02"==t.task.tasktype?this.$router.push({name:"askDetail",query:{taskId:t.task.id}}):"01"==t.task.tasktype?this.$router.push({name:"userAllow",query:{taskId:t.task.id}}):"03"==t.task.tasktype?this.$router.push({name:"processInit",query:{taskId:t.task.id}}):"04"==t.task.tasktype&&this.$router.push({name:"partnerDetail",query:{taskId:t.task.id}})}},computed:{userName:function(){return this.$store.getters.getUser.name}},watch:{userName:function(){this.currentPage=1,this.pageSize=10,this.initPage()},pageSize:function(){this.initPage()},currentPage:function(){this.initPage()}}},ct=lt,dt=(a("485b"),Object(l["a"])(ct,it,rt,!1,null,"5219167e",null)),ut=dt.exports,mt={name:"home",components:{TaskTable:ut,NumberAndName:st,TopNav:G},data:function(){return{allStrainNumber:0,selfTaskNumber:0}},beforeMount:function(){this.initPage()},methods:{initPage:function(){var t=this;this.$axios.post("/home/preview").then((function(e){console.log(e),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.allStrainNumber=e.data.retMap.allStrainNumber,t.selfTaskNumber=e.data.retMap.selfTaskNumber)})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},currentStrain:function(){this.$router.push("/stock/currentStrain")},myTask:function(){this.$router.push("/task")}},watch:{getUserId:function(){this.initPage()}},computed:{getUserId:function(){return this.$store.getters.getUser.id}}},pt=mt,ht=(a("144a"),Object(l["a"])(pt,Y,H,!1,null,"99253a9e",null)),ft=ht.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animal-stock-container"},[a("top-nav"),a("div",{staticClass:"stock-table"},[a("div",{staticClass:"batch-edit"},[a("a-button",{attrs:{type:"primary",disabled:t.selectallDisable},on:{click:t.batchOrder}},[t._v(t._s(t.$t("batchEdit")))]),t._v(" "),this.$store.getters.isResearcher?a("a-upload",{attrs:{name:"file",multiple:!0,action:t.importOrderUrl,headers:{token:this.$cookies.get("token")},"show-upload-list":!1},on:{change:t.handleChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(t._s(t.$t("importOrder")))],1)],1):t._e()],1),a("table",{staticClass:"table table-striped table-hover"},[a("thead",{staticClass:"stock-table-head"},[a("tr",[a("th",{attrs:{scope:"col"}},[a("input",{attrs:{type:"checkbox",id:"selectAll",value:"selectAll"},on:{click:function(e){return t.selectAll("selectAll",e)}}})]),t._l(t.titles,(function(e,s){return a("th",{key:s,attrs:{scope:"col"}},[t._v(t._s(e))])}))],2)]),a("tbody",{staticClass:"stock-table-body"},t._l(t.rows,(function(e){return a("tr",{key:e.id,on:{click:function(e){return t.selectRow(e)}}},[a("th",{staticStyle:{width:"5%"},attrs:{scope:"row"}},[a("input",{staticClass:"form-check-input stock-line-select",attrs:{type:"checkbox",disabled:e.number<1||null==e.number},domProps:{value:e.id},on:{click:function(a){return t.selectAll(e.id,a)}}})]),a("td",{staticStyle:{width:"5%"}},[t._v(" "+t._s(e.index)+" ")]),a("td",{staticStyle:{width:"5%"}},[t._v(" "+t._s(e.selfIndex)+" ")]),a("td",{staticStyle:{width:"5%"}},[t._v(" "+t._s(e.stockID)+" ")]),a("td",{staticStyle:{width:"15%"}},[t._v(" "+t._s(e.genotype)+" ")]),a("td",{staticStyle:{width:"10%"}},[t._v(" "+t._s(e.resource)+" ")]),a("td",{staticStyle:{width:"10%"}},[t._v(" "+t._s(e.container)+" ")]),a("td",{staticStyle:{width:"5%"}},[t._v(" "+t._s(e.number)+" ")]),a("td",{staticStyle:{width:"5%"}},[t._v(" "+t._s(t.usageType(e.usagetype))+" ")]),a("td",{staticStyle:{width:"15%"}},[t._v(" "+t._s(e.environment)+" ")]),a("td",{staticStyle:{width:"10%"}},[t.canOrder?a("button",{staticClass:"btn btn-primary btn-sm stock-action",attrs:{type:"button",disabled:e.number<1||null==e.number},on:{click:function(a){return t.makeAppointment(e.id)}}},[t._v(" 预约 ")]):t._e(),t._v(" "),t.canEdit?a("button",{staticClass:"btn btn-primary btn-sm stock-action",attrs:{type:"button"},on:{click:function(a){return t.editStock(e.id)}}},[t._v(" 编辑 ")]):t._e()])])})),0)]),a("AppointmentDialog",{attrs:{"stock-ids":t.orderIds},on:{submitData:t.submitAllData}}),a("submitting",{attrs:{title:t.$t("submitting")}}),a("div",{staticClass:"page-index-container"},[a("nav",{staticClass:"page-index",attrs:{"aria-label":"Page navigation example "}},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item",on:{click:function(e){return t.updateTable(t.currentPage-1)}}},[a("a",{staticClass:"page-link"},[t._v(t._s(t.$t("previous")))])]),t._l(t.pageTotal,(function(e){return a("li",{key:e,staticClass:"page-item",class:t.currentPage+1==e?"active":"",on:{click:function(a){return t.updateTable(e-1)}}},[a("a",{staticClass:"page-link"},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",on:{click:function(e){return t.updateTable(t.currentPage+1)}}},[a("a",{staticClass:"page-link"},[t._v(t._s(t.$t("next")))])])],2)])])],1)],1)},bt=[],vt=(a("7db0"),a("a434"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-scrollable modal-xl"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.$t("orderDetail")))]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group-sm col-md-3 was-validated"},[a("label",{attrs:{for:"studyDirector"}},[t._v(t._s(t.$t("studyDirector")))]),a("multiselect",{attrs:{id:"studyDirector",options:t.studyDirectors,searchable:!0,"close-on-select":!0,"allow-empty":!1,"show-labels":!1,"track-by":"name",label:"name",required:"",multiple:!0,taggable:!0,placeholder:"例：曲素素"},model:{value:t.selectedStudyDirector,callback:function(e){t.selectedStudyDirector=e},expression:"selectedStudyDirector"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v(t._s(t.$t("noUser")))])])],1),a("div",{staticClass:"form-group-sm col-md-3 was-validated"},[a("label",{attrs:{for:"studyDirector"}},[t._v(t._s(t.$t("supporter")))]),a("multiselect",{attrs:{id:"supporter",options:t.supporters,searchable:!0,"close-on-select":!0,"allow-empty":!1,"show-labels":!1,"track-by":"name",label:"name",required:"",taggable:!0,placeholder:"例：曲素素"},model:{value:t.supporter,callback:function(e){t.supporter=e},expression:"supporter"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v(t._s(t.$t("noUser")))])])],1),a("div",{staticClass:"form-group col-md-2 form-check"},[a("label",{attrs:{for:"urgent"}}),a("switchbox-cont",{attrs:{text:t.$t("urgent"),id:"urgent"},on:{getValue:t.getValue}})],1)]),a("div",[t._v(" "+t._s(t.$t("expectionObject"))+"： ")]),t._l(t.rows,(function(e){return a("order-item-detail",{key:e.stock.id,attrs:{row:e,"all-drosophila":t.allDrosophila,"all-merial":t.allMerial},on:{updateData:t.updateDetailData}})})),a("div",{staticClass:"form-group-sm col-md-12"},[a("label",{attrs:{for:"remarks"}},[t._v(t._s(t.$t("remarks")))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"form-control",attrs:{id:"remarks",placeholder:"例：我很着急",rows:"3"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])],2),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("cancel")))]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:!t.canSubmit},on:{click:t.submitTask}},[t._v(t._s(t.$t("confirm")))])])])])])}),kt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stock-item-detail"},[a("p",[a("button",{staticClass:"btn btn-sm btn-block ",class:t.allReady?"btn-success":"btn-outline-danger",attrs:{type:"button","data-toggle":"collapse","data-target":"#aa"+t.row.stock.id,"aria-expanded":"false","aria-controls":"aa"+t.row.stock.id}},[t._v(" "+t._s(t.btnText)+" ")])]),a("div",{staticClass:"collapse",attrs:{id:"aa"+t.row.stock.id}},[a("div",{staticClass:"card card-body"},[a("div",{staticClass:"form-row task-item-container "},[a("div",{staticClass:"form-group-sm col-md-3 was-validated"},[a("label",{attrs:{for:"Purpose"}},[t._v(t._s(t.$t("purpose")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.purpose,expression:"purpose"}],staticClass:"form-control",attrs:{type:"text",id:"Purpose",required:"",placeholder:"例：药物实验-control-001"},domProps:{value:t.purpose},on:{input:function(e){e.target.composing||(t.purpose=e.target.value)}}})]),a("div",{staticClass:"form-group-sm col-md-3"},[a("label",{attrs:{for:"expectedTime"}},[t._v(t._s(t.$t("expectedTime")))]),a("div",{attrs:{id:"expectedTime"}},[a("date-picker",{attrs:{"value-type":"format",format:"YYYY-MM-DD","disabled-date":t.disabledDate(t.row.stock.usagetype)},model:{value:t.expectedTime,callback:function(e){t.expectedTime=e},expression:"expectedTime"}})],1)]),a("div",{staticClass:"form-group-sm col-md-3"},[a("label",{attrs:{for:"species"}},[t._v(t._s(t.$t("species")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"species",disabled:"",placeholder:"例：果蝇"},domProps:{value:t.row.animal.name}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"strain"}},[t._v(t._s(t.$t("strain")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"strain",disabled:"",placeholder:"例：w1118"},domProps:{value:t.row.animal.stockId}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"virginFly"}},[t._v(t._s(t.$t("virginFly")))]),a("div",{attrs:{id:"virginFly"}},[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.virginFly,expression:"virginFly"}],staticClass:"form-check-input",attrs:{type:"radio",name:"virginFly"+t.row.stock.id,id:"yes"+t.row.stock.id,checked:"",value:"Y"},domProps:{checked:t._q(t.virginFly,"Y")},on:{change:function(e){t.virginFly="Y"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"yes"+t.row.stock.id}},[t._v(t._s(t.$t("yes")))])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.virginFly,expression:"virginFly"}],staticClass:"form-check-input",attrs:{type:"radio",name:"virginFly"+t.row.stock.id,id:"no"+t.row.stock.id,value:"N"},domProps:{checked:t._q(t.virginFly,"N")},on:{change:function(e){t.virginFly="N"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"no"+t.row.stock.id}},[t._v(t._s(t.$t("no")))])])])]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"gender"}},[t._v(t._s(t.$t("gender")))]),a("div",{attrs:{id:"gender"}},[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.gender,expression:"gender"}],staticClass:"form-check-input",attrs:{type:"radio",name:"gender"+t.row.stock.id,id:"male"+t.row.stock.id,checked:"",value:"male"},domProps:{checked:t._q(t.gender,"male")},on:{change:function(e){t.gender="male"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"male"+t.row.stock.id}},[t._v(t._s(t.$t("male")))])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.gender,expression:"gender"}],staticClass:"form-check-input",attrs:{type:"radio",name:"gender"+t.row.stock.id,id:"female"+t.row.stock.id,value:"female"},domProps:{checked:t._q(t.gender,"female")},on:{change:function(e){t.gender="female"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"female"+t.row.stock.id}},[t._v(t._s(t.$t("female")))])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.gender,expression:"gender"}],staticClass:"form-check-input",attrs:{type:"radio",name:"gender"+t.row.stock.id,id:"empty"+t.row.stock.id,value:"empty"},domProps:{checked:t._q(t.gender,"empty")},on:{change:function(e){t.gender="empty"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"empty"+t.row.stock.id}},[t._v(t._s(t.$t("empty")))])])])]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"isHybridizationNecessary"}},[t._v(t._s(t.$t("isHybridizationNecessary")))]),a("div",{attrs:{id:"isHybridizationNecessary"}},[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isHybridizationNecessary,expression:"isHybridizationNecessary"}],staticClass:"form-check-input",attrs:{type:"radio",name:"isHybridizationNecessary"+t.row.stock.id,id:"yes2"+t.row.stock.id,value:"Y"},domProps:{checked:t._q(t.isHybridizationNecessary,"Y")},on:{change:function(e){t.isHybridizationNecessary="Y"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"yes2"+t.row.stock.id}},[t._v(t._s(t.$t("yes")))])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isHybridizationNecessary,expression:"isHybridizationNecessary"}],staticClass:"form-check-input",attrs:{type:"radio",name:"isHybridizationNecessary"+t.row.stock.id,id:"no2"+t.row.stock.id,checked:"",value:"N"},domProps:{checked:t._q(t.isHybridizationNecessary,"N")},on:{change:function(e){t.isHybridizationNecessary="N"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"no2"+t.row.stock.id}},[t._v(t._s(t.$t("no")))])])])]),a("div",{staticClass:"form-group-sm col-md-3",class:"Y"==t.isHybridizationNecessary?"was-validated":""},[a("label",{attrs:{for:"hybridStrain"}},[t._v(t._s(t.$t("hybridStrain")))]),a("multiselect",{attrs:{id:"hybridStrain",options:t.allDrosophila,searchable:!0,"close-on-select":!0,"allow-empty":"N"==t.isHybridizationNecessary,disabled:"N"==t.isHybridizationNecessary,"show-labels":!1,"track-by":"genotype",label:"genotype"},model:{value:t.hybridStrain,callback:function(e){t.hybridStrain=e},expression:"hybridStrain"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"})])],1),a("div",{staticClass:"form-group-sm col-md-3"},[a("label",{attrs:{for:"specialFeeding"}},[t._v(t._s(t.$t("specialFeeding")))]),a("div",{attrs:{id:"specialFeeding"}},[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.specialFeeding,expression:"specialFeeding"}],staticClass:"form-check-input",attrs:{type:"radio",name:"specialFeeding"+t.row.stock.id,id:"yes3"+t.row.stock.id,value:"N"},domProps:{checked:t._q(t.specialFeeding,"N")},on:{change:function(e){t.specialFeeding="N"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"yes3"+t.row.stock.id}},[t._v(t._s(t.$t("normal")))])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.specialFeeding,expression:"specialFeeding"}],staticClass:"form-check-input",attrs:{type:"radio",name:"specialFeeding"+t.row.stock.id,id:"no3"+t.row.stock.id,checked:"",value:"Y"},domProps:{checked:t._q(t.specialFeeding,"Y")},on:{change:function(e){t.specialFeeding="Y"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"no3"+t.row.stock.id}},[t._v(t._s(t.$t("special")))])])])]),a("div",{staticClass:"form-group-sm col-md-3",class:"Y"==t.specialFeeding?"was-validated":""},[a("label",{attrs:{for:"specificFeeding"}},[t._v(t._s(t.$t("specificFeeding")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.specificFeeding,expression:"specificFeeding"}],staticClass:"form-control",attrs:{type:"text",id:"specificFeeding",disabled:"N"==t.specialFeeding,required:"Y"==t.specialFeeding,placeholder:"例：无"},domProps:{value:t.specificFeeding},on:{input:function(e){e.target.composing||(t.specificFeeding=e.target.value)}}})]),a("div",{staticClass:"form-group-sm col-md-3"},[a("label",{attrs:{for:"age"}},[t._v(t._s(t.$t("age")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.age,expression:"age"}],staticClass:"form-control",class:t.age>=0?"is-valid":"is-invalid",attrs:{type:"number",id:"age",placeholder:"例：2"},domProps:{value:t.age},on:{input:function(e){e.target.composing||(t.age=e.target.value)}}})]),a("div",{staticClass:"form-group-sm col-md-3"},[a("label",{attrs:{for:"orderNumber"}},[t._v(t._s(t.$t("orderNumber")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderNumber,expression:"orderNumber"}],staticClass:"form-control",class:t.orderNumber>0?"is-valid":"is-invalid",attrs:{type:"number",id:"orderNumber",placeholder:"例：36"},domProps:{value:t.orderNumber},on:{input:function(e){e.target.composing||(t.orderNumber=e.target.value)}}})]),a("div",{staticClass:"form-group-sm col-md-12"},[a("label",{attrs:{for:"operationProcess"}},[t._v(t._s(t.$t("operationProcess")))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.operationProcess,expression:"operationProcess"}],staticClass:"form-control",attrs:{id:"operationProcess",placeholder:"例：转管，喂食：先CO2麻醉，转移到新的管子，喂食含有染料的蔗糖水",rows:"2"},domProps:{value:t.operationProcess},on:{input:function(e){e.target.composing||(t.operationProcess=e.target.value)}}})])])])])])},$t=[],_t=a("c1df"),wt=a.n(_t),xt={name:"OrderItemDetail",props:{row:Object,allDrosophila:Array,allMerial:Array},data:function(){return{value2:[],showTimeRangePanel:!1,purpose:"",operationProcess:"",expectedTime:"",virginFly:"Y",gender:"male",isHybridizationNecessary:"N",hybridStrain:"",specialFeeding:"N",specificFeeding:"",age:0,orderNumber:0,singleSource:[],allReady:!1,meterial:[],needWy:"N",wyTime:[],needPhoto:"N",photoTime:[]}},methods:{moment:wt.a,range:function(t,e){for(var a=[],s=t;s<e;s++)a.push(s);return a},disableHour:function(t){console.log(t);var e=[];for(var a in this.allMerial)this.allMerial[a].id==t&&(e=this.allMerial[a].records);console.log(e);var s=this;return function(t,a){return console.log(t,a),void 0==t||0==t.length||2==t.length||1==t.length||("start"===a||"end"===a?{disabledHours:function(){var a=s.range(0,24),i=new Date,r=new Date(i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate());for(var o in e){var n=new Date(e[o].starttime),l=new Date(e[o].endtime);if(ot(t.toDate(),"yyyy-MM-dd")==ot(n,"yyyy-MM-dd")&&ot(t.toDate(),"yyyy-MM-dd")==ot(l,"yyyy-MM-dd"))for(var c=n.getHours();c<l.getHours();c++)for(var d=a.length-1;d>-1;d--)a[d]==c&&a.splice(d,1)}if(ot(t.toDate(),"yyyy-MM-dd")==ot(r,"yyyy-MM-dd"))for(var u=0;u<i.getHours();u++)for(var m=a.length-1;m>-1;m--)a[m]==u&&a.splice(m,1);return console.log(a),s.range(0,24).splice(4,20)}}:void 0)}},disabledMeterDate:function(t){var e=[];for(var a in this.allMerial)this.allMerial[a].id==t&&(e=this.allMerial[a].records);return function(t){var a=new Date,s=new Date(a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate());if(t<s)return!0;for(var i in e)if(t>new Date(e[i].starttime)&&t<new Date(e[i].endtime))return!0}},onChange:function(t,e){console.log("From: ",t[0],", to: ",t[1]),console.log("From: ",e[0],", to: ",e[1])},toggleTimeRangePanel:function(){this.showTimeRangePanel=!this.showTimeRangePanel},handleRangeClose:function(){this.showTimeRangePanel=!1},disableSelct:function(t){return t<new Date},handleData:function(){this.allReady=this.checkData();var t="";"Y"==this.isHybridizationNecessary&&(t=this.hybridStrain.id);var e={purpose:this.purpose,expectedTime:this.expectedTime,virginFly:this.virginFly,gender:this.gender,isHybridizationNecessary:this.isHybridizationNecessary,hybridStrainId:t,specialFeeding:this.specialFeeding,specificFeeding:this.specificFeeding,age:this.age,operationProcess:this.operationProcess,orderNumber:this.orderNumber,allReady:this.allReady};this.$emit("updateData",{pkid:this.row.stock.id,data:e})},checkData:function(){return("Y"!=this.isHybridizationNecessary||""!=this.hybridStrain)&&(("Y"!=this.specialFeeding||""!=this.specificFeeding)&&(""!=this.purpose&&(""!=this.expectedTime&&(!(this.age<0)&&!(this.orderNumber<=0)))))},disabledDate:function(t){console.log(t);var e=14;return"stock"==t&&(e=0),function(t){var a=Date.now(),s=a+864e5*e;return t.getTime()<new Date(s)}}},watch:{purpose:function(){this.handleData()},expectedTime:function(){this.handleData()},species:function(){this.handleData()},strain:function(){this.handleData()},virginFly:function(){this.handleData()},gender:function(){this.handleData()},isHybridizationNecessary:function(t){"N"==t&&(this.hybridStrain=""),this.handleData()},hybridStrain:function(t){console.log(t),this.handleData()},specialFeeding:function(t){"N"==t&&(this.specificFeeding=""),this.handleData()},specificFeeding:function(){this.handleData()},age:function(){this.handleData()},orderNumber:function(){this.handleData()},needWy:function(t){"N"==t&&(this.wyTime=""),this.handleData()},needPhoto:function(t){"N"==t&&(this.photoTime=""),this.handleData()},photoTime:function(t){console.log(t),this.handleData()},wyTime:function(){this.handleData()}},computed:{btnText:function(){var t=this.row.animal.genotype;return this.allReady?t+="("+this.$t("completeInformation")+")":t+="("+this.$t("incompleteInformation")+")",t}}},Ct=xt,St=Object(l["a"])(Ct,yt,$t,!1,null,"21f87977",null),Nt=St.exports,Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"RadioStyle"},[a("div",{staticClass:"switch-all Block PaddingL"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],attrs:{type:"checkbox",id:"love1"},domProps:{checked:Array.isArray(t.value)?t._i(t.value,null)>-1:t.value},on:{change:[function(e){var a=t.value,s=e.target,i=!!s.checked;if(Array.isArray(a)){var r=null,o=t._i(a,r);s.checked?o<0&&(t.value=a.concat([r])):o>-1&&(t.value=a.slice(0,o).concat(a.slice(o+1)))}else t.value=i},t.returnValue]}}),a("label",{attrs:{for:"love1"}},[t._v(t._s(t.text))])])])},Pt=[],It={name:"SwitchboxCont",props:{text:String},data:function(){return{value:!1}},methods:{returnValue:function(){this.$emit("getValue",this.value)}}},Tt=It,jt=(a("f92c"),Object(l["a"])(Tt,Dt,Pt,!1,null,"395ba402",null)),Mt=jt.exports,Et={name:"AppointmentDialog",components:{SwitchboxCont:Mt,OrderItemDetail:Nt},props:{stockIds:Array},data:function(){return{rows:[],orderList:{},selectedStudyDirector:[],supporter:{},remarks:"",supporters:[],studyDirectors:[],allDrosophila:[],detailData:{},urgent:"",allMerial:[]}},methods:{updateDetailData:function(t){this.$set(this.detailData,t.pkid,t.data)},submitTask:function(){for(var t=new Array,e=0;e<this.selectedStudyDirector.length;e++)t.push(this.selectedStudyDirector[e].id);var a={selectedStudyId:t,remarks:this.remarks,urgent:this.urgent,supporter:this.supporter.id,detailData:this.detailData};this.$emit("submitData",{postData:a}),this.$("#exampleModal").modal("hide")},getValue:function(t){this.urgent=t?"1":"0"}},watch:{stockIds:function(t,e){var a=!0;if(t.length==e.length)for(var s=0;s<t.length;s++)for(var i=0;i<e.length;i++)t[s]!=e[i]&&(a=!1);else a=!1;if(!a){var r={stockIds:t},o=this;this.$axios.post("/orderTask/init",r).then((function(t){if("200"!=t.data.code)o.$message.error(o.$t(t.data.code));else for(var e in console.log(t),o.rows=t.data.retMap.stockTable,o.studyDirectors=t.data.retMap.researchers,o.allDrosophila=t.data.retMap.allDrosophila,o.supporters=t.data.retMap.supporters,o.allMerial=t.data.retMap.allMerial,o.detailData)o.$delete(o.detailData,e)})).catch((function(t){console.log(t),o.$message.error(o.$t("systemErr"))}))}}},computed:{canSubmit:function(){var t=0;for(var e in this.detailData){if(!this.detailData[e].allReady)return!1;t+=1}return t==this.rows.length&&(0!=this.selectedStudyDirector.length&&(""!=this.purpose&&""!=this.expectedTime))}}},Rt=Et,At=(a("6e85"),Object(l["a"])(Rt,vt,kt,!1,null,"8d8bce1e",null)),Ot=At.exports,zt={name:"AnimalStock",components:{Submitting:M,AppointmentDialog:Ot,TopNav:G},data:function(){return{orderIds:[],selectedList:[],titles:[],rows:[],selectedLine:[],currentPage:0,pageSize:10,total:0}},beforeMount:function(){this.initStockTable()},methods:{handleChange:function(t){console.log(t),"uploading"==t.file.status?this.$("#submitting").modal("show"):(this.$("#submitting").modal("hide"),"error"==t.file.status?this.$message.error(this.$t("systemErr")):"done"==t.file.status&&this.$message.success(this.$t("commitSucc")))},initStockTable:function(){var t=this,e={currentPage:this.currentPage,pageSize:this.pageSize};this.$axios.post("/stock/getAll",e).then((function(e){if(console.log(e),"200"!=e.data.code)t.$message.error(t.$t(e.data.code));else{var a=e.data.retMap.stockTable;if(t.total=e.data.retMap.totalnumber,t.titles=new Array,t.titles.push("#"),t.titles.push("编号"),t.titles.push("stock ID"),t.titles.push("genotype"),t.titles.push("resource"),t.titles.push("容器类型"),t.titles.push("数量"),t.titles.push("用途"),t.titles.push("保存环境"),t.titles.push("操作"),t.rows=new Array,null!=a&&a.length>0)for(var s=0;s<a.length;s++){var i=a[s],r={id:i.stock.id,index:s+t.currentPage*t.pageSize+1,selfIndex:i.animal.selfindex,stockID:i.animal.stockId,genotype:i.animal.genotype,resource:i.animal.resource,container:i.stock.contanertype,number:i.stock.contanernmuber,usagetype:i.stock.usagetype,environment:i.env.displayname?i.env.displayname:""};t.rows.push(r)}}})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},editStock:function(t){this.$router.push({name:"stockEdit",query:{stockId:t}})},selectAll:function(t,e){if(event.stopPropagation(),"selectAll"==t)e.currentTarget.checked?this.$(".stock-line-select:not(:checked)").click():this.$(".stock-line-select:checked").click();else if(e.currentTarget.checked)this.selectedList.push(e.currentTarget.value);else if(null!=this.selectedList&&this.selectedList.length>0){for(var a=-1,s=0;s<this.selectedList.length;s++)if(this.selectedList[s]==e.currentTarget.value){a=s;break}-1!=a&&this.selectedList.splice(a,1)}},selectRow:function(t){event.stopPropagation(),this.$(t.currentTarget).find(".stock-line-select").click()},updateTable:function(t){t<0||t>=Math.ceil(this.total/this.pageSize)||(this.selectedList=new Array,this.currentPage=t,this.initStockTable())},makeAppointment:function(t){event.stopPropagation(),this.orderIds=new Array,this.orderIds.push(t),this.$("#exampleModal").modal("show")},batchOrder:function(){this.orderIds=new Array;for(var t=0;t<this.selectedList.length;t++)this.orderIds.push(this.selectedList[t]);this.$("#exampleModal").modal()},submitAllData:function(t){this.$("#submitting").modal("show");var e=this;console.log(t),this.$axios.post("/task/askTask",t).then((function(t){console.log(t),e.$("#submitting").modal("hide"),200!=t.data.code?e.$message.error(e.$t(t.data.code)):(e.$message.success(e.$t("commitSucc")),window.location.reload())})).catch((function(t){console.log(t),e.$("#submitting").modal("hide"),e.$message.error(e.$t("systemErr"))}))},usageType:function(t){return"keep"==t?this.$t("keep"):"stock"==t?this.$t("personnal_btn_stock"):t}},computed:{pageTotal:function(){for(var t=Math.ceil(this.total/this.pageSize),e=new Array,a=0;a<t;a++)e.push(a+1);return e},selectallDisable:function(){return 0==this.selectedList.length},canEdit:function(){for(var t=0;t<this.$store.getters.getUser.roles.length;t++){var e=this.$store.getters.getUser.roles[t];if("999999"==e.roletype||"02"==e.roletype)return!0}return!1},canOrder:function(){for(var t=0;t<this.$store.getters.getUser.roles.length;t++){var e=this.$store.getters.getUser.roles[t];if("999999"==e.roletype||"01"==e.roletype)return!0}return!1},importOrderUrl:function(){return this.$axios.defaults.baseURL+"task/import/orderTask"}}},Lt=zt,qt=(a("5332"),Object(l["a"])(Lt,gt,bt,!1,null,"82cd4a48",null)),Ft=qt.exports,Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-nav"),a("div",{staticClass:"task-main"},[a("task-table",{attrs:{"page-location":"mytask"}})],1)],1)},Vt=[],Yt={name:"TaskMain",components:{TaskTable:ut,TopNav:G}},Ht=Yt,Kt=(a("0ab0"),Object(l["a"])(Ht,Ut,Vt,!1,null,"314dc4a6",null)),Bt=Kt.exports,Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"current-strain"},[a("top-nav"),a("div",{staticClass:"current-strain-container"},[a("div",{staticClass:"sumarry-info row justify-content-between"},[a("div",{staticClass:"input-group page-size-select col-4"},[a("div",{staticClass:"input-group-prepend"},[a("label",{staticClass:"input-group-text",attrs:{for:"pageSizeSelect"}},[t._v("共"+t._s(t.total)+"条，每页显示：")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.pageSize,expression:"pageSize"}],staticClass:"custom-select",attrs:{id:"pageSizeSelect"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.pageSize=e.target.multiple?a:a[0]},function(e){return t.updateTable(t.currentPage)}]}},[a("option",{domProps:{value:10}},[t._v("10")]),a("option",{domProps:{value:20}},[t._v("20")]),a("option",{domProps:{value:50}},[t._v("50")])])]),a("div",{staticClass:"col-4",staticStyle:{"text-align":"right"}},[this.$store.getters.isFeeder?a("a-button",{attrs:{type:"primary"},on:{click:t.showAdd}},[t._v(" "+t._s(t.$t("add"))+" ")]):t._e(),t._v(" "),a("a-upload",{attrs:{name:"file",multiple:!1,action:this.$axios.defaults.baseURL+"file/import/initDrop",headers:{token:this.$cookies.get("token")}}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(t._s(t.$t("input")))],1)],1)],1)]),a("div",{staticClass:"strain-table"},[a("table",{staticClass:"table table-striped table-hover"},[t._m(0),a("tbody",{staticClass:"table-body"},t._l(t.strains,(function(e,s){return a("tr",{key:e.id},[a("th",{attrs:{scope:"row"}},[t._v(t._s(s+1+t.currentPage*t.pageSize))]),a("td",[t._v(t._s(e.selfindex))]),a("td",[t._v(t._s(e.stockId))]),a("td",[t._v(t._s(e.genotype))]),a("td",[t._v(t._s(e.resource))])])})),0)])]),a("div",{staticClass:"page-index-container"},[a("nav",{staticClass:"page-index",attrs:{"aria-label":"Page navigation example "}},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item",on:{click:function(e){return t.updateTable(t.currentPage-1)}}},[a("a",{staticClass:"page-link"},[t._v(t._s(t.$t("previous")))])]),t._l(t.pageTotal,(function(e){return a("li",{key:e,staticClass:"page-item",class:t.currentPage+1==e?"active":"",on:{click:function(a){return t.updateTable(e-1)}}},[a("a",{staticClass:"page-link"},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",on:{click:function(e){return t.updateTable(t.currentPage+1)}}},[a("a",{staticClass:"page-link"},[t._v(t._s(t.$t("next")))])])],2)])])]),a("add-new-strain",{on:{submitData:t.submitData}}),a("submitting",{attrs:{title:t.$t("submitting")}})],1)},Xt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"table-head"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("编号")]),a("th",{attrs:{scope:"col"}},[t._v("stock id")]),a("th",{attrs:{scope:"col"}},[t._v("genotype")]),a("th",{attrs:{scope:"col"}},[t._v("resource")])])])}],Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"addNewStrain",tabindex:"-1",role:"dialog","aria-labelledby":"addNewStrainLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-scrollable modal-xl"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"addNewStrainLabel"}},[t._v(t._s(t.$t("add")))]),t._m(0)]),a("div",{staticClass:"modal-body",staticStyle:{"text-align":"left"}},[a("form",{staticClass:"was-validated"},[a("a-divider",{attrs:{orientation:"left"}},[t._v(" "+t._s(t.$t("baseInfo"))+" ")]),a("br"),a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-md-3 mb-3"},[a("label",{attrs:{for:"animalName"}},[t._v(t._s(t.$t("animalName")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.animalName,expression:"animalName"}],staticClass:"form-control",attrs:{type:"text",id:"animalName",required:"",placeholder:"例：果蝇"},domProps:{value:t.animalName},on:{input:function(e){e.target.composing||(t.animalName=e.target.value)}}})]),a("div",{staticClass:"form-group col-md-3 mb-3"},[a("label",{attrs:{for:"stockID"}},[t._v(t._s(t.$t("animal_stock_stockID")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.stockID,expression:"stockID"}],staticClass:"form-control",attrs:{type:"text",id:"stockID",required:"",placeholder:"例：bc4f93"},domProps:{value:t.stockID},on:{input:function(e){e.target.composing||(t.stockID=e.target.value)}}})]),a("div",{staticClass:"form-group col-md-3 mb-3"},[a("label",{attrs:{for:"genotype"}},[t._v(t._s(t.$t("animal_stock_genotype")))]),a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.genotype,expression:"genotype"}],staticClass:"form-control",attrs:{type:"text",id:"genotype",required:"","aria-describedby":"checkExist",placeholder:"例：w1118"},domProps:{value:t.genotype},on:{input:function(e){e.target.composing||(t.genotype=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button",id:"checkExist",disabled:t.canCheckRepe},on:{click:t.checkExist}},[t._v(t._s(t.$t("checkExist")))])])])]),a("div",{staticClass:"form-group col-md-3 mb-3"},[a("label",{attrs:{for:"resource"}},[t._v(t._s(t.$t("animal_stock_resource")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.resource,expression:"resource"}],staticClass:"form-control",attrs:{type:"text",id:"resource",required:"",placeholder:"例：中科院上化学与细胞生物学研究所果蝇资源与技术平台"},domProps:{value:t.resource},on:{input:function(e){e.target.composing||(t.resource=e.target.value)}}})])]),t._l(t.rows,(function(e,s){return a("div",{key:s,staticClass:"stock-statu"},[a("a-divider",{attrs:{orientation:"left"}},[t._v(t._s(t.$t("personnal_btn_stock"))+" "),t.rows.length<2?a("a-icon",{staticStyle:{"font-size":"24px"},attrs:{type:"plus-square",theme:"twoTone"},on:{click:t.addNewRow}}):t._e(),t.rows.length>1?a("a-icon",{staticStyle:{"font-size":"24px"},attrs:{type:"close-square",theme:"twoTone"},on:{click:function(e){return t.delRow(s)}}}):t._e()],1),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"container"}},[t._v(t._s(t.$t("animal_stock_container")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.container,expression:"row.container"}],staticClass:"form-control",attrs:{type:"text",id:"container",required:"",placeholder:"例：小管"},domProps:{value:e.container},on:{input:function(a){a.target.composing||t.$set(e,"container",a.target.value)}}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"number"}},[t._v(t._s(t.$t("animal_stock_number")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.number,expression:"row.number"}],staticClass:"form-control",attrs:{type:"number",min:"0",id:"number",required:""},domProps:{value:e.number},on:{input:function(a){a.target.composing||t.$set(e,"number",a.target.value)}}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"useType"}},[t._v(t._s(t.$t("useType")))]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.useType,expression:"row.useType"}],staticClass:"form-control",attrs:{id:"useType",required:""},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"useType",a.target.multiple?s:s[0])}}},[a("option",{attrs:{value:"keep"}},[t._v(t._s(t.$t("keep")))]),a("option",{attrs:{value:"stock"}},[t._v(t._s(t.$t("personnal_btn_stock")))])])]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"birthday"}},[t._v(t._s(t.$t("birthday")))]),a("div",{attrs:{id:"birthday"}},[a("date-picker",{attrs:{"value-type":"format",format:"YYYY-MM-DD",required:""},model:{value:e.birthday,callback:function(a){t.$set(e,"birthday",a)},expression:"row.birthday"}})],1)]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"environment"}},[t._v(t._s(t.$t("animal_stock_environment")))]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.environmentId,expression:"row.environmentId"}],staticClass:"form-control",attrs:{id:"environment",required:""},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"environmentId",a.target.multiple?s:s[0])}}},[a("option",{attrs:{selected:"",value:""}},[t._v(t._s(t.$t("choose")))]),t._l(t.environment,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.displayname))])}))],2)]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"location"}},[t._v(t._s(t.$t("location")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.location,expression:"row.location"}],staticClass:"form-control",attrs:{type:"text",id:"location",required:""},domProps:{value:e.location},on:{input:function(a){a.target.composing||t.$set(e,"location",a.target.value)}}})])])],1)}))],2)]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.reset}},[t._v(t._s(t.$t("reset")))]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:t.submitData}},[t._v(t._s(t.$t("submit")))])])])])])},Gt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Wt={name:"addNewStrain",data:function(){return{animalName:"",stockID:"",genotype:"",resource:"",environment:[],checkExistFlag:!0,rows:[{container:"",number:0,useType:"keep",birthday:"",environmentId:"",location:""}]}},methods:{delRow:function(t){this.$delete(this.rows,t)},addNewRow:function(){var t={container:"",number:0,useType:"keep",birthday:"",environmentId:"",location:""};this.rows.push(t)},checkSumitData:function(){if(""==this.animalName)return this.$message.error(this.$t("animalName")+this.$t("not_null")),!1;if(""==this.stockID)return this.$message.error(this.$t("animal_stock_stockID")+this.$t("not_null")),!1;if(""==this.genotype)return this.$message.error(this.$t("animal_stock_genotype")+this.$t("not_null")),!1;if(""==this.resource)return this.$message.error(this.$t("animal_stock_resource")+this.$t("not_null")),!1;for(var t in this.rows){var e=this.rows[t];if(""==e.container)return this.$message.error(this.$t("animal_stock_container")+this.$t("not_null")),!1;if(e.number<0)return this.$message.error(this.$t("animal_stock_number")+this.$t("not_null")),!1;if(""==e.useType)return this.$message.error(this.$t("useType")+this.$t("not_null")),!1;if(""==e.birthday)return this.$message.error(this.$t("birthday")+this.$t("not_null")),!1;if(""==e.environmentId)return this.$message.error(this.$t("animal_stock_environment")+this.$t("not_null")),!1;if(""==e.location)return this.$message.error(this.$t("location")+this.$t("not_null")),!1}return!0},submitData:function(){if(this.checkSumitData()){var t={animalName:this.animalName,stockID:this.stockID,genotype:this.genotype,resource:this.resource,rows:this.rows};this.$("#addNewStrain").modal("hide"),this.$emit("submitData",t)}},reset:function(){this.animalName="",this.stockID="",this.genotype="",this.resource="",this.environment=[],this.checkExistFlag=!0,this.rows=[{container:"",number:0,useType:"keep",birthday:"",environmentId:"",location:""}],this.initEvn()},initEvn:function(){var t=this;this.$axios({method:"post",url:"/personal/environment"}).then((function(e){"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):t.environment=e.data.retMap.envs})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},checkExist:function(){var t=this,e={gentype:t.genotype};this.$axios.post("/personal/checkGenTypeExist",e).then((function(e){"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):e.data.retMap.hasExist?t.$message.success(t.$t("animal_stock_genotype")+t.$t("hasExist")):t.$message.success(t.$t("animal_stock_genotype")+t.$t("hasNotExist"))})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))}},beforeMount:function(){this.initEvn()},computed:{submitOk:function(){return!0},canCheckRepe:function(){return""==this.genotype}},watch:{}},Qt=Wt,te=(a("5840"),Object(l["a"])(Qt,Zt,Gt,!1,null,"389996b6",null)),ee=te.exports,ae={name:"CurrentStrain",components:{Submitting:M,AddNewStrain:ee,TopNav:G},data:function(){return{strains:[],pageSize:10,total:0,currentPage:0}},beforeMount:function(){this.initTable()},methods:{submitData:function(t){this.$("#submitting").modal("show");var e=this;this.$axios.post("/stock/add",t).then((function(t){e.$("#submitting").modal("hide"),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):e.$message.success(e.$t("save_success"))})).catch((function(t){e.$("#submitting").modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))},initTable:function(){var t=this,e={pageSize:this.pageSize,currentPage:this.currentPage};this.$axios.post("/stock/allStrain",e).then((function(e){console.log(e),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.strains=e.data.retMap.strains,t.total=e.data.retMap.totalnumber)})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},updateTable:function(t){t<0||t>=Math.ceil(this.total/this.pageSize)||(this.currentPage=t,this.initTable())},showAdd:function(){this.$("#addNewStrain").modal("show")}},computed:{pageTotal:function(){for(var t=Math.ceil(this.total/this.pageSize),e=new Array,a=0;a<t;a++)e.push(a+1);return e}},watch:{pageSize:function(){this.currentPage=0,this.initTable()}}},se=ae,ie=(a("2f4a"),Object(l["a"])(se,Jt,Xt,!1,null,"23575077",null)),re=ie.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-nav"),a("div",{staticClass:"detail-all"},[a("a-steps",{style:t.stepStyle,attrs:{type:"navigation",size:"small"},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}},[a("a-step",{attrs:{title:t.$t("orderDetail")+t.$t("confirm"),status:t.setpStatu(0),disabled:t.isDisabled(0)}},["01"==t.ask.currentstatu||"00"==t.ask.currentstatu?a("a-icon",{attrs:{slot:"icon",type:"loading"},slot:"icon"}):t._e()],1),a("a-step",{attrs:{title:t.$t("expectionObject")+t.$t("prepare"),status:t.setpStatu(1),disabled:t.isDisabled(1)}},["02"==t.ask.currentstatu||"03"==t.ask.currentstatu?a("a-icon",{attrs:{slot:"icon",type:"loading"},slot:"icon"}):t._e()],1),a("a-step",{attrs:{title:"实验员确认",status:t.setpStatu(2),disabled:t.isDisabled(2)}},["04"==t.ask.currentstatu?a("a-icon",{attrs:{slot:"icon",type:"loading"},slot:"icon"}):t._e()],1)],1),a("div",{staticClass:"steps-content"},[0==t.current?a("ask-detail-setp1",{attrs:{ask:t.ask,rows:t.rows,task:t.task,"task-id":t.taskId},on:{initAskDetail:this.init}}):t._e(),1==t.current?a("ask-detail-step2",{attrs:{"task-id":t.taskId,task:t.task,ask:t.ask},on:{initAskDetail:this.init}}):t._e(),2==t.current?a("ask-detail-step3",{attrs:{"task-id":t.taskId,task:t.task,ask:t.ask}}):t._e()],1)],1)],1)},ne=[],le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"form-row",staticStyle:{"text-align":"left"}}),a("div",{staticStyle:{"text-align":"left"}},[t._v(" "+t._s(t.$t("expectionObject"))+"： ")]),t._l(t.rows,(function(e){return a("ask-task-detail-item",{key:e.id,attrs:{task:t.task,row:e},on:{handler:t.handlerStat}})})),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group-sm col-md-12"},[a("label",{attrs:{for:"remarks"}},[t._v(t._s(t.$t("remarks")))]),a("textarea",{staticClass:"form-control",attrs:{id:"remarks",rows:"2",disabled:"disabled"},domProps:{value:t.ask.remarks}})])]),a("refuse-alert",{attrs:{"detail-id":t.detailId,"modal-title":t.$t("refuseTask")},on:{confirmFun:t.refuseTask}}),a("confirm-ask-task",{attrs:{"detail-id":t.detailId},on:{confirmData:t.confrimAskData}}),a("submitting",{attrs:{title:t.$t("submitting")}})],2)},ce=[],de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ask-item"},[a("p",[a("button",{staticClass:"btn btn-sm btn-block",class:t.detailStatClass,attrs:{type:"button","data-toggle":"collapse","data-target":"#aa"+t.row.detail.id,"aria-expanded":"false","aria-controls":"aa"+t.row.detail.id}},[t._v(" "+t._s(t.row.animal.genotype+t.detailStatText)+" ")])]),a("div",{staticClass:"collapse",attrs:{id:"aa"+t.row.detail.id}},[a("div",{staticClass:"card card-body",staticStyle:{"text-align":"left"}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"expectedTime"+t.row.detail.id}},[t._v(t._s(t.$t("expectedTime")))]),a("input",{staticClass:"form-control",attrs:{type:"text",disabled:"disabled",id:"expectedTime"+t.row.detail.id},domProps:{value:t.longToStr(t.row.detail.expectedtime)}})]),a("div",{staticClass:"form-group-sm col-md-3 was-validated"},[a("label",{attrs:{for:"Purpose"+t.row.detail.id}},[t._v(t._s(t.$t("purpose")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"Purpose"+t.row.detail.id,disabled:""},domProps:{value:t.row.detail.purpose}})]),a("div",{staticClass:"form-group-sm col-md-3"},[a("label",{attrs:{for:"species"+t.row.detail.id}},[t._v(t._s(t.$t("species")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"species"+t.row.detail.id,disabled:""},domProps:{value:t.row.animal.name}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"strain"+t.row.detail.id}},[t._v(t._s(t.$t("strain")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"strain"+t.row.detail.id,disabled:""},domProps:{value:t.row.animal.stockId}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"virginFly"+t.row.detail.id}},[t._v(t._s(t.$t("virginFly")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"virginFly"+t.row.detail.id,disabled:""},domProps:{value:t.yesOrNo(t.row.detail.virginfly)}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"gender"+t.row.detail.id}},[t._v(t._s(t.$t("gender")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"gender"+t.row.detail.id,disabled:""},domProps:{value:t.gender(t.row.detail.gender)}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"isHybridizationNecessary"+t.row.detail.id}},[t._v(t._s(t.$t("isHybridizationNecessary")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"isHybridizationNecessary"+t.row.detail.id,disabled:""},domProps:{value:t.yesOrNo(t.row.detail.ishybridizationnecessary)}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"hybridStrain"+t.row.detail.id}},[t._v(t._s(t.$t("hybridStrain")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"hybridStrain"+t.row.detail.id,disabled:""},domProps:{value:t.row.detail.hybridstrain}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"specialFeeding"+t.row.detail.id}},[t._v(t._s(t.$t("specialFeeding")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"specialFeeding"+t.row.detail.id,disabled:""},domProps:{value:t.specialFeeding(t.row.detail.specialfeeding)}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"specificFeeding"+t.row.detail.id}},[t._v(t._s(t.$t("specificFeeding")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"specificFeeding"+t.row.detail.id,disabled:""},domProps:{value:t.row.detail.specificfeeding}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"age"+t.row.detail.id}},[t._v(t._s(t.$t("age")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"age"+t.row.detail.id,disabled:""},domProps:{value:t.row.detail.age}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"orderNumber"+t.row.detail.id}},[t._v(t._s(t.$t("orderNumber")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"orderNumber"+t.row.detail.id,disabled:""},domProps:{value:t.row.detail.ordernumber}})]),a("div",{staticClass:"form-group-sm col-md-12"},[a("label",{attrs:{for:"operationProcess"+t.row.detail.id}},[t._v(t._s(t.$t("operationProcess")))]),a("textarea",{staticClass:"form-control",attrs:{id:"operationProcess"+t.row.detail.id,rows:"1",disabled:"disabled"},domProps:{value:t.row.detail.operationprocess}})]),null!=t.hasReason?a("div",{staticClass:"form-group-sm col-md-12"},[a("label",{attrs:{for:"refuseReason"+t.row.detail.id}},[t._v(t._s(t.$t("refuse")+t.$t("reason")))]),a("textarea",{staticClass:"form-control",attrs:{id:"refuseReason"+t.row.detail.id,rows:"1",disabled:"disabled"},domProps:{value:t.row.fail.reason}})]):t._e()]),"00"==t.row.detail.confirmstatu&&this.$store.getters.isCurrentUser(t.task.currentuser)?a("div",{staticClass:"modal-footer",staticStyle:{"margin-top":"10px"}},[a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.handleState("refuse")}}},[t._v(t._s(t.$t("refuse")))]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.handleState("confirm")}}},[t._v(t._s(t.$t("confirm")))])]):t._e()])])])},ue=[],me={name:"AskTaskDetailItem",props:{row:Object,task:Object},methods:{handleState:function(t){this.$emit("handler",t,this.row.detail.id)},longToStr:function(t){var e=new Date(t);return ot(e,"yyyy-MM-dd")},yesOrNo:function(t){return"Y"==t?this.$t("yes"):this.$t("no")},gender:function(t){return"male"==t?this.$t("male"):"female"==t?this.$t("female"):this.$t("empty")},specialFeeding:function(t){return"N"==t?this.$t("normal"):this.$t("special")}},watch:{row:{handler:function(t){console.log(t)},deep:!0}},computed:{detailStatClass:function(){return"00"==this.row.detail.confirmstatu?"btn-outline-danger":"01"==this.row.detail.confirmstatu?"btn-success":"02"==this.row.detail.confirmstatu?"btn-danger":""},detailStatText:function(){return"00"==this.row.detail.confirmstatu?"(未确认)":"01"==this.row.detail.confirmstatu?"(已确认)":"02"==this.row.detail.confirmstatu?"(已拒绝)":""},hasReason:function(){return"02"==this.row.detail.confirmstatu?this.row.fail.reason:null}}},pe=me,he=(a("552e"),Object(l["a"])(pe,de,ue,!1,null,"e780a4ee",null)),fe=he.exports,ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal",attrs:{tabindex:"-1",role:"dialog",id:"refuseAlert"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.modalTitle))]),t._m(0)]),a("div",{staticClass:"modal-body",staticStyle:{"text-align":"left"}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"reason"}},[t._v(t._s(t.$t("reason")))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reason,expression:"reason"}],staticClass:"form-control",attrs:{id:"reason",rows:"3"},domProps:{value:t.reason},on:{input:function(e){e.target.composing||(t.reason=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"reason"}},[t._v(t._s(t.$t("remarks")))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"form-control",attrs:{id:"remarks",rows:"3"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("cancel")))]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.isCanConfirm},on:{click:t.commitReason}},[t._v(t._s(t.$t("confirm")))])])])])])},be=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],ve={name:"refuseAlert",props:{modalTitle:String},data:function(){return{reason:"",remarks:""}},methods:{commitReason:function(){this.$emit("confirmFun",this.reason,this.remarks)}},computed:{isCanConfirm:function(){return""==this.reason}}},ke=ve,ye=Object(l["a"])(ke,ge,be,!1,null,"2249e2c0",null),$e=ye.exports,_e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"confirmAskTask",tabindex:"-1",role:"dialog","aria-labelledby":"confirmAskTaskLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"confirmAskTaskLabel"}},[t._v(t._s(t.$t("confirm")))]),t._m(0)]),a("div",{staticClass:"modal-body",staticStyle:{"text-align":"left"}},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isNeedMore,expression:"isNeedMore"}],staticClass:"form-check-input",attrs:{type:"radio",name:"needmore",id:"exampleRadios1",value:"Y"},domProps:{checked:t._q(t.isNeedMore,"Y")},on:{change:function(e){t.isNeedMore="Y"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"exampleRadios1"}},[t._v(" "+t._s(t.$t("needmore"))+" ")])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isNeedMore,expression:"isNeedMore"}],staticClass:"form-check-input",attrs:{type:"radio",name:"needmore",id:"exampleRadios2",value:"N"},domProps:{checked:t._q(t.isNeedMore,"N")},on:{change:function(e){t.isNeedMore="N"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"exampleRadios2"}},[t._v(" "+t._s(t.$t("noneedmore"))+" ")])]),a("div",{staticClass:"form-group-sm col-md-12",staticStyle:{"margin-top":"10px"}},[a("label",{attrs:{for:"expectedTime"}},[t._v(t._s(t.$t("startmore")))]),a("div",{attrs:{id:"expectedTime"}},[a("date-picker",{attrs:{"value-type":"format",format:"YYYY-MM-DD",disabled:t.timeCanNull,"disabled-date":t.disabledBeforeToday},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)]),a("div",{staticClass:"form-group-sm col-md-12",staticStyle:{"margin-top":"10px"}},[a("label",{attrs:{for:"endmore"}},[t._v(t._s(t.$t("endmore")))]),a("div",{attrs:{id:"endmore"}},[a("date-picker",{attrs:{"value-type":"format",format:"YYYY-MM-DD",disabled:t.timeCanNull,"disabled-date":t.disabledBeforeToday},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)]),a("div",{staticClass:"form-group",staticStyle:{"margin-top":"20px"}},[a("label",{attrs:{for:"remarks"}},[t._v(t._s(t.$t("remarks")))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"form-control",attrs:{id:"remarks",rows:"3"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("cancel")))]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.canConfirm},on:{click:t.confirmReadyData}},[t._v(t._s(t.$t("confirm")))])])])])])},we=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],xe={name:"confirmAskTask",props:{detailId:String},data:function(){return{isNeedMore:"Y",startDate:"",endDate:"",remarks:""}},methods:{disabledBeforeToday:function(t){return t.getTime()<Date.now()-864e5},confirmReadyData:function(){var t={isNeedMore:this.isNeedMore,startDate:this.startDate,endDate:this.endDate,remarks:this.remarks};this.$emit("confirmData",t)}},computed:{canConfirm:function(){return"Y"==this.isNeedMore&&""==this.startDate},timeCanNull:function(){return"Y"!=this.isNeedMore}},watch:{isNeedMore:function(t){"N"==t&&(this.startDate="",this.endDate="")}}},Ce=xe,Se=Object(l["a"])(Ce,_e,we,!1,null,"b42dae4c",null),Ne=Se.exports,De={name:"askDetailSetp1",components:{AskTaskDetailItem:fe,RefuseAlert:$e,Submitting:M,ConfirmAskTask:Ne},props:{taskId:String,rows:Array,ask:Object,task:Object},data:function(){return{detailId:""}},beforeMount:function(){},methods:{longToStr:function(t){var e=new Date(t);return ot(e,"yyyy-MM-dd")},handlerStat:function(t,e){console.log(t,e),this.detailId=e,"refuse"==t?this.$("#refuseAlert").modal("show"):this.$("#confirmAskTask").modal("show")},refuseTask:function(t,e){console.log(t,e),this.$("#refuseAlert").modal("hide"),this.$("#submitting").modal("show");var a=this,s={taskId:this.taskId,detailId:this.detailId,remarks:e,reason:t};this.$axios.post("/task/ask/refuse",s).then((function(t){console.log(t),a.$("#submitting").modal("hide"),"200"!=t.data.code?a.$message.error(a.$t(t.data.code)):a.$emit("initAskDetail")})).catch((function(t){a.$("#submitting").modal("hide"),console.log(t),a.$message.error(a.$t("systemErr"))}))},confrimAskData:function(t){console.log(t),this.$("#confirmAskTask").modal("hide"),this.$("#submitting").modal("show");var e=this;t.taskid=this.taskId,t.detailId=this.detailId,this.$axios.post("/task/ask/confirm",t).then((function(t){e.$("#submitting").modal("hide"),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):e.$emit("initAskDetail")})).catch((function(t){e.$("#submitting").modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))}},watch:{}},Pe=De,Ie=Object(l["a"])(Pe,le,ce,!1,null,"0931df75",null),Te=Ie.exports,je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[t._v(t._s(t.$t("expectionPrep")))]),t._l(t.rows,(function(e){return a("prepare-detail",{key:e.prepare.id,attrs:{task:t.task,row:e},on:{refresh:t.init,confirm:t.handleConfirm}})})),a("comfirm-prepare",{attrs:{preid:t.prepareId},on:{comfirmPrep:t.confirmPrep}}),a("refuse-alert",{attrs:{modalTitle:t.$t("refuse")}}),a("submitting",{attrs:{title:t.$t("submitting")}})],2)},Me=[],Ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("p",[a("button",{staticClass:"btn btn-sm btn-block",class:t.isCompelet,attrs:{type:"button","data-toggle":"collapse","data-target":"#aa"+t.row.prepare.id,"aria-expanded":"false","aria-controls":"aa"+t.row.prepare.id}},[t._v(" "+t._s(t.row.animal.genotype+t.btnText)+" ")])]),a("div",{staticClass:"collapse",attrs:{id:"aa"+t.row.prepare.id}},[a("div",{staticClass:"card card-body"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"needmore"}},[t._v(t._s(t.$t("needmore")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"needmore",disabled:""},domProps:{value:t.needMore}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"startmore"}},[t._v(t._s(t.$t("startmore")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"startmore",disabled:""},domProps:{value:t.longToStr(t.row.prepare.starttime)}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"endmore"}},[t._v(t._s(t.$t("endmore")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"endmore",disabled:""},domProps:{value:t.longToStr(t.row.prepare.endtime)}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"confirmTime"}},[t._v(t._s(t.$t("confirmTime")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"confirmTime",disabled:""},domProps:{value:t.longToStrHMS(t.row.prepare.createtime)}})]),a("div",{staticClass:"form-group col-md-12"},[a("label",{attrs:{for:"remarks"}},[t._v(t._s(t.$t("remarks")))]),a("textarea",{staticClass:"form-control",attrs:{id:"remarks",rows:"2",disabled:""},domProps:{value:t.row.prepare.remarks1}})])]),"02"==t.row.prepare.prestatu?a("hr",{staticClass:"my-4"}):t._e(),"02"==t.row.prepare.prestatu?a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"readyTime"}},[t._v(t._s(t.$t("readyTime")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"readyTime",disabled:""},domProps:{value:t.longToStr(t.row.prepare.completetime)}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"allowTime"}},[t._v(t._s(t.$t("allowTime")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"allowTime",disabled:""},domProps:{value:t.longToStr(t.row.prepare.realexptime)}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"realAge"}},[t._v(t._s(t.$t("realAge")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"realAge",disabled:""},domProps:{value:t.row.prepare.realage}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"realNumber"}},[t._v(t._s(t.$t("realNumber")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"realNumber",disabled:""},domProps:{value:t.row.prepare.realnumber}})]),a("div",{staticClass:"form-group col-md-12"},[a("label",{attrs:{for:"remarks2"}},[t._v(t._s(t.$t("remarks")))]),a("textarea",{staticClass:"form-control",attrs:{id:"remarks2",rows:"2",disabled:""},domProps:{value:t.row.prepare.reamrks2}})])]):t._e(),a("div",{staticClass:"modal-footer"},["01"==t.row.prepare.prestatu&&this.$store.getters.isCurrentUser(t.task.currentuser)?a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.handleState("confirm")}}},[t._v(t._s(t.$t("confirm")))]):t._e()])])])])},Re=[],Ae=a("a925"),Oe={userName:"用户名",userEmail:"邮箱",userPwd:"密码",userPwd2:"确认密码",userLogin:"登录",userRegister:"注册",verification:"输入验证码",getverification:"获取验证码",userNameNull:"用户名不能为空！",userEmailNull:"邮箱不能为空！",userPwdNull:"密码不能为空！",userPwd2Null:"请再次填写密码！",userEmailReg:"邮箱格式有误！",userEmailErr:"请使用脑中心邮箱注册！",userNameErr:"2到16位（中文，字母，数字）",userPwdRegErr:"必须有数字和字母组合",userPwd2NotSame:"两次输入的密码不一致！",verificationStatuErr:"验证码输入错误",verificationStatuOK:"验证通过",registerSucc:"注册成功，请等待管理员审核！",edit:"编辑",delete:"删除",save:"保存",input:"导入",nav_hello:"你好",nav_home:"主页",nav_task:"任务",nav_mytask:"我的任务",nav_personal:"个人中心",nav_stock:"库存中心",personnal_btn_enter:"录入",personnal_btn_stock:"库存",current_stock:"现有库存",current_strain:"现有品系",animal_stock_stockID:"编号",animal_stock_genotype:"基因型",animal_stock_resource:"来源",animal_stock_container:"容器类型",animal_stock_number:"数量",animal_stock_environment:"保存环境",save_success:"保存成功！",reset:"重置",submit:"提交",choose:"请选择",selectedAll:"全选",checkExist:"查重",hasExist:"已存在！",hasNotExist:"不存在！",exit:"退出",createTask:"新建任务",newStrain:"新增品系",useTask:"使用申请",task:"任务",batchEdit:"批量预约",orderDetail:"预约详情",expectionObject:"实验材料",detail:"详情",studyDirector:"实验负责人",purpose:"实验目的",species:"物种",strain:"品系（编号）",virginFly:"处女蝇",gender:"性别",male:"雄性",female:"雌性",empty:"无",yes:"是",no:"否",keep:"保种",resourceOrder:"预约",fileNameErr:"文件命名错误！",isHybridizationNecessary:"是否需要杂交",hybridStrain:"对应的杂交品系",specialFeeding:"特殊饲养条件",specificFeeding:"具体饲养条件",age:"年龄day",orderNumber:"拟用数量",expectedTime:"预计实验时间",operationProcess:"操作流程",operation:"操作",remarks:"备注",urgent:"加急",normal:"常规",special:"特殊",incompleteInformation:"信息不完整",completeInformation:"信息已确认",noUser:"未找到用户",cancel:"取消",confirm:"确认",submitting:"正在提交...",tasktype:"任务类型",currentstatu:"当前状态",creater:"创建人",createTime:"创建时间",refuse:"拒绝",previous:"上一页",next:"下一页",not_null:"不能为空!",expectionPrep:"材料准备",confirmTime:"确认时间",submitTime:"申请时间",birthday:"羽化日期",location:"保存地点",refuseTask:"拒绝请求",needmore:"需要扩繁",noneedmore:"不需要扩繁",startmore:"开始扩繁日期",endmore:"预计扩繁完成日期",reason:"原因",prepare:"准备",readyTime:"样本准备日期ready",realAge:"实际果蝇年龄",realNumber:"实际提供果蝇数量",allowTime:"可以实验时间",isComplete:"需求是否完成",commitSucc:"提交成功",selectRoles:"请选择角色",add:"新增",enterCorrectly:"输入正确",animalName:"动物名称",useType:"用途",supporter:"材料提供人员",processHandle:"流程管理",processMsg:"项目信息",projectName:"项目名称",dataType:"数据类型",principal:"负责人",overText:"导入excel文件将覆盖本页内容！命名规则例：样本录入-核酸-xxx.xls",unAcceptFile:"不合法文件，请上传.xls或.xlsx文件",samplePreparation:"样品制备",sampleInput:"样品录入",libraryPreparation:"文库制备",dismountData:"测序分析",bioinformaticsAnalysis:"生信分析",sampleMsg:"样本类型",nucleicAcid:"核酸",tissue:"组织",cell:"细胞",totalNumber:"总量",staffing:"人员安排",index:"序号",addNewRow:"新增一行",sampleName:"样本名称",sample:"样本",upload:"上传附件",meterial:"唯一资源占用",sampleStatu:"样本状态",tissueNumber:"组织量",bloodVolume:"血液体积",sampleVolume:"样本体积",concentration:"浓度",cellNumber:"细胞个数",cellLife:"细胞活性",cellSort:"细胞分选法",databaseType:"建库类型",SequencingPlatform:"测序平台",sampleIndex:"样本编号",testDate:"检测日期",extractMethod:"提取方法",checkResult:"检测结果",checkRemarks:"检测备注",checkUser:"检测员",reviewer:"审核人",remaining:"剩余量",selectOrderTime:"选择预约时间",start:"开始",tmpSave:"暂存",createdbtime:"建库时间",useNumber:"样本使用量(ug)/细胞使用量（细胞个数）",partsize:"片段大小（bp）",cyclenumber:"常规PCR循环数",databasetype2:"文库类型",databaseindex:"文库编号",createdbuser:"建库人",qbit:"Qubit浓度",libsize:"文库体积（ul）",seqmethods:"测序策略",uploadsize:"上机数据量",databaseunit:"数据量单位",libremark:"建库备注",uploadremark:"上机备注",dateaccount:"数据账号",datepassword:"数据密码",datepath:"数据目录",resultpath:"结果主路径",args:"分析流程/参数",reportpath:"报告地址",analyst:"分析人",complete:"完成",derivativeindex:"样本衍生编号",initSample:"初始样本",arrindex:"批次",accept:"接受",baseInfo:"基本信息",accountInfo:"帐号信息",messageInfo:"通知设置",userHead:"头像",subProcessName:"子流程名称",stop:"停止",outPut:"导出",importOrder:"导入申请任务",numberErr:"必须大于1",systemErr:"系统异常！",about:"关于",E501:"该邮箱已注册，请等待管理员审核！",E502:"该邮箱已注册，请直接登录！",E500:"系统异常！",E503:"验证码校验不通过！",E504:"验证码已过期，请重新发送！",E505:"邮箱不存在！",E511:"密码错误！",E510:"用户不存在！",E520:"基因型已存在！"},ze=Oe,Le={userName:"userName",userEmail:"Email",userPwd:"password",userPwd2:"confirm password",userLogin:"log in",userRegister:"sign in",verification:"Input verification code",getverification:"Get Verification Code",nav_home:"home"},qe=Le;s["a"].use(Ae["a"]);var Fe=new Ae["a"]({locale:localStorage.getItem("local")||"en",messages:{zh:ze,en:qe}}),Ue=Fe,Ve={alicdnIcon:"//at.alicdn.com/t/font_2031063_0ccu40odtb3t.js",isNull:function(t){return null==t||(void 0==t||(""==t||0==t.length))},sampletypes:function(t){var e=new Array;return"01"==t?(e.push({key:"01",val:"基因组DNA"}),e.push({key:"02",val:"total RNA"}),e.push({key:"03",val:"PCR产物"}),e.push({key:"04",val:"chip-seq DNA"}),e.push({key:"05",val:"单细胞扩增产物"}),e.push({key:"06",val:"FFPE"}),e.push({key:"00",val:"其它"})):"02"==t?(e.push({key:"21",val:"组织"}),e.push({key:"22",val:"全血"}),e.push({key:"23",val:"石蜡组织"}),e.push({key:"24",val:"血清"}),e.push({key:"25",val:"口腔拭子"}),e.push({key:"26",val:"菌体"}),e.push({key:"20",val:"其它"})):"03"==t&&(e.push({key:"41",val:"单细胞悬液"}),e.push({key:"40",val:"其他"})),e},sampleStatu:function(t){var e=new Array;return"01"==t?(e.push({key:"01",val:"溶于纯水"}),e.push({key:"02",val:"溶于TE"}),e.push({key:"03",val:"溶于无Rnase水"}),e.push({key:"04",val:"溶于EB"}),e.push({key:"05",val:"干粉"}),e.push({key:"00",val:"其它"})):"02"==t?(e.push({key:"21",val:"速冻组织"}),e.push({key:"22",val:"活体"}),e.push({key:"23",val:"RNAlater保存"}),e.push({key:"24",val:"Trlzol保存"}),e.push({key:"20",val:"其它"})):"03"==t&&(e.push({key:"41",val:"裂解液"}),e.push({key:"42",val:"液氮速冻"}),e.push({key:"40",val:"其它"})),e},cellSortMethods:function(){return[{key:"01",val:"过筛网"},{key:"02",val:"磁珠分选"},{key:"03",val:"口吸管法"},{key:"04",val:"BD流式分选"},{key:"05",val:"NanoCellect 流式分选"}]},databaseTypes:function(t){var e=new Array;return"01"==t?(e.push({key:"01",val:"DNA常规小片段"}),e.push({key:"02",val:"DNA非常规小片段"}),e.push({key:"03",val:"人外显子"}),e.push({key:"04",val:"PCR-free文库"}),e.push({key:"05",val:"真核普通转录组"}),e.push({key:"06",val:"真核链特异性"}),e.push({key:"07",val:"LncRNA"})):"02"==t?(e.push({key:"21",val:"10X单细胞转录组"}),e.push({key:"22",val:"10X空间转录组"}),e.push({key:"23",val:"10X ATAC"}),e.push({key:"24",val:"smart-seq"}),e.push({key:"25",val:"ATAC"}),e.push({key:"26",val:"HI-C"}),e.push({key:"27",val:"DNA常规小片段"}),e.push({key:"28",val:"DNA非常规小片段"}),e.push({key:"29",val:"人外显子"}),e.push({key:"30",val:"PCR-free文库"}),e.push({key:"31",val:"真核普通转录组"}),e.push({key:"32",val:"真核链特异性"}),e.push({key:"33",val:"LncRNA"})):"03"==t&&(e.push({key:"41",val:"10X单细胞转录组"}),e.push({key:"42",val:"10X ATAC"}),e.push({key:"43",val:"smart-seq"}),e.push({key:"44",val:"ATAC"}),e.push({key:"45",val:"HI-C"})),e},seqPlants:function(){var t=new Array;return t.push({key:"01",val:"Hiseq-SE50"}),t.push({key:"02",val:"Hiseq-PE150"}),t.push({key:"03",val:"Hiseq-PE250"}),t.push({key:"00",val:"其它"}),t},extractmethods:function(){var t=new Array;return t.push({key:"01",val:"柱提法"}),t.push({key:"02",val:"磁珠提法"}),t.push({key:"00",val:"其它"}),t},checkresults:function(){var t=new Array;return t.push({key:"01",val:"合格"}),t.push({key:"02",val:"风险"}),t.push({key:"03",val:"不合格"}),t},sampleInits:function(){var t=new Array;return t.push({key:"01",val:Ue.t("nucleicAcid")+Ue.t("sample")}),t.push({key:"02",val:Ue.t("tissue")+Ue.t("sample")}),t.push({key:"03",val:Ue.t("cell")+Ue.t("sample")}),t}},Ye=Ve,He={name:"PrepareDetail",props:{row:Object,task:Object},data:function(){return{}},watch:{},methods:{longToStr:function(t){if(Ye.isNull(t))return"";var e=new Date(t);return ot(e,"yyyy-MM-dd")},longToStrHMS:function(t){var e=new Date(t);return ot(e,"yyyy-MM-dd hh:mm:ss")},handleState:function(t){"confirm"==t?this.$emit("confirm",this.row.prepare.id):this.$("#refuseAlert").modal("show")}},computed:{needMore:function(){return"Y"==this.row.prepare.needmore?"是":"否"},isCompelet:function(){return"01"==this.row.prepare.prestatu?"btn-outline-danger":"btn-success"},btnText:function(){return"01"==this.row.prepare.prestatu?"(准备中)":"(已完成)"}}},Ke=He,Be=Object(l["a"])(Ke,Ee,Re,!1,null,"dae04706",null),Je=Be.exports,Xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"confirmPrepare",tabindex:"-1",role:"dialog","aria-labelledby":"confirmPrepareLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"confirmPrepareLabel"}},[t._v(t._s(t.$t("confirm")))]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-12"},[a("label",{attrs:{for:"readyTime"}},[t._v(t._s(t.$t("readyTime")))]),a("div",{attrs:{id:"readyTime"}},[a("date-picker",{attrs:{"value-type":"format",format:"YYYY-MM-DD","disabled-date":t.disabledBeforeToday},model:{value:t.readyTime,callback:function(e){t.readyTime=e},expression:"readyTime"}})],1)]),a("div",{staticClass:"form-group col-md-12"},[a("label",{attrs:{for:"allowTime"}},[t._v(t._s(t.$t("allowTime")))]),a("div",{attrs:{id:"allowTime"}},[a("date-picker",{attrs:{"value-type":"format",format:"YYYY-MM-DD","disabled-date":t.disabledBeforeToday},model:{value:t.allowTime,callback:function(e){t.allowTime=e},expression:"allowTime"}})],1)]),a("div",{staticClass:"form-group col-md-12"},[a("label",{attrs:{for:"realAge"}},[t._v(t._s(t.$t("realAge")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.realAge,expression:"realAge"}],staticClass:"form-control",class:t.ageisValid,attrs:{type:"number",min:"0",id:"realAge"},domProps:{value:t.realAge},on:{input:function(e){e.target.composing||(t.realAge=e.target.value)}}})]),a("div",{staticClass:"form-group col-md-12"},[a("label",{attrs:{for:"realNumber"}},[t._v(t._s(t.$t("realNumber")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.realNumber,expression:"realNumber"}],staticClass:"form-control",class:t.isValid,attrs:{type:"number",min:"0",id:"realNumber"},domProps:{value:t.realNumber},on:{input:function(e){e.target.composing||(t.realNumber=e.target.value)}}})]),a("div",{staticClass:"form-group col-md-12"},[a("label",{attrs:{for:"remarks2"}},[t._v(t._s(t.$t("remarks")))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"form-control",attrs:{id:"remarks2",rows:"2"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("cancel")))]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.canClick},on:{click:t.completePrep}},[t._v(t._s(t.$t("confirm")))])])])])])},Ze=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Ge={name:"comfirmPrepare",props:{preid:String},data:function(){return{readyTime:"",allowTime:"",remarks:"",realAge:0,realNumber:1,isValid:"",ageisValid:""}},methods:{disabledBeforeToday:function(t){return t.getTime()<Date.now()-864e5},completePrep:function(){if(!this.checkDate()){var t={id:this.preid,readyTime:this.readyTime,allowTime:this.allowTime,remarks:this.remarks,realAge:this.realAge,realNumber:this.realNumber};this.$emit("comfirmPrep",t)}},checkDate:function(){return""==this.readyTime||(""==this.allowTime||(this.realAge<0||this.realNumber<1))}},watch:{realNumber:function(t){this.checkDate(),this.isValid=t<1?"is-invalid":"is-valid"},realAge:function(t){this.checkDate(),this.ageisValid=t>=0?"is-valid":"is-invalid"},readyTime:function(){this.checkDate()},allowTime:function(){this.checkDate()}},computed:{canClick:function(){return this.checkDate()}}},We=Ge,Qe=Object(l["a"])(We,Xe,Ze,!1,null,"7f2b82c4",null),ta=Qe.exports,ea={name:"askDetailStep2",components:{Submitting:M,RefuseAlert:$e,ComfirmPrepare:ta,PrepareDetail:Je},props:{taskId:String,ask:Object,task:Object},data:function(){return{rows:[],prepareId:""}},beforeMount:function(){this.init()},methods:{init:function(){var t={askId:this.ask.id},e=this;this.$axios.post("/task/ask/getPrepare",t).then((function(t){"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):e.rows=t.data.retMap.rows})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))},handleConfirm:function(t){this.prepareId=t,this.$("#confirmPrepare").modal("show")},confirmPrep:function(t){this.$("#confirmPrepare").modal("hide"),this.$("#submitting").modal("show");var e=this;console.log(t),this.$axios.post("/task/ask/confirmPrepare",t).then((function(t){e.$("#submitting").modal("hide"),console.log(t),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(console.log(t),e.init(),e.$emit("initAskDetail"))})).catch((function(t){e.$("#submitting").modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))}},computed:{canEdit:function(){return"02"!=this.ask.currentstatu}}},aa=ea,sa=Object(l["a"])(aa,je,Me,!1,null,"d4fc8bc8",null),ia=sa.exports,ra=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v(" 已准备完成： "),t._l(t.rows,(function(e){return a("prepared-detail",{key:e.prepare.id,attrs:{task:t.task,row:e},on:{confirmTask:t.confirmTask}})})),a("comfirm-prepared",{attrs:{"prepare-id":t.prepareId},on:{submitData:t.submitData}}),a("submitting",{attrs:{title:t.$t("submitting")}})],2)},oa=[],na=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("p",[a("button",{staticClass:"btn btn-sm btn-block",class:t.isCompelet,attrs:{type:"button","data-toggle":"collapse","data-target":"#aa"+t.row.prepare.id,"aria-expanded":"false","aria-controls":"aa"+t.row.prepare.id}},[t._v(" "+t._s(t.row.animal.genotype+t.btnText)+" ")])]),a("div",{staticClass:"collapse",attrs:{id:"aa"+t.row.prepare.id}},[a("div",{staticClass:"card card-body"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"readyTime"}},[t._v(t._s(t.$t("readyTime")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"readyTime",disabled:""},domProps:{value:t.longToStr(t.row.prepare.completetime)}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"allowTime"}},[t._v(t._s(t.$t("allowTime")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"allowTime",disabled:""},domProps:{value:t.longToStr(t.row.prepare.realexptime)}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"realAge"}},[t._v(t._s(t.$t("realAge")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"realAge",disabled:""},domProps:{value:t.row.prepare.realage}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"realNumber"}},[t._v(t._s(t.$t("realNumber")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"realNumber",disabled:""},domProps:{value:t.row.prepare.realnumber}})]),a("div",{staticClass:"form-group col-md-12"},[a("label",{attrs:{for:"remarks2"}},[t._v(t._s(t.$t("remarks")))]),a("textarea",{staticClass:"form-control",attrs:{id:"remarks2",rows:"2",disabled:""},domProps:{value:t.row.prepare.reamrks2}})])]),null!=t.row.confirm?a("hr",{staticClass:"my-4"}):t._e(),null!=t.row.confirm?a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"isComplete"}},[t._v(t._s(t.$t("isComplete")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"isComplete",disabled:""},domProps:{value:t.yesOrNo(t.row.confirm.iscomplete)}})]),a("div",{staticClass:"form-group col-md-12"},[a("label",{attrs:{for:"remarks"}},[t._v(t._s(t.$t("remarks")))]),a("textarea",{staticClass:"form-control",attrs:{id:"remarks",rows:"2",disabled:""},domProps:{value:t.row.confirm.remarks}})])]):t._e(),t.canOperat?a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.handleState("confirm")}}},[t._v(t._s(t.$t("confirm")))])]):t._e()])])])},la=[],ca={name:"PreparedDetail",props:{row:Object,task:Object},methods:{longToStr:function(t){var e=new Date(t);return ot(e,"yyyy-MM-dd")},handleState:function(t){"confirm"==t?this.$emit("confirmTask",this.row.prepare.id):"refuse"==t&&this.$("#refuseAlert").modal("show")},refuseFun:function(t,e){console.log(t,e)},yesOrNo:function(t){return"Y"==t?this.$t("yes"):this.$t("no")}},computed:{btnText:function(){return"02"==this.row.prepare.prestatu?"(未确认)":"03"==this.row.prepare.prestatu?"(已完成)":"(未完成)"},isCompelet:function(){return"02"==this.row.prepare.prestatu?"btn-outline-danger":"03"==this.row.prepare.prestatu?"btn-success":"btn-danger"},canOperat:function(){return"02"==this.row.prepare.prestatu&&!!this.$store.getters.isCurrentUser(this.task.createuser)}}},da=ca,ua=Object(l["a"])(da,na,la,!1,null,"2a830978",null),ma=ua.exports,pa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"confirmPrepared",tabindex:"-1",role:"dialog","aria-labelledby":"confirmPreparedLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"confirmPreparedLabel"}},[t._v(t._s(t.$t("confirm")))]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-12"},[a("label",{attrs:{for:"isComplete"}},[t._v(t._s(t.$t("isComplete")))]),a("div",{attrs:{id:"isComplete"}},[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isComplete,expression:"isComplete"}],staticClass:"form-check-input",attrs:{type:"radio",name:"isComplete",id:"inlineRadio1",value:"Y"},domProps:{checked:t._q(t.isComplete,"Y")},on:{change:function(e){t.isComplete="Y"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio1"}},[t._v(t._s(t.$t("yes")))])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isComplete,expression:"isComplete"}],staticClass:"form-check-input",attrs:{type:"radio",name:"isComplete",id:"inlineRadio2",value:"N"},domProps:{checked:t._q(t.isComplete,"N")},on:{change:function(e){t.isComplete="N"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio2"}},[t._v(t._s(t.$t("no")))])])])]),a("div",{staticClass:"form-group col-md-12"},[a("label",{attrs:{for:"remarks"}},[t._v(t._s(t.$t("remarks")))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"form-control",attrs:{id:"remarks",rows:"3"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("cancel")))]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.confirmTask}},[t._v(t._s(t.$t("confirm")))])])])])])},ha=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],fa={name:"comfirmPrepared",props:{prepareId:String},data:function(){return{isComplete:"Y",remarks:""}},methods:{confirmTask:function(){var t={id:this.prepareId,isComplete:this.isComplete,remarks:this.remarks};this.$emit("submitData",t)}}},ga=fa,ba=Object(l["a"])(ga,pa,ha,!1,null,"747d0fc2",null),va=ba.exports,ka={name:"askDetailStep3",components:{Submitting:M,ComfirmPrepared:va,PreparedDetail:ma},props:{taskId:String,ask:Object,task:Object},data:function(){return{rows:[],prepareId:""}},beforeMount:function(){this.initPage()},methods:{confirmTask:function(t){this.prepareId=t,this.$("#confirmPrepared").modal("show")},submitData:function(t){this.$("#confirmPrepared").modal("hide"),this.$("#submitting").modal("show");var e=this;this.$axios.post("/task/ask/confirmTask",t).then((function(t){e.$("#submitting").modal("hide"),200!=t.data.code?e.$message.error(e.$t(t.data.code)):window.location.reload()})).catch((function(t){e.$("#submitting").modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))},initPage:function(){var t={askId:this.ask.id},e=this;this.$axios.post("/task/ask/getPrepare",t).then((function(t){e.$("#submitting").modal("hide"),200!=t.data.code?e.$message.error(e.$t(t.data.code)):e.rows=t.data.retMap.rows})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))}},watch:{taskId:function(){this.initPage()}}},ya=ka,$a=Object(l["a"])(ya,ra,oa,!1,null,"43e7c43f",null),_a=$a.exports,wa={name:"askDetail",components:{AskDetailStep3:_a,AskDetailStep2:ia,AskDetailSetp1:Te,TopNav:G},data:function(){return{current:0,canClick:0,taskId:"",task:{},rows:[],ask:{},stepStyle:{marginBottom:"60px",boxShadow:"0px -1px 0 0 #e8e8e8 inset"}}},mounted:function(){this.taskId=this.$route.query.taskId,this.init()},methods:{init:function(){var t=this;if(console.log(this.taskId),""!=this.taskId&&void 0!=this.taskId&&null!=this.taskId){this.current=0,this.canClick=0;var e={taskId:this.taskId};this.$axios.post("/task/askTaskDetail",e).then((function(e){if("200"!=e.data.code)t.$message.error(t.$t(e.data.code));else{if(null==e.data.retMap||void 0==e.data.retMap)return;console.log(e),t.rows=e.data.retMap.rows,t.ask=e.data.retMap.ask,t.task=e.data.retMap.task,"01"==e.data.retMap.ask.currentstatu||"00"==e.data.retMap.ask.currentstatu||"09"==e.data.retMap.ask.currentstatu?(t.current=0,t.canClick=0):"02"==e.data.retMap.ask.currentstatu||"03"==e.data.retMap.ask.currentstatu?(t.current=1,t.canClick=1):"04"==e.data.retMap.ask.currentstatu?(t.current=2,t.canClick=2):(t.current=2,t.canClick=3)}})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))}},next:function(){this.current++},isDisabled:function(t){return t>this.canClick},setpStatu:function(t){return"09"==this.ask.currentstatu&&t==this.canClick||"08"==this.ask.currentstatu&&2==t?"error":t<this.canClick?"finish":t>this.canClick?"wait":"process"}},watch:{getTaskId:function(t){this.taskId=t,this.init()},current:function(t){console.log(t)}},computed:{getTaskId:function(){return this.$route.query.taskId}}},xa=wa,Ca=(a("88c6"),Object(l["a"])(xa,oe,ne,!1,null,"a84a9d62",null)),Sa=Ca.exports,Na=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-nav"),a("div",{staticClass:"confirm-container"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-4"},[a("label",{attrs:{for:"creater"}},[t._v(t._s(t.$t("creater")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"creater",disabled:""},domProps:{value:t.creater.name}})]),a("div",{staticClass:"form-group col-md-4"},[a("label",{attrs:{for:"email"}},[t._v(t._s(t.$t("userEmail")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"email",disabled:""},domProps:{value:t.creater.email}})]),a("div",{staticClass:"form-group col-md-4"},[a("label",{attrs:{for:"submitTime"}},[t._v(t._s(t.$t("submitTime")))]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"submitTime",disabled:""},domProps:{value:t.longToStr(t.creater.createtime)}})])]),"03"==t.task.taskstatu?a("hr",{staticClass:"my-4"}):t._e(),"03"==t.task.taskstatu?a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-12"},[a("label",{attrs:{for:"reason"}},[t._v(t._s(t.$t("reason")))]),a("textarea",{staticClass:"form-control",attrs:{id:"reason",rows:"2",disabled:""},domProps:{value:t.fail.reason}})]),a("div",{staticClass:"form-group col-md-12"},[a("label",{attrs:{for:"reason"}},[t._v(t._s(t.$t("remarks")))]),a("textarea",{staticClass:"form-control",attrs:{id:"remarks",rows:"2",disabled:""},domProps:{value:t.fail.remarks}})])]):t._e(),"01"==t.task.taskstatu?a("div",{staticClass:"modal-footer",staticStyle:{"margin-top":"10px"}},[a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.refuseAllow}},[t._v(t._s(t.$t("refuse")))]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.selectRoles}},[t._v(t._s(t.$t("confirm")))])]):t._e()]),a("refuse-alert",{attrs:{"modal-title":t.$t("refuseTask")},on:{confirmFun:t.refuseTask}}),a("submitting",{attrs:{title:t.$t("submitting")}}),a("confirm-allow",{attrs:{roles:t.roles},on:{confrimRoles:t.confrimRoles}})],1)},Da=[],Pa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"confirmAllow",tabindex:"-1",role:"dialog","aria-labelledby":"confirmAllowLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"confirmAllowLabel"}},[t._v(t._s(t.$t("confirm")))]),t._m(0)]),a("div",{staticClass:"modal-body",staticStyle:{"text-align":"left"}},[a("div",{staticClass:"form-group col-md-12"},[a("label",{attrs:{for:"selectRoles"}},[t._v(t._s(t.$t("selectRoles")))]),a("div",{attrs:{id:"selectRoles"}},[a("multiselect",{attrs:{options:t.roles,searchable:!0,"close-on-select":!0,"allow-empty":!1,"show-labels":!1,"track-by":"rolename",label:"rolename",required:"",multiple:!0,taggable:!0,placeholder:t.$t("selectRoles")},model:{value:t.selectRoles,callback:function(e){t.selectRoles=e},expression:"selectRoles"}})],1)])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("cancel")))]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.canConfirm},on:{click:t.confirmSel}},[t._v(t._s(t.$t("confirm")))])])])])])},Ia=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Ta={name:"confirmAllow",props:{roles:Array},data:function(){return{selectRoles:[]}},methods:{confirmSel:function(){for(var t=new Array,e=0;e<this.selectRoles.length;e++)t.push(this.selectRoles[e].id);this.$emit("confrimRoles",t)}},computed:{canConfirm:function(){return 0==this.selectRoles.length}}},ja=Ta,Ma=Object(l["a"])(ja,Pa,Ia,!1,null,"467aeda2",null),Ea=Ma.exports,Ra={name:"userallow",components:{ConfirmAllow:Ea,Submitting:M,RefuseAlert:$e,TopNav:G},data:function(){return{taskId:"",task:{},creater:{},roles:[],fail:{}}},mounted:function(){this.taskId=this.$route.query.taskId,this.initPage()},methods:{initPage:function(){var t={taskId:this.taskId};if(null!=this.taskId&&""!=this.taskId&&void 0!=this.taskId){var e=this;this.$axios.post("/task/user/allowTask",t).then((function(t){"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(console.log(t),e.task=t.data.retMap.task,e.creater=t.data.retMap.creater,e.roles=t.data.retMap.roles,e.fail=t.data.retMap.fail)})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))}},longToStr:function(t){var e=new Date(t);return ot(e,"yyyy-MM-dd")},refuseAllow:function(){this.$("#refuseAlert").modal("show")},selectRoles:function(){this.$("#confirmAllow").modal("show")},refuseTask:function(t,e){console.log(t,e),this.$("#refuseAlert").modal("hide"),this.$("#submitting").modal("show");var a={reason:t,remarks:e,taskId:this.taskId},s=this;this.$axios.post("/task/user/refuseAllow",a).then((function(t){console.log(t),s.$("#submitting").modal("hide"),200!=t.data.code?s.$message.error(s.$t(t.data.code)):(s.$message.success(s.$t("commitSucc")),s.initPage())})).catch((function(t){console.log(t),s.$("#submitting").modal("hide"),s.$message.error(s.$t("systemErr"))}))},confrimRoles:function(t){this.$("#confirmAllow").modal("hide"),this.$("#submitting").modal("show");var e={roles:t,taskId:this.taskId},a=this;this.$axios.post("/task/user/allowCreate",e).then((function(t){a.$("#submitting").modal("hide"),"200"!=t.data.code?a.$message.error(a.$t(t.data.code)):(console.log(t),a.$message.success(a.$t("commitSucc")),a.initPage())})).catch((function(t){console.log(t),a.$("#submitting").modal("hide"),a.$message.error(a.$t("systemErr"))}))}},watch:{getTaskId:function(t){this.taskId=t,this.initPage()}},computed:{getTaskId:function(){return this.$route.query.taskId}}},Aa=Ra,Oa=(a("80e4"),Object(l["a"])(Aa,Na,Da,!1,null,"58cafbee",null)),za=Oa.exports,La=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-nav"),a("div",{staticClass:"process-container"},[a("a-divider",{attrs:{orientation:"left"}},[t._v(t._s(t.$t("processMsg")))]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-3"},[a("label",{attrs:{for:"projectName"}},[t._v(t._s(t.$t("projectName")))]),a("a-input",{attrs:{id:"projectName"},model:{value:t.projectName,callback:function(e){t.projectName=e},expression:"projectName"}})],1),a("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[a("label",{attrs:{for:"dataType"}},[t._v(t._s(t.$t("dataType")))]),a("a-input",{attrs:{id:"dataType"},model:{value:t.dataType,callback:function(e){t.dataType=e},expression:"dataType"}})],1),a("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[a("label",{attrs:{for:"principal"}},[t._v(t._s(t.$t("principal")))]),a("div",{attrs:{id:"principal"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.principal,callback:function(e){t.principal=e},expression:"principal"}},t._l(t.users,(function(e){return a("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),a("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-3"},[a("label",{attrs:{for:"email"}},[t._v(t._s(t.$t("userEmail")))]),a("a-tooltip",{attrs:{placement:"topRight",title:"数据下载及报告分析完成后将发送相关信息至以上邮箱列表",mouseLeaveDelay:1,"auto-adjust-overflow":!0}},[a("a-select",{staticStyle:{width:"100%"},attrs:{id:"email",mode:"tags"},model:{value:t.emails,callback:function(e){t.emails=e},expression:"emails"}},t._l(t.users,(function(e){return a("a-select-option",{key:e.email},[t._v(" "+t._s(e.email)+" ")])})),1)],1)],1),a("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[a("label",{attrs:{for:"sampleMsg"}},[t._v(t._s(t.$t("sampleMsg")))]),a("div",{attrs:{id:"sampleMsg"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple"},model:{value:t.sampleMsg,callback:function(e){t.sampleMsg=e},expression:"sampleMsg"}},[a("a-select-option",{attrs:{value:"01"}},[t._v(t._s(t.$t("nucleicAcid")+t.$t("sample")))]),a("a-select-option",{attrs:{value:"02"}},[t._v(t._s(t.$t("tissue")+t.$t("sample")))]),a("a-select-option",{attrs:{value:"03"}},[t._v(t._s(t.$t("cell")+t.$t("sample")))])],1)],1)]),a("a-divider",{attrs:{orientation:"left"}},[t._v(t._s(t.$t("staffing")))]),a("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[a("label",{attrs:{for:"sampleInput"}},[t._v(t._s(t.$t("sampleInput")+t.$t("principal")))]),a("div",{attrs:{id:"sampleInput"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.sampleInput,callback:function(e){t.sampleInput=e},expression:"sampleInput"}},t._l(t.users,(function(e){return a("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),a("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[a("label",{attrs:{for:"samplePreparation"}},[t._v(t._s(t.$t("samplePreparation")+t.$t("principal")))]),a("div",{attrs:{id:"samplePreparation"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.samplePreparation,callback:function(e){t.samplePreparation=e},expression:"samplePreparation"}},t._l(t.users,(function(e){return a("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),a("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[a("label",{attrs:{for:"libraryPreparation"}},[t._v(t._s(t.$t("libraryPreparation")+t.$t("principal")))]),a("div",{attrs:{id:"libraryPreparation"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.libraryPreparation,callback:function(e){t.libraryPreparation=e},expression:"libraryPreparation"}},t._l(t.users,(function(e){return a("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),a("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[a("label",{attrs:{for:"dismountData"}},[t._v(t._s(t.$t("dismountData")+t.$t("principal")))]),a("div",{attrs:{id:"dismountData"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.dismountData,callback:function(e){t.dismountData=e},expression:"dismountData"}},t._l(t.users,(function(e){return a("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),a("div",{staticClass:"form-group col-md-4 col-sm-12 col-lg-2"},[a("label",{attrs:{for:"bioinformaticsAnalysis"}},[t._v(t._s(t.$t("bioinformaticsAnalysis")+t.$t("principal")))]),a("div",{attrs:{id:"bioinformaticsAnalysis"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.bioinformaticsAnalysis,callback:function(e){t.bioinformaticsAnalysis=e},expression:"bioinformaticsAnalysis"}},t._l(t.users,(function(e){return a("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),a("div",{staticClass:"form-group-sm col-md-12"},[a("label",{attrs:{for:"remarks"}},[t._v(t._s(t.$t("remarks")))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"form-control",attrs:{id:"remarks",placeholder:"例：我很着急",rows:"3"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])],1),a("div",{staticClass:"modal-footer",staticStyle:{"margin-top":"20px"}},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.submitData}},[t._v(t._s(t.$t("submit")))])])],1),a("submitting",{attrs:{title:t.$t("submitting")}})],1)},qa=[],Fa=(a("a15b"),{name:"createProcess",components:{Submitting:M,TopNav:G},data:function(){return{projectName:"",dataType:"",principal:"",emails:[],users:[],remarks:"",sampleMsg:[],samplePreparation:"",libraryPreparation:"",sampleInput:"",dismountData:"",bioinformaticsAnalysis:""}},beforeMount:function(){this.initPage()},methods:{initPage:function(){var t=this;this.$axios.post("/user/getAllUsers").then((function(e){"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):t.users=e.data.retMap.users})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},submitData:function(){if(this.checkData()){var t={projectName:this.projectName,dataType:this.dataType,principal:this.principal,emails:this.emails,sampleMsg:this.sampleMsg.join("##"),samplePreparation:this.samplePreparation,libraryPreparation:this.libraryPreparation,dismountData:this.dismountData,bioinformaticsAnalysis:this.bioinformaticsAnalysis,remarks:this.remarks},e=this;e.$("#submitting").modal("show"),this.$axios.post("/task/addProcess",t).then((function(t){e.$("#submitting").modal("hide"),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(e.$message.success(e.$t("save_success")),e.$router.push("/task"))})).catch((function(t){e.$("#submitting").modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))}},isEmail:function(t,e){console.log(t,e);var a=/^([A-Za-z0-9_\-\\.])+\\@([A-Za-z0-9_\-\\.])+\.([A-Za-z]{2,4})$/;return console.log(a.test(t)),a.test(t)||(e=null),a.test(t)},checkData:function(){return""==this.projectName?(this.$message.error(this.$t("projectName")+this.$t("not_null")),!1):""==this.dataType?(this.$message.error(this.$t("dataType")+this.$t("not_null")),!1):""==this.principal?(this.$message.error(this.$t("principal")+this.$t("not_null")),!1):0==this.emails.length?(this.$message.error(this.$t("userEmail")+this.$t("not_null")),!1):0==this.sampleMsg.length?(this.$message.error(this.$t("sampleMsg")+this.$t("not_null")),!1):""==this.samplePreparation?(this.$message.error(this.$t("samplePreparation")+this.$t("not_null")),!1):""==this.libraryPreparation?(this.$message.error(this.$t("libraryPreparation")+this.$t("not_null")),!1):""==this.dismountData?(this.$message.error(this.$t("dismountData")+this.$t("not_null")),!1):""!=this.bioinformaticsAnalysis||(this.$message.error(this.$t("bioinformaticsAnalysis")+this.$t("not_null")),!1)}},watch:{emails:function(t){if(t.length>0)for(var e=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,a=t.length-1;a>=0;a--)e.test(t[a])||this.$delete(t,a)}}}),Ua=Fa,Va=(a("4e60"),Object(l["a"])(Ua,La,qa,!1,null,"60b1c42d",null)),Ya=Va.exports,Ha=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-nav"),a("div",{staticClass:"process-container"},[a("div",{staticClass:"detail-all"},[a("a-steps",{style:t.stepStyle,attrs:{type:"navigation",size:"small"},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}},[a("a-step",{attrs:{title:t.$t("samplePreparation"),status:t.setpStatu(0),disabled:t.isDisabled(0)}},["20"==t.subTask.currenttatu?a("a-icon",{attrs:{slot:"icon",type:"loading"},slot:"icon"}):t._e()],1),a("a-step",{attrs:{title:t.$t("libraryPreparation"),status:t.setpStatu(1),disabled:t.isDisabled(1)}},["30"==t.subTask.currenttatu?a("a-icon",{attrs:{slot:"icon",type:"loading"},slot:"icon"}):t._e()],1),a("a-step",{attrs:{title:t.$t("dismountData"),status:t.setpStatu(2),disabled:t.isDisabled(2)}},["40"==t.subTask.currenttatu?a("a-icon",{attrs:{slot:"icon",type:"loading"},slot:"icon"}):t._e()],1),a("a-step",{attrs:{title:t.$t("bioinformaticsAnalysis"),status:t.setpStatu(3),disabled:t.isDisabled(3)}},["50"==t.subTask.currenttatu?a("a-icon",{attrs:{slot:"icon",type:"loading"},slot:"icon"}):t._e()],1),a("a-step",{attrs:{title:t.$t("complete"),status:t.setpStatu(4),disabled:t.isDisabled(4)}},["60"==t.subTask.currenttatu?a("a-icon",{attrs:{slot:"icon",type:"loading"},slot:"icon"}):t._e()],1)],1),a("div",{staticClass:"steps-content"},[0==t.current?a("process-step2",{attrs:{process:t.process,"sub-id":t.subId,"task-id":t.subId}}):t._e(),1==t.current?a("process-step3",{attrs:{process:t.process}}):t._e(),2==t.current?a("process-step4",{attrs:{process:t.process}}):t._e(),3==t.current?a("process-step5",{attrs:{process:t.process}}):t._e(),4==t.current?a("process-step6",{attrs:{process:t.process}}):t._e()],1)],1)])],1)},Ka=[],Ba=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{attrs:{columns:t.columns,"data-source":t.data,bordered:"",loading:t.tableLoad,scroll:t.scroll,pagination:{pageSize:20},size:"middle"},scopedSlots:t._u([t._l(this.columnNames,(function(e){return{key:e,fn:function(s,i,r){return[a("div",{key:e},["cellsort"==e?a("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.colIsDisabed(i.initsample,e)},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.cellsort,callback:function(e){t.$set(i,"cellsort",e)},expression:"record.cellsort"}},t._l(t.cellSortMethods,(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"initsample"==e?a("a-select",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:i.initsample,callback:function(e){t.$set(i,"initsample",e)},expression:"record.initsample"}},t._l(t.sampleInits,(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"checkresult"==e?a("a-select",{staticStyle:{width:"100%"},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.checkresult,callback:function(e){t.$set(i,"checkresult",e)},expression:"record.checkresult"}},t._l(t.checkresults,(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"checkuser"==e?a("a-select",{staticStyle:{width:"100%"},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.checkuser,callback:function(e){t.$set(i,"checkuser",e)},expression:"record.checkuser"}},t._l(t.allUsers,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1):"reviewer"==e?a("a-select",{staticStyle:{width:"100%"},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.reviewer,callback:function(e){t.$set(i,"reviewer",e)},expression:"record.reviewer"}},t._l(t.allUsers,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1):"extractmethod"==e?a("a-select",{staticStyle:{width:"100%"},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.extractmethod,callback:function(e){t.$set(i,"extractmethod",e)},expression:"record.extractmethod"}},t._l(t.extractmethods,(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"testdate"==e?a("a-date-picker",{attrs:{format:"YYYY-MM-DD"},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.testdate,callback:function(e){t.$set(i,"testdate",e)},expression:"record.testdate"}}):"databasetype"==e?a("a-select",{staticStyle:{width:"100%"},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.databasetype,callback:function(e){t.$set(i,"databasetype",e)},expression:"record.databasetype"}},t._l(t.databaseTypes(i.initsample),(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"sequencingplatform"==e?a("a-select",{staticStyle:{width:"100%"},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.sequencingplatform,callback:function(e){t.$set(i,"sequencingplatform",e)},expression:"record.sequencingplatform"}},t._l(t.seqPlants,(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"samplevolume"==e?a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.samplevolume,callback:function(e){t.$set(i,"samplevolume",e)},expression:"record.samplevolume"}}):"concentration"==e?a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.concentration,callback:function(e){t.$set(i,"concentration",e)},expression:"record.concentration"}}):"totalnumber"==e?a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.totalnumber,callback:function(e){t.$set(i,"totalnumber",e)},expression:"record.totalnumber"}}):"upload"==e?a("a-upload",{attrs:{name:"file",multiple:!0,headers:t.uploadHeader(i),action:t.uploadUrl,showUploadList:!1},on:{change:t.handleUploadChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(t._s(t.$t("upload"))+" ")],1)],1):"index"!=e?a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:s,disabled:t.colIsDisabed(i.initsample,e)},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i[e],callback:function(a){t.$set(i,e,a)},expression:"record[col]"}}):[t._v(" "+t._s(t.showText(e,s,r))+" ")]],2)]}}})),{key:"operation",fn:function(e,s){return[a("div",{staticClass:"editable-row-operations"},[a("a",{on:{click:function(){return t.save(s.key)}}},[t._v(t._s(t.$t("stop")))])])]}}],null,!0)}),t.canEdit?a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-warning",attrs:{type:"button",disabled:""!==t.editingKey},on:{click:function(e){return t.submitData("tmp")}}},[t._v(t._s(t.$t("tmpSave"))+" ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:""!==t.editingKey},on:{click:function(e){return t.submitData("real")}}},[t._v(t._s(t.$t("submit"))+" ")])]):t._e(),a("submitting",{attrs:{title:t.$t("submitting")}})],1)},Ja=[],Xa=(a("4de4"),a("d81d"),a("2909")),Za=a("5530"),Ga={name:"processStep2",components:{Submitting:M},props:{taskId:String,process:Object,subId:String},data:function(){return this.cacheData=[],{tableLoad:!1,data:[],columns:[],columnNames:[],scroll:{x:1500},editingKey:"",allUsers:[]}},beforeMount:function(){this.initPage()},methods:{handleUploadChange:function(t){"done"==t.file.status?this.$message.success(this.$t("upload")+this.$t("save_success")):"error"==t.file.status&&this.$message.success(this.$t("systemErr"))},colIsDisabed:function(t,e){return("extractmethod"==e||"remaining"==e)&&"02"!=t||(("cellsort"==e||"celllife"==e)&&"03"!=t||("samplename"==e||"selfnumber"==e))},submitData:function(t){var e={processId:this.process.id,data:JSON.stringify(this.data),flag:t},a=this;this.$("#submitting").modal("show"),this.$axios.post("/task/process/submitMakes",e).then((function(t){console.log(t),a.$("#submitting").modal("hide"),"200"!=t.data.code?a.$message.error(a.$t(t.data.code)):(a.$message.success(a.$t("commitSucc")),a.value="",a.initPage(),window.location.reload())})).catch((function(t){a.$("#submitting").modal("hide"),console.log(t),a.$message.error(a.$t("systemErr"))}))},initPage:function(){this.initColumns(this.process.sampletype);var t=this;if(!Ye.isNull(this.process.id)&&!Ye.isNull(this.subId)){t.data=new Array;var e={processId:this.process.id,subId:this.subId};this.$axios.post("/task/process/makeInit",e).then((function(e){if(console.log(e),"200"!=e.data.code)t.$message.error(t.$t(e.data.code));else{if(0!=e.data.retMap.makes.length)for(var a in e.data.retMap.makes){var s=e.data.retMap.makes[a];s.testdate=ot(new Date(s.testdate),"yyyy-MM-dd"),s.key=s.inputid,t.data.push(s)}t.cacheData=t.data.map((function(t){return Object(Za["a"])({},t)})),t.allUsers=e.data.retMap.allUsers}})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))}},initColumns:function(t){console.log(t);var e=0,a=new Array;for(var s in a.push({title:this.$t("index"),dataIndex:"index",width:"50px",fixed:"left",scopedSlots:{customRender:"index"}}),e+=50,a.push({title:this.$t("initSample"),dataIndex:"initsample",width:"150px",scopedSlots:{customRender:"initsample"}}),e+=150,a.push({title:this.$t("sampleName"),dataIndex:"samplename",width:"150px",scopedSlots:{customRender:"samplename"}}),e+=150,a.push({title:this.$t("sampleIndex"),dataIndex:"selfnumber",width:"150px",scopedSlots:{customRender:"selfnumber"}}),e+=150,a.push({title:this.$t("derivativeindex"),dataIndex:"derivativeindex",width:"150px",scopedSlots:{customRender:"derivativeindex"}}),e+=150,a.push({title:this.$t("species"),dataIndex:"species",width:"150px",scopedSlots:{customRender:"species"}}),e+=150,a.push({title:this.$t("tissue")+this.$t("animal_stock_resource"),dataIndex:"tissue",width:"150px",scopedSlots:{customRender:"tissue"}}),e+=150,a.push({title:this.$t("testDate"),dataIndex:"testdate",width:"150px",scopedSlots:{customRender:"testdate"}}),e+=150,a.push({title:this.concentrationName,dataIndex:"concentration",width:"150px",scopedSlots:{customRender:"concentration"}}),e+=150,a.push({title:this.$t("sampleVolume")+"(ul)",dataIndex:"samplevolume",width:"150px",scopedSlots:{customRender:"samplevolume"}}),e+=150,a.push({title:this.totalNumberTitle,dataIndex:"totalnumber",width:"150px",scopedSlots:{customRender:"totalnumber"}}),e+=150,a.push({title:this.$t("cellLife"),dataIndex:"celllife",width:"100px",scopedSlots:{customRender:"celllife"}}),e+=100,a.push({title:this.$t("cellSort"),dataIndex:"cellsort",width:"200px",scopedSlots:{customRender:"cellsort"}}),e+=200,a.push({title:this.$t("extractMethod"),dataIndex:"extractmethod",width:"150px",scopedSlots:{customRender:"extractmethod"}}),e+=150,a.push({title:this.$t("checkResult"),dataIndex:"checkresult",width:"150px",scopedSlots:{customRender:"checkresult"}}),e+=150,a.push({title:this.$t("checkRemarks"),dataIndex:"checkremarks",width:"200px",scopedSlots:{customRender:"checkremarks"}}),e+=200,a.push({title:this.$t("checkUser"),dataIndex:"checkuser",width:"150px",scopedSlots:{customRender:"checkuser"}}),e+=150,a.push({title:this.$t("reviewer"),dataIndex:"reviewer",width:"150px",scopedSlots:{customRender:"reviewer"}}),e+=150,a.push({title:this.$t("databaseType"),dataIndex:"databasetype",width:"200px",scopedSlots:{customRender:"databasetype"}}),e+=200,a.push({title:this.$t("SequencingPlatform"),dataIndex:"sequencingplatform",width:"200px",scopedSlots:{customRender:"sequencingplatform"}}),e+=200,a.push({title:this.$t("remaining"),dataIndex:"remaining",width:"200px",scopedSlots:{customRender:"remaining"}}),e+=200,a.push({title:this.$t("remarks"),dataIndex:"remarks",width:"200px",scopedSlots:{customRender:"remarks"}}),e+=200,a.push({title:this.$t("upload"),dataIndex:"upload",width:"200px",scopedSlots:{customRender:"upload"}}),e+=200,a.push({title:this.$t("operation"),dataIndex:"operation",width:"100px",fixed:"right",scopedSlots:{customRender:"operation"}}),e+=100,this.scroll.x=e,this.columns=a,this.columnNames=new Array,a)this.columnNames.push(a[s].dataIndex)},handleChange:function(t,e,a){var s=Object(Xa["a"])(this.data),i=s.filter((function(t){return e===t.key}))[0];i&&(i[a]=t,this.data=s)},onDelete:function(t){var e=Object(Xa["a"])(this.data);this.data=e.filter((function(e){return e.key!==t}))},edit:function(t){var e=Object(Xa["a"])(this.data),a=e.filter((function(e){return t===e.key}))[0];this.editingKey=t,a&&(a.editable=!0,this.data=e)},save:function(t){var e=Object(Xa["a"])(this.data),a=Object(Xa["a"])(this.cacheData),s=e.filter((function(e){return t===e.key}))[0];if(this.checkRowData(s)){s.add=!1;var i=a.filter((function(e){return t===e.key}))[0];s&&i&&(this.data=e,Object.assign(i,s),this.cacheData=a),s.editable=!1,this.editingKey=""}},cancel:function(t){var e=Object(Xa["a"])(this.data),a=e.filter((function(e){return t===e.key}))[0];if(1==a.add)return this.editingKey="",void this.onDelete(a.key);this.editingKey="",a&&(Object.assign(a,this.cacheData.filter((function(e){return t===e.key}))[0]),a.editable=!1,this.data=e)},checkRowData:function(t){return Ye.isNull(t.samplename)?(this.$message.error(this.$t("sampleName")+this.$t("not_null")),!1):Ye.isNull(t.selfnumber)?(this.$message.error(this.$t("sampleIndex")+this.$t("not_null")),!1):Ye.isNull(t.species)?(this.$message.error(this.$t("species")+this.$t("not_null")),!1):Ye.isNull(t.tissue)?(this.$message.error(this.$t("tissue")+this.$t("animal_stock_resource")+this.$t("not_null")),!1):Ye.isNull(t.testdate)?(Ye.$message.error(this.$t("testDate")+this.$t("not_null")),!1):t.concentration<0?(this.$message.error(this.$t("concentration")+this.$t("not_null")),!1):t.samplevolume<0?(this.$message.error(this.$t("sampleVolume")+this.$t("not_null")),!1):"02"==this.process.sampletype&&Ye.isNull(t.remaining)?(this.$message.error(this.$t("remaining")+this.$t("not_null")),!1):Ye.isNull(t.checkresult)?(this.$message.error(this.$t("checkResult")+this.$t("not_null")),!1):"02"==this.process.sampletype&&Ye.isNull(t.extractmethod)?(this.$message.error(this.$t("extractMethod")+this.$t("not_null")),!1):t.totalNumber<0?(this.$message.error(this.$t("totalNumber")+this.$t("not_null")),!1):"03"==this.process.sampletype&&Ye.isNull(t.celllife)?(this.$message.error(this.$t("celllife")+this.$t("not_null")),!1):"03"==this.process.sampletype&&Ye.isNull(t.cellsort)?(this.$message.error(this.$t("cellsort")+this.$t("not_null")),!1):Ye.isNull(t.databasetype)?(this.$message.error(this.$t("databaseType")+this.$t("not_null")),!1):!Ye.isNull(t.sequencingplatform)||(this.$message.error(this.$t("SequencingPlatform")+this.$t("not_null")),!1)},databaseTypes:function(t){return Ye.databaseTypes(t)},showText:function(t,e,a){if("samplemsg"==t)for(var s in this.sampletypes){var i=this.sampletypes[s];if(i.key==e)return i.val}if("samplestatu"==t)for(var r in this.sampleStatu){var o=this.sampleStatu[r];if(o.key==e)return o.val}if("cellsort"==t)for(var n in this.cellSortMethods){var l=this.cellSortMethods[n];if(l.key==e)return l.val}if("databasetype"==t)for(var c in this.databaseTypes){var d=this.databaseTypes[c];if(d.key==e)return d.val}if("sequencingplatform"==t)for(var u in this.seqPlants){var m=this.seqPlants[u];if(m.key==e)return m.val}if("checkuser"==t||"reviewer"==t)for(var p in this.allUsers){var h=this.allUsers[p];if(h.id==e)return h.name}if("extractmethod"==t)for(var f in this.extractmethods){var g=this.extractmethods[f];if(g.key==e)return g.val}if("checkresult"==t)for(var b in this.checkresults){var v=this.checkresults[b];if(v.key==e)return v.val}return"testdate"==t?Ye.isNull(e)?"":ot(new Date(e),"yyyy-MM-dd"):"index"==t?a+1:e},uploadHeader:function(t){return{token:this.$cookies.get("token"),make:t.id}}},computed:{concentrationName:function(){return"01"==this.process.sampletype?this.$t("concentration")+"(ng/ul)":this.$t("concentration")+"("+this.$t("cellNumber")+"/μl)"},totalNumberTitle:function(){return"01"==this.process.sampletype?this.$t("nucleicAcid")+this.$t("totalNumber")+"(ug)":this.$t("cell")+this.$t("totalNumber")+"("+this.$t("cellNumber")+")"},cellSortMethods:function(){return Ye.cellSortMethods()},seqPlants:function(){return Ye.seqPlants()},extractmethods:function(){return Ye.extractmethods()},checkresults:function(){return Ye.checkresults()},sampleInits:function(){return Ye.sampleInits()},canOperating:function(){return"20"==this.process.taskstatu&&this.$store.getters.getUser.id==this.process.samplepreparation},canEdit:function(){return!(!this.$store.getters.isCurrentUser(this.process.samplepreparation)&&!this.$store.getters.isAdmin)},uploadUrl:function(){return this.$axios.defaults.baseURL+"/file/import/makeUpload"}},watch:{process:{handler:function(){this.initPage()},deep:!0}}},Wa=Ga,Qa=Object(l["a"])(Wa,Ba,Ja,!1,null,"b80862d6",null),ts=Qa.exports,es=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{attrs:{columns:t.columns,"data-source":t.data,bordered:"",loading:t.tableLoad,scroll:t.scroll,pagination:{pageSize:20},size:"middle"},scopedSlots:t._u([t._l(this.columnNames,(function(e){return{key:e,fn:function(s,i,r){return[a("div",{key:e},[i.editable?["createdbtime"==e?a("a-date-picker",{attrs:{format:"YYYY-MM-DD"},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.createdbtime,callback:function(e){t.$set(i,"createdbtime",e)},expression:"record.createdbtime"}}):"concentration"==e?a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.concentration,callback:function(e){t.$set(i,"concentration",e)},expression:"record.concentration"}}):"totalnumber"==e?a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.totalnumber,callback:function(e){t.$set(i,"totalnumber",e)},expression:"record.totalnumber"}}):"usenumber"==e?a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.usenumber,callback:function(e){t.$set(i,"usenumber",e)},expression:"record.usenumber"}}):"partsize"==e?a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.partsize,callback:function(e){t.$set(i,"partsize",e)},expression:"record.partsize"}}):"cyclenumber"==e?a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.cyclenumber,callback:function(e){t.$set(i,"cyclenumber",e)},expression:"record.cyclenumber"}}):"uploadsize"==e?a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.uploadsize,callback:function(e){t.$set(i,"uploadsize",e)},expression:"record.uploadsize"}}):"libsize"==e?a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.libsize,callback:function(e){t.$set(i,"libsize",e)},expression:"record.libsize"}}):"createdbuser"==e?a("a-select",{staticStyle:{width:"100%"},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.createdbuser,callback:function(e){t.$set(i,"createdbuser",e)},expression:"record.createdbuser"}},t._l(t.allUsers,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1):"reviewer"==e?a("a-select",{staticStyle:{width:"100%"},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}},model:{value:i.reviewer,callback:function(e){t.$set(i,"reviewer",e)},expression:"record.reviewer"}},t._l(t.allUsers,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1):"index"!=e?a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:s},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}}}):[t._v(" "+t._s(t.showText(e,s,r))+" ")]]:[t._v(" "+t._s(t.showText(e,s,r))+" ")]],2)]}}})),{key:"operation",fn:function(e,s){return[a("div",{staticClass:"editable-row-operations"},[s.editable?a("span",[a("a",{on:{click:function(){return t.save(s.key)}}},[t._v(t._s(t.$t("save")))]),t._v(" "),a("a-popconfirm",{attrs:{title:"Sure to cancel?"},on:{confirm:function(){return t.cancel(s.key)}}},[a("a",[t._v(t._s(t.$t("cancel")))])])],1):a("span",[a("a",{attrs:{disabled:""!==t.editingKey},on:{click:function(){return t.edit(s.key)}}},[t._v(t._s(t.$t("edit")))]),t._v(" "),t.data.length>1?a("a-popconfirm",{attrs:{title:"Sure to delete?"},on:{confirm:function(){return t.onDelete(s.key)}}},[a("a",{attrs:{disabled:""!==t.editingKey}},[t._v(t._s(t.$t("delete")))])]):t._e()],1)])]}}],null,!0)}),this.canOperating?a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-warning",attrs:{type:"button",disabled:""!==t.editingKey},on:{click:function(e){return t.submitData("tmp")}}},[t._v(t._s(t.$t("tmpSave")))]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:""!==t.editingKey},on:{click:function(e){return t.submitData("real")}}},[t._v(t._s(t.$t("submit")))])]):t._e(),a("submitting",{attrs:{title:t.$t("submitting")}})],1)},as=[],ss={name:"processStep3",components:{Submitting:M},props:{process:Object},data:function(){return this.cacheData=[],{tableLoad:!1,data:[],columns:[],columnNames:[],scroll:{x:1500},editingKey:"",allUsers:[]}},beforeMount:function(){this.initPage()},methods:{submitData:function(t){var e=this;if("real"==t)for(var a=0;a<this.data.length;a++){var s=this.data[a];if(!this.checkRowData(s,a+1))return}var i={processId:this.process.id,datas:JSON.stringify(this.data),type:t};this.$("#submitting").modal("show"),this.$axios.post("/task/process/tempSaveLib",i).then((function(t){e.$("#submitting").modal("hide"),"200"!=t.data.code?(console.log(t),e.$message.error(e.$t(t.data.code))):(e.$message.success(e.$t("commitSucc")),window.location.reload())})).catch((function(t){e.$("#submitting").modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))},initPage:function(){this.initColumns();var t=this;this.$axios.post("/task/process/libInit",{processId:this.process.id}).then((function(e){if("200"!=e.data.code)t.$message.error(t.$t(e.data.code));else{if(0!=e.data.retMap.libs.length)for(var a in t.data=new Array,e.data.retMap.libs){var s=e.data.retMap.libs[a];s.key=s.id,t.data.push(s)}t.cacheData=t.data.map((function(t){return Object(Za["a"])({},t)})),t.allUsers=e.data.retMap.allUsers}})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},initColumns:function(){var t=0,e=new Array;for(var a in e.push({title:this.$t("index"),dataIndex:"index",width:"50px",fixed:"left",scopedSlots:{customRender:"index"}}),t+=50,e.push({title:this.$t("createdbtime"),dataIndex:"createdbtime",width:"150px",scopedSlots:{customRender:"createdbtime"}}),t+=150,e.push({title:this.$t("sampleIndex"),dataIndex:"selfnumber",width:"150px",scopedSlots:{customRender:"selfnumber"}}),t+=150,e.push({title:this.$t("sampleName"),dataIndex:"samplename",width:"150px",scopedSlots:{customRender:"samplename"}}),t+=150,e.push({title:this.$t("species"),dataIndex:"species",width:"150px",scopedSlots:{customRender:"species"}}),t+=150,e.push({title:this.concentrationName,dataIndex:"concentration",width:"150px",scopedSlots:{customRender:"concentration"}}),t+=150,e.push({title:this.totalNumberTitle,dataIndex:"totalnumber",width:"150px",scopedSlots:{customRender:"totalnumber"}}),t+=150,e.push({title:this.$t("cellLife"),dataIndex:"celllife",width:"100px",scopedSlots:{customRender:"celllife"}}),t+=100,e.push({title:this.$t("useNumber"),dataIndex:"usenumber",width:"100px",scopedSlots:{customRender:"usenumber"}}),t+=100,e.push({title:this.$t("partsize"),dataIndex:"partsize",width:"100px",scopedSlots:{customRender:"partsize"}}),t+=100,e.push({title:"index",dataIndex:"libindex",width:"100px",scopedSlots:{customRender:"libindex"}}),t+=100,e.push({title:"barcode",dataIndex:"libbarcode",width:"100px",scopedSlots:{customRender:"libbarcode"}}),t+=100,e.push({title:this.$t("cyclenumber"),dataIndex:"cyclenumber",width:"100px",scopedSlots:{customRender:"cyclenumber"}}),t+=100,e.push({title:this.$t("databasetype2"),dataIndex:"databasetype",width:"100px",scopedSlots:{customRender:"databasetype"}}),t+=100,e.push({title:this.$t("databaseindex"),dataIndex:"databaseindex",width:"100px",scopedSlots:{customRender:"databaseindex"}}),t+=100,e.push({title:this.$t("createdbuser"),dataIndex:"createdbuser",width:"100px",scopedSlots:{customRender:"createdbuser"}}),t+=100,e.push({title:this.$t("reviewer"),dataIndex:"reviewer",width:"150px",scopedSlots:{customRender:"reviewer"}}),t+=150,e.push({title:this.$t("qbit"),dataIndex:"qbit",width:"150px",scopedSlots:{customRender:"qbit"}}),t+=150,e.push({title:this.$t("libsize"),dataIndex:"libsize",width:"150px",scopedSlots:{customRender:"libsize"}}),t+=150,e.push({title:this.$t("seqmethods"),dataIndex:"seqmethods",width:"150px",scopedSlots:{customRender:"seqmethods"}}),t+=150,e.push({title:this.$t("uploadsize"),dataIndex:"uploadsize",width:"150px",scopedSlots:{customRender:"uploadsize"}}),t+=150,e.push({title:this.$t("databaseunit"),dataIndex:"databaseunit",width:"150px",scopedSlots:{customRender:"databaseunit"}}),t+=150,e.push({title:this.$t("libremark"),dataIndex:"libremark",width:"150px",scopedSlots:{customRender:"libremark"}}),t+=150,e.push({title:this.$t("uploadremark"),dataIndex:"uploadremark",width:"150px",scopedSlots:{customRender:"uploadremark"}}),t+=150,this.canOperating&&(e.push({title:this.$t("operation"),dataIndex:"operation",width:"100px",fixed:"right",scopedSlots:{customRender:"operation"}}),t+=100),this.scroll.x=t,this.columns=e,this.columnNames=new Array,e)this.columnNames.push(e[a].dataIndex)},handleChange:function(t,e,a){var s=Object(Xa["a"])(this.data),i=s.filter((function(t){return e===t.key}))[0];i&&(i[a]=t,this.data=s)},onDelete:function(t){var e=Object(Xa["a"])(this.data);this.data=e.filter((function(e){return e.key!==t}))},edit:function(t){var e=Object(Xa["a"])(this.data),a=e.filter((function(e){return t===e.key}))[0];this.editingKey=t,a&&(a.editable=!0,this.data=e)},save:function(t){var e=Object(Xa["a"])(this.data),a=Object(Xa["a"])(this.cacheData),s=e.filter((function(e){return t===e.key}))[0];s.add=!1;var i=a.filter((function(e){return t===e.key}))[0];s&&i&&(this.data=e,Object.assign(i,s),this.cacheData=a),s.editable=!1,this.editingKey=""},cancel:function(t){var e=Object(Xa["a"])(this.data),a=e.filter((function(e){return t===e.key}))[0];if(1==a.add)return this.editingKey="",void this.onDelete(a.key);this.editingKey="",a&&(Object.assign(a,this.cacheData.filter((function(e){return t===e.key}))[0]),a.editable=!1,this.data=e)},checkRowData:function(t,e){var a="第【"+e+"】行，";return Ye.isNull(t.createdbtime)?(this.$message.error(a+this.$t("createdbtime")+this.$t("not_null")),!1):Ye.isNull(t.selfnumber)?(this.$message.error(a+this.$t("sampleIndex")+this.$t("not_null")),!1):Ye.isNull(t.samplename)?(this.$message.error(a+this.$t("sampleName")+this.$t("not_null")),!1):Ye.isNull(t.species)?(this.$message.error(a+this.$t("species")+this.$t("not_null")),!1):Ye.isNull(t.concentration)?(this.$message.error(a+this.$t("concentration")+this.$t("not_null")),!1):Ye.isNull(t.totalnumber)?(this.$message.error(a+this.$t("totalNumber")+this.$t("not_null")),!1):Ye.isNull(t.celllife)?(this.$message.error(a+this.$t("cellLife")+this.$t("not_null")),!1):Ye.isNull(t.usenumber)?(this.$message.error(a+this.$t("useNumber")+this.$t("not_null")),!1):Ye.isNull(t.partsize)?(this.$message.error(a+this.$t("partsize")+this.$t("not_null")),!1):Ye.isNull(t.libindex)?(this.$message.error(a+"index"+this.$t("not_null")),!1):Ye.isNull(t.libbarcode)?(this.$message.error(a+"libbarcode"+this.$t("not_null")),!1):Ye.isNull(t.cyclenumber)?(this.$message.error(a+this.$t("cyclenumber")+this.$t("not_null")),!1):Ye.isNull(t.databasetype)?(this.$message.error(a+this.$t("databaseType")+this.$t("not_null")),!1):Ye.isNull(t.databaseindex)?(this.$message.error(a+this.$t("databaseindex")+this.$t("not_null")),!1):Ye.isNull(t.createdbuser)?(this.$message.error(a+this.$t("createdbuser")+this.$t("not_null")),!1):Ye.isNull(t.reviewer)?(this.$message.error(a+this.$t("reviewer")+this.$t("not_null")),!1):Ye.isNull(t.qbit)?(this.$message.error(a+this.$t("qbit")+this.$t("not_null")),!1):Ye.isNull(t.libsize)?(this.$message.error(a+this.$t("libsize")+this.$t("not_null")),!1):Ye.isNull(t.seqmethods)?(this.$message.error(a+this.$t("seqmethods")+this.$t("not_null")),!1):!Ye.isNull(t.uploadsize)||(this.$message.error(a+this.$t("uploadsize")+this.$t("not_null")),!1)},showText:function(t,e,a){if("index"==t)return a+1;if("createdbtime"==t)return Ye.isNull(e)?"":ot(new Date(e),"yyyy-MM-dd");if("createdbuser"==t||"reviewer"==t)for(var s in this.allUsers){var i=this.allUsers[s];if(i.id==e)return i.name}return e}},computed:{concentrationName:function(){return"01"==this.process.sampletype?this.$t("concentration")+"(ng/ul)":this.$t("concentration")+"("+this.$t("cellNumber")+"/μl)"},totalNumberTitle:function(){return"01"==this.process.sampletype?this.$t("nucleicAcid")+this.$t("totalNumber")+"(ug)":this.$t("cell")+this.$t("totalNumber")+"("+this.$t("cellNumber")+")"},canOperating:function(){return"30"==this.process.taskstatu&&!(!this.$store.getters.isCurrentUser(this.process.sampleinput)&&!this.isAdmin)}},watch:{process:{handler:function(){this.initPage()},deep:!0}}},is=ss,rs=Object(l["a"])(is,es,as,!1,null,"3500c2d4",null),os=rs.exports,ns=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{attrs:{columns:t.columns,"data-source":t.data,bordered:"",loading:t.tableLoad,scroll:t.scroll,pagination:{pageSize:20},size:"middle"},scopedSlots:t._u([t._l(this.columnNames,(function(e){return{key:e,fn:function(s,i,r){return[a("div",{key:e},[i.editable?["index"!=e?a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:s},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}}}):[t._v(" "+t._s(t.showText(e,s,r))+" ")]]:[t._v(" "+t._s(t.showText(e,s,r))+" ")]],2)]}}})),{key:"operation",fn:function(e,s){return[a("div",{staticClass:"editable-row-operations"},[s.editable?a("span",[a("a",{on:{click:function(){return t.save(s.key)}}},[t._v(t._s(t.$t("save")))]),t._v(" "),a("a-popconfirm",{attrs:{title:"Sure to cancel?"},on:{confirm:function(){return t.cancel(s.key)}}},[a("a",[t._v(t._s(t.$t("cancel")))])])],1):a("span",[a("a",{attrs:{disabled:""!==t.editingKey},on:{click:function(){return t.edit(s.key)}}},[t._v(t._s(t.$t("edit")))]),t._v(" "),t.data.length>1?a("a-popconfirm",{attrs:{title:"Sure to delete?"},on:{confirm:function(){return t.onDelete(s.key)}}},[a("a",{attrs:{disabled:""!==t.editingKey}},[t._v(t._s(t.$t("delete")))])]):t._e()],1)])]}}],null,!0)}),this.canOperating?a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-warning",attrs:{type:"button",disabled:""!==t.editingKey},on:{click:function(e){return t.submitData("tmp")}}},[t._v(t._s(t.$t("tmpSave")))]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:""!==t.editingKey},on:{click:function(e){return t.submitData("real")}}},[t._v(t._s(t.$t("submit")))])]):t._e(),a("submitting",{attrs:{title:t.$t("submitting")}})],1)},ls=[],cs={name:"processStep4",components:{Submitting:M},props:{process:Object},data:function(){return this.cacheData=[],{tableLoad:!1,data:[],columns:[],columnNames:[],scroll:{x:1500},editingKey:"",allUsers:[]}},beforeMount:function(){this.initPage()},methods:{initPage:function(){this.initCols();var t=this;this.$axios.post("/task/process/dismountInit",{processId:this.process.id}).then((function(e){if("200"!=e.data.code)t.$message.error(t.$t(e.data.code));else{if(0!=e.data.retMap.datas.length)for(var a in t.data=new Array,e.data.retMap.datas){var s=e.data.retMap.datas[a];s.key=s.id,t.data.push(s)}t.cacheData=t.data.map((function(t){return Object(Za["a"])({},t)})),t.allUsers=e.data.retMap.allUsers}})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},initCols:function(){var t=0,e=new Array;for(var a in e.push({title:this.$t("index"),dataIndex:"index",width:"50px",fixed:"left",scopedSlots:{customRender:"index"}}),t+=50,e.push({title:this.$t("sampleIndex"),dataIndex:"selfnumber",width:"150px",scopedSlots:{customRender:"selfnumber"}}),t+=150,e.push({title:this.$t("sampleName"),dataIndex:"samplename",width:"150px",scopedSlots:{customRender:"samplename"}}),t+=150,e.push({title:this.$t("dateaccount"),dataIndex:"dateaccount",width:"150px",scopedSlots:{customRender:"dateaccount"}}),t+=150,e.push({title:this.$t("datepassword"),dataIndex:"datepassword",width:"150px",scopedSlots:{customRender:"datepassword"}}),t+=150,e.push({title:this.$t("datepath"),dataIndex:"datepath",width:"150px",scopedSlots:{customRender:"datepath"}}),t+=150,e.push({title:this.$t("SequencingPlatform"),dataIndex:"sequencingplatform",width:"200px",scopedSlots:{customRender:"sequencingplatform"}}),t+=200,e.push({title:this.$t("remarks"),dataIndex:"remarks",width:"200px",scopedSlots:{customRender:"remarks"}}),t+=200,this.canOperating&&(e.push({title:this.$t("operation"),dataIndex:"operation",width:"100px",fixed:"right",scopedSlots:{customRender:"operation"}}),t+=100),this.scroll.x=t,this.columns=e,this.columnNames=new Array,e)this.columnNames.push(e[a].dataIndex)},handleChange:function(t,e,a){var s=Object(Xa["a"])(this.data),i=s.filter((function(t){return e===t.key}))[0];i&&(i[a]=t,this.data=s)},onDelete:function(t){var e=Object(Xa["a"])(this.data);this.data=e.filter((function(e){return e.key!==t}))},edit:function(t){var e=Object(Xa["a"])(this.data),a=e.filter((function(e){return t===e.key}))[0];this.editingKey=t,a&&(a.editable=!0,this.data=e)},save:function(t){var e=Object(Xa["a"])(this.data),a=Object(Xa["a"])(this.cacheData),s=e.filter((function(e){return t===e.key}))[0];s.add=!1;var i=a.filter((function(e){return t===e.key}))[0];s&&i&&(this.data=e,Object.assign(i,s),this.cacheData=a),s.editable=!1,this.editingKey=""},cancel:function(t){var e=Object(Xa["a"])(this.data),a=e.filter((function(e){return t===e.key}))[0];if(1==a.add)return this.editingKey="",void this.onDelete(a.key);this.editingKey="",a&&(Object.assign(a,this.cacheData.filter((function(e){return t===e.key}))[0]),a.editable=!1,this.data=e)},submitData:function(t){var e={processId:this.process.id,datas:JSON.stringify(this.data),type:t},a=this;a.$("#submitting").modal("show"),this.$axios.post("/task/process/saveDismountData",e).then((function(t){console.log(t),a.$("#submitting").modal("hide"),200!=t.data.code?a.$message.error(a.$t(t.data.code)):(a.$message.success(a.$t("commitSucc")),window.location.reload())})).catch((function(t){a.$("#submitting").modal("hide"),console.log(t),a.$message.error(a.$t("systemErr"))}))},showText:function(t,e,a){return console.log(t,e,a),"index"==t?a+1:e}},computed:{canOperating:function(){return"40"==this.process.taskstatu&&!(!this.$store.getters.isCurrentUser(this.process.dismountdata)&&!this.isAdmin)}},watch:{process:{handler:function(){this.initPage()},deep:!0}}},ds=cs,us=Object(l["a"])(ds,ns,ls,!1,null,"1688bf66",null),ms=us.exports,ps=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{attrs:{columns:t.columns,"data-source":t.data,bordered:"",loading:t.tableLoad,scroll:t.scroll,pagination:{pageSize:20},size:"middle"},scopedSlots:t._u([t._l(this.columnNames,(function(e){return{key:e,fn:function(s,i,r){return[a("div",{key:e},[i.editable?["index"!=e?a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:s},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}}}):[t._v(" "+t._s(t.showText(e,s,r))+" ")]]:[t._v(" "+t._s(t.showText(e,s,r))+" ")]],2)]}}})),{key:"operation",fn:function(e,s){return[a("div",{staticClass:"editable-row-operations"},[s.editable?a("span",[a("a",{on:{click:function(){return t.save(s.key)}}},[t._v(t._s(t.$t("save")))]),t._v(" "),a("a-popconfirm",{attrs:{title:"Sure to cancel?"},on:{confirm:function(){return t.cancel(s.key)}}},[a("a",[t._v(t._s(t.$t("cancel")))])])],1):a("span",[a("a",{attrs:{disabled:""!==t.editingKey},on:{click:function(){return t.edit(s.key)}}},[t._v(t._s(t.$t("edit")))]),t._v(" "),t.data.length>1?a("a-popconfirm",{attrs:{title:"Sure to delete?"},on:{confirm:function(){return t.onDelete(s.key)}}},[a("a",{attrs:{disabled:""!==t.editingKey}},[t._v(t._s(t.$t("delete")))])]):t._e()],1)])]}}],null,!0)}),this.canOperating?a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-warning",attrs:{type:"button",disabled:""!==t.editingKey},on:{click:function(e){return t.submitData("tmp")}}},[t._v(t._s(t.$t("tmpSave"))+" ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:""!==t.editingKey},on:{click:function(e){return t.submitData("real")}}},[t._v(t._s(t.$t("submit"))+" ")])]):t._e(),a("submitting",{attrs:{title:t.$t("submitting")}})],1)},hs=[],fs={name:"processStep5",components:{Submitting:M},props:{process:Object},data:function(){return this.cacheData=[],{tableLoad:!1,data:[],columns:[],columnNames:[],scroll:{x:1500},editingKey:"",allUsers:[]}},beforeMount:function(){this.initPage()},methods:{initPage:function(){this.initCols();var t=this;this.$axios.post("/task/process/analyseInit",{processId:this.process.id}).then((function(e){if(200!=e.data.code)t.$message.error(t.$t(e.data.code));else{if(0!=e.data.retMap.datas.length)for(var a in t.data=new Array,e.data.retMap.datas){var s=e.data.retMap.datas[a];s.key=s.id,t.data.push(s)}t.cacheData=t.data.map((function(t){return Object(Za["a"])({},t)})),t.allUsers=e.data.retMap.allUsers}})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},initCols:function(){var t=0,e=new Array;for(var a in e.push({title:this.$t("index"),dataIndex:"index",width:"50px",fixed:"left",scopedSlots:{customRender:"index"}}),t+=50,e.push({title:this.$t("sampleIndex"),dataIndex:"selfnumber",width:"150px",scopedSlots:{customRender:"selfnumber"}}),t+=150,e.push({title:this.$t("sampleName"),dataIndex:"samplename",width:"150px",scopedSlots:{customRender:"samplename"}}),t+=150,e.push({title:this.$t("resultpath"),dataIndex:"resultpath",width:"300px",scopedSlots:{customRender:"resultpath"}}),t+=300,e.push({title:this.$t("reportpath"),dataIndex:"reportpath",width:"300px",scopedSlots:{customRender:"reportpath"}}),t+=300,e.push({title:this.$t("args"),dataIndex:"args",width:"200px",scopedSlots:{customRender:"args"}}),t+=200,e.push({title:this.$t("analyst"),dataIndex:"analyst",width:"150px",scopedSlots:{customRender:"analyst"}}),t+=150,e.push({title:this.$t("remarks"),dataIndex:"remarks",width:"200px",scopedSlots:{customRender:"remarks"}}),t+=200,this.canOperating&&(e.push({title:this.$t("operation"),dataIndex:"operation",width:"100px",fixed:"right",scopedSlots:{customRender:"operation"}}),t+=100),this.scroll.x=t,this.columns=e,this.columnNames=new Array,e)this.columnNames.push(e[a].dataIndex)},handleChange:function(t,e,a){var s=Object(Xa["a"])(this.data),i=s.filter((function(t){return e===t.key}))[0];i&&(i[a]=t,this.data=s)},onDelete:function(t){var e=Object(Xa["a"])(this.data);this.data=e.filter((function(e){return e.key!==t}))},edit:function(t){var e=Object(Xa["a"])(this.data),a=e.filter((function(e){return t===e.key}))[0];this.editingKey=t,a&&(a.editable=!0,this.data=e)},save:function(t){var e=Object(Xa["a"])(this.data),a=Object(Xa["a"])(this.cacheData),s=e.filter((function(e){return t===e.key}))[0];s.add=!1;var i=a.filter((function(e){return t===e.key}))[0];s&&i&&(this.data=e,Object.assign(i,s),this.cacheData=a),s.editable=!1,this.editingKey=""},cancel:function(t){var e=Object(Xa["a"])(this.data),a=e.filter((function(e){return t===e.key}))[0];if(1==a.add)return this.editingKey="",void this.onDelete(a.key);this.editingKey="",a&&(Object.assign(a,this.cacheData.filter((function(e){return t===e.key}))[0]),a.editable=!1,this.data=e)},showText:function(t,e,a){return console.log(t,e,a),"index"==t?a+1:e},submitData:function(t){var e=this,a={processId:this.process.id,datas:JSON.stringify(this.data),type:t};e.$("#submitting").modal("show"),this.$axios.post("/task/process/saveAnalyse",a).then((function(t){e.$("#submitting").modal("hide"),200!=t.data.code?e.$message.error(e.$t(t.data.code)):(e.$message.success(e.$t("commitSucc")),window.location.reload())})).catch((function(t){e.$("#submitting").modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))}},computed:{canOperating:function(){return"50"==this.process.taskstatu&&!(!this.$store.getters.isCurrentUser(this.process.bioinformaticsanalysis)&&!this.isAdmin)}},watch:{process:{handler:function(){this.initPage()},deep:!0}}},gs=fs,bs=Object(l["a"])(gs,ps,hs,!1,null,"063cdd9e",null),vs=bs.exports,ks=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-result",{attrs:{title:"Great, we have done all the operations!"},scopedSlots:t._u([{key:"icon",fn:function(){return[a("icon-font",{attrs:{type:"icon-jiyinjiancebaogao"}})]},proxy:!0},{key:"extra",fn:function(){return[a("a-button",{attrs:{type:"primary"}},[t._v(" Next ")])]},proxy:!0}])})],1)},ys=[],$s=a("0c63"),_s=$s["a"].createFromIconfontCN({scriptUrl:Ye.alicdnIcon}),ws={name:"processStep6",components:{IconFont:_s},props:{process:Object},data:function(){return{}}},xs=ws,Cs=Object(l["a"])(xs,ks,ys,!1,null,"75b5c6fc",null),Ss=Cs.exports,Ns={name:"processDetail",components:{ProcessStep6:Ss,ProcessStep5:vs,ProcessStep4:ms,ProcessStep3:os,ProcessStep2:ts,TopNav:G},data:function(){return{current:0,canClick:0,process:{},subTask:{},subId:"",stepStyle:{marginBottom:"60px",boxShadow:"0px -1px 0 0 #e8e8e8 inset"}}},beforeMount:function(){console.log(this.$route.query.subId),this.subId=this.$route.query.subId,this.initPage()},methods:{initPage:function(){var t=this,e={subId:this.subId};Ye.isNull(this.subId)||this.$axios.post("/task/process/subinit",e).then((function(e){200!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.process=e.data.retMap.process,t.subTask=e.data.retMap.subTask,"10"==t.subTask.taskstatu||"20"==t.subTask.taskstatu?(t.current=0,t.canClick=0):"30"==t.subTask.taskstatu?(t.current=1,t.canClick=1):"40"==t.subTask.taskstatu?(t.current=2,t.canClick=2):"50"==t.subTask.taskstatu?(t.current=3,t.canClick=3):"60"==t.subTask.taskstatu?(t.current=4,t.canClick=4):(t.current=0,t.canClick=0))})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},setpStatu:function(t){return t<this.canClick?"finish":t>this.canClick?"wait":"process"},isDisabled:function(t){return t>this.canClick}},watch:{getsubId:function(t){console.log(t),this.subId=t,this.initPage()}},computed:{getsubId:function(){return console.log(this.$route.query.subId),this.$route.query.subId}}},Ds=Ns,Ps=(a("ad04"),Object(l["a"])(Ds,Ha,Ka,!1,null,"b0be114a",null)),Is=Ps.exports,Ts=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-nav"),a("div",{staticClass:"about-container"},[a("a-comment",[a("a-avatar",{attrs:{slot:"avatar",src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",alt:"Han Solo"},slot:"avatar"}),a("div",{attrs:{slot:"content"},slot:"content"},[a("a-form-item",[a("a-textarea",{attrs:{rows:4,value:t.value},on:{change:t.handleChange}})],1),a("a-form-item",[a("a-button",{attrs:{"html-type":"submit",loading:t.submitting,type:"primary"},on:{click:t.handleSubmit}},[t._v(" Add Comment ")])],1)],1)],1),t.comments.length?a("a-list",{attrs:{"data-source":t.comments,header:t.comments.length+" "+(t.comments.length>1?"replies":"reply"),"item-layout":"horizontal"},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{},[a("a-comment",{attrs:{author:e.user.name,content:e.comments,avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",datetime:t.longToStr(e.createtime)}})],1)}}],null,!1,1059595137)}):t._e()],1)],1)},js=[],Ms={name:"about",components:{TopNav:G},data:function(){return{comments:[],submitting:!1,value:"",moment:wt.a}},beforeMount:function(){this.initPage()},methods:{initPage:function(){var t=this;this.$axios.get("/about/suggest").then((function(e){console.log(e),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):t.comments=e.data.retMap.comments})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},longToStr:function(t){var e=new Date(t);return ot(e,"yyyy-MM-dd hh:mm:ss")},handleSubmit:function(){if(this.value){this.submitting=!0;var t={comment:this.value},e=this;this.$axios.post("/about/suggest/commit",t).then((function(t){console.log(t),e.submitting=!1,"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(e.$message.success(e.$t("commitSucc")),e.value="",e.initPage())})).catch((function(t){e.submitting=!1,console.log(t),e.$message.error(e.$t("systemErr"))}))}},handleChange:function(t){this.value=t.target.value}}},Es=Ms,Rs=(a("257e"),Object(l["a"])(Es,Ts,js,!1,null,"a450bbe0",null)),As=Rs.exports,Os=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-nav"),a("div",{staticClass:"resource-container"},[a("a-radio-group",{attrs:{"button-style":"solid"},on:{change:t.onChange},model:{value:t.resource,callback:function(e){t.resource=e},expression:"resource"}},t._l(t.meters,(function(e){return a("a-radio-button",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(t.showName(e))+" ")])})),1),a("a-calendar",{attrs:{disabledDate:t.disabledDate},on:{select:t.showSelectTime},scopedSlots:t._u([{key:"dateCellRender",fn:function(e){return a("ul",{staticClass:"events"},t._l(t.getListData(e),(function(t){return a("li",{key:t.content},[a("a-badge",{attrs:{status:t.type,text:t.content}})],1)})),0)}}])})],1),a("select-time",{attrs:{"current-date":t.selectDate,resource:t.resource},on:{submitData:t.commitTimes}}),a("submitting",{attrs:{title:t.$t("submitting")}})],1)},zs=[],Ls=(a("99af"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"selectTime",tabindex:"-1",role:"dialog","aria-labelledby":"selectTimeLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"selectTimeLabel"}},[t._v(t._s(t.$t("selectOrderTime")))]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("a-checkbox-group",{on:{change:t.onChange},model:{value:t.times,callback:function(e){t.times=e},expression:"times"}},[a("a-card",t._l(t.checkedList,(function(e){return a("a-card-grid",{key:e.key,staticStyle:{width:"25%","text-align":"center"}},[a("a-checkbox",{attrs:{value:e.key,disabled:e.stat}},[t._v(" "+t._s(e.val)+" ")])],1)})),1)],1)],1),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:0==t.times.length},on:{click:t.submitData}},[t._v(t._s(t.$t("confirm")))])])])])])}),qs=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Fs={name:"selectTime",props:{currentDate:Object,resource:String},data:function(){return{checkedList:[{key:9,val:"9:00-10:00",stat:!1},{key:10,val:"10:00-11:00",stat:!1},{key:11,val:"11:00-12:00",stat:!1},{key:12,val:"12:00-13:00",stat:!1},{key:13,val:"13:00-14:00",stat:!1},{key:14,val:"14:00-15:00",stat:!1},{key:15,val:"15:00-16:00",stat:!1},{key:16,val:"16:00-17:00",stat:!1}],times:[],records:[]}},beforeMount:function(){this.initPage()},methods:{initPage:function(){if(void 0!=this.currentDate){this.times=[],console.log(this.currentDate.toDate(),this.resource);var t={currentDate:ot(this.currentDate.toDate(),"yyyy-MM-dd"),resource:this.resource},e=this;this.$axios.post("/task/resource/currentDate",t).then((function(t){if(200!=t.data.code)e.$message.error(e.$t(t.data.code));else if(console.log(t),e.records=t.data.retMap.records,t.data.retMap.records.length>0)for(var a=0;a<t.data.retMap.records.length;a++)for(var s=t.data.retMap.records[a],i=new Date(s.starttime),r=0;r<e.checkedList.length;r++){var o=e.checkedList[r];i.getHours()==o.key&&(o.stat=!0)}})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))}},onChange:function(t){console.log("checked = ",t)},submitData:function(){for(var t=new Array,e=0;e<this.times.length;e++){var a=this.currentDate.toDate(),s=this.times[e];a.setHours(s);var i=a;t.push(i)}var r=JSON.stringify(t);this.times=[],this.$("#selectTime").modal("hide"),this.$emit("submitData",this.resource,r)}},watch:{currentDate:{handler:function(){this.initPage()},deep:!0},resource:function(){this.initPage()}}},Us=Fs,Vs=Object(l["a"])(Us,Ls,qs,!1,null,"4a4e5b01",null),Ys=Vs.exports,Hs={name:"resource",components:{Submitting:M,SelectTime:Ys,TopNav:G},data:function(){return{resource:"",meters:[],records:[],selectDate:void 0}},beforeMount:function(){this.initPage()},methods:{showName:function(t){return void 0==t.email?t.name:t.name+"协助"},onChange:function(){},showSelectTime:function(t){this.selectDate=t,this.$("#selectTime").modal("show")},getListData:function(t){for(var e=new Array,a=0;a<this.records.length;a++){var s=this.records[a];if(ot(new Date(s.starttime),"yyyy-MM-dd")==ot(t.toDate(),"yyyy-MM-dd")){var i=ot(new Date(s.starttime),"hh:00"),r=ot(new Date(s.endtime),"hh:00");e.push({type:"success",content:i+" - "+r})}}return e||[]},initPage:function(){var t=this;this.$axios.post("/task/resource/init").then((function(e){"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.meters=new Array,t.meters=t.meters.concat(e.data.retMap.feeds),t.meters=t.meters.concat(e.data.retMap.meterials),t.resource=t.meters[0].id)})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))},disabledDate:function(t){var e=new Date,a=new Date(e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate());return t<a},commitTimes:function(t,e){console.log(t,e);var a={resourceId:t,times:e},s=this;s.$("#submitting").modal("show"),this.$axios.post("/task/resource/commitTask",a).then((function(t){console.log(t),s.$("#submitting").modal("hide"),200!=t.data.code?s.$message.error(s.$t(t.data.code)):(s.$message.success(s.$t("commitSucc")),window.location.reload())})).catch((function(t){s.$("#submitting").modal("hide"),console.log(t),s.$message.error(s.$t("systemErr"))}))}},watch:{resource:function(t){var e=this;this.$axios.post("/task/resource/getRecords",{recordId:t}).then((function(t){"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(console.log(t),e.records=t.data.retMap.records)})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))}}},Ks=Hs,Bs=(a("a565"),Object(l["a"])(Ks,Os,zs,!1,null,"1937445e",null)),Js=Bs.exports,Xs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-nav"),a("div",{staticClass:"main-container"},[a("process-step1-new",{attrs:{process:t.process}})],1)],1)},Zs=[],Gs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:t.$t("sampleInput")}},[a("template",{slot:"extra"},[a("a-button",{attrs:{disabled:0==t.selectedRows.length,type:"primary"},on:{click:t.subTaskInfo}},[t._v(" "+t._s(t.$t("start"))+" ")]),a("a-button",{attrs:{color:"orange"},on:{click:function(e){return t.submitData("tmp")}}},[t._v(" "+t._s(t.$t("tmpSave"))+" ")]),a("a-button",{staticClass:"editable-add-btn",on:{click:t.handleAdd}},[t._v(" "+t._s(t.$t("add"))+" ")]),a("a-button",{attrs:{icon:"download"},on:{click:t.downLoad}},[t._v(" "+t._s(t.$t("outPut"))+" ")]),a("a-upload",{attrs:{name:"file",accept:".xls,.xlsx",headers:{token:this.$cookies.get("token"),processId:t.process.id},beforeUpload:t.handBeforeUpload,action:this.$axios.defaults.baseURL+"/file/import/sampleInput"},on:{change:t.handUploadChange,reject:t.handUnaccept}},[a("a-tooltip",{attrs:{placement:"topLeft",title:t.$t("overText")}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(t._s(t.$t("input")))],1)],1)],1)],1),a("a-row",{attrs:{type:"flex"}},t._l(t.subs,(function(e){return a("a-tag",{key:e.id,attrs:{color:"pink"},on:{click:function(a){return t.showSubTask(e.id)}}},[t._v(" "+t._s(e.name)+" ")])})),1)],2),a("a-table",{attrs:{columns:t.columns,"data-source":t.data,bordered:"",loading:t.tableLoad,scroll:t.scroll,"row-selection":t.rowSelection,size:"middle"},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var s=e.setSelectedKeys,i=e.selectedKeys,r=e.confirm,o=e.clearFilters,n=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{value:i[0]},on:{change:function(t){return s(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(i,r,n.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(i,r,n.dataIndex)}}},[t._v(" Search ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v(" Reset ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},t._l(this.columnNames,(function(e){return{key:e,fn:function(s,i,r){return[a("div",{key:e},["samplemsg"==e?a("a-select",{staticStyle:{width:"100%"},model:{value:i.samplemsg,callback:function(e){t.$set(i,"samplemsg",e)},expression:"record.samplemsg"}},t._l(t.sampletypes(i.initsample),(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"samplestatu"==e?a("a-select",{staticStyle:{width:"100%"},model:{value:i.samplestatu,callback:function(e){t.$set(i,"samplestatu",e)},expression:"record.samplestatu"}},t._l(t.sampleStatu(i.initsample),(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"cellsort"==e?a("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.colIsDisabed(i.initsample,"cellsort")},model:{value:i.cellsort,callback:function(e){t.$set(i,"cellsort",e)},expression:"record.cellsort"}},t._l(t.cellSortMethods,(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"databasetype"==e?a("a-select",{staticStyle:{width:"100%"},model:{value:i.databasetype,callback:function(e){t.$set(i,"databasetype",e)},expression:"record.databasetype"}},t._l(t.databaseTypes(i.initsample),(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"initsample"==e?a("a-select",{staticStyle:{width:"100%"},model:{value:i.initsample,callback:function(e){t.$set(i,"initsample",e)},expression:"record.initsample"}},t._l(t.sampleInits,(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"sequencingplatform"==e?a("a-select",{staticStyle:{width:"100%"},model:{value:i.sequencingplatform,callback:function(e){t.$set(i,"sequencingplatform",e)},expression:"record.sequencingplatform"}},t._l(t.seqPlants,(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.val)+" ")])})),1):"samplevolume"==e?a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0,disabled:t.colIsDisabed(i.initsample,"samplevolume")},model:{value:i.samplevolume,callback:function(e){t.$set(i,"samplevolume",e)},expression:"record.samplevolume"}}):"tissuenumber"==e?a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0,disabled:t.colIsDisabed(i.initsample,"tissuenumber")},model:{value:i.tissuenumber,callback:function(e){t.$set(i,"tissuenumber",e)},expression:"record.tissuenumber"}}):"bloodvolume"==e?a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0,disabled:t.colIsDisabed(i.initsample,"bloodvolume")},model:{value:i.bloodvolume,callback:function(e){t.$set(i,"bloodvolume",e)},expression:"record.bloodvolume"}}):"concentration"==e?a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0,disabled:t.colIsDisabed(i.initsample,"concentration")},model:{value:i.concentration,callback:function(e){t.$set(i,"concentration",e)},expression:"record.concentration"}}):"totalnumber"==e?a("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{min:0,disabled:t.colIsDisabed(i.initsample,"totalnumber")},model:{value:i.totalnumber,callback:function(e){t.$set(i,"totalnumber",e)},expression:"record.totalnumber"}}):"index"!=e?a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{disabled:t.colIsDisabed(i.initsample,e)},model:{value:i[e],callback:function(a){t.$set(i,e,a)},expression:"record[col]"}}):[t._v(" "+t._s(t.showText(e,s,r,i))+" ")]],2)]}}})),{key:"operation",fn:function(e,s){return[a("div",{staticClass:"editable-row-operations"},[s.editable?a("span",[a("a",{on:{click:function(){return t.save(s.key)}}},[t._v(t._s(t.$t("save")))]),a("a-popconfirm",{attrs:{title:"Sure to cancel?"},on:{confirm:function(){return t.cancel(s.key)}}},[a("a",[t._v(t._s(t.$t("cancel")))])])],1):a("span",[a("a",{attrs:{disabled:""!==t.editingKey},on:{click:function(){return t.edit(s.key)}}},[t._v(t._s(t.$t("edit")))]),t.data.length>1?a("a-popconfirm",{attrs:{title:"Sure to delete?"},on:{confirm:function(){return t.onDelete(s.key)}}},[a("a",{attrs:{disabled:""!==t.editingKey}},[t._v(t._s(t.$t("delete")))])]):t._e()],1)])]}}],null,!0)}),a("sub-task-info",{on:{subTaskInfo:t.startProcess}}),a("submitting",{attrs:{title:t.$t("submitting")}})],1)},Ws=[],Qs=(a("caad"),a("c975"),a("2532"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"subTaskInfo",tabindex:"-1",role:"dialog","aria-labelledby":"subTaskInfolLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"reason"}},[t._v(t._s(t.$t("subProcessName")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.subProcessName,expression:"subProcessName"}],staticClass:"form-control",attrs:{type:"text",id:"reason"},domProps:{value:t.subProcessName},on:{input:function(e){e.target.composing||(t.subProcessName=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"remarks"}},[t._v(t._s(t.$t("remarks")))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"form-control",attrs:{id:"remarks",rows:"3"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.isCanConfirm},on:{click:t.subInfoConfirm}},[t._v(t._s(t.$t("confirm")))])])])])])}),ti=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"subTaskInfoLabel"}},[t._v("Modal title")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],ei={name:"subTaskInfo",data:function(){return{subProcessName:"",remarks:""}},methods:{subInfoConfirm:function(){this.$("#subTaskInfo").modal("hide"),this.$emit("subTaskInfo",this.subProcessName,this.remarks)}},computed:{isCanConfirm:function(){return Ye.isNull(this.subProcessName)}}},ai=ei,si=Object(l["a"])(ai,Qs,ti,!1,null,"5650fd70",null),ii=si.exports,ri={name:"processStep1New",components:{SubTaskInfo:ii,Submitting:M},props:{process:Object},data:function(){return this.cacheData=[],{tableLoad:!1,data:[],columns:[],searchInput:null,searchedColumn:"",columnNames:[],selectedRowKeys:[],selectedRows:[],scroll:{x:1500},editingKey:"",subs:[]}},beforeMount:function(){this.initPage()},methods:{downLoad:function(){var t={processId:this.processId},e=this;this.$axios.post("/task/process/downloadSampleInput",t).then((function(t){console.log(t),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):e.$message.success(e.$t("commitSucc"))})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))},handleSearch:function(t,e,a){e(),this.searchText=t[0],this.searchedColumn=a},handleReset:function(t){t(),this.searchText=""},colIsDisabed:function(t,e){return("tissuenumber"==e||"bloodvolume"==e)&&"02"!=t||(("concentration"==e||"samplevolume"==e||"totalnumber"==e)&&"02"==t||("cellsort"==e||"celllife"==e)&&"03"!=t)},subTaskInfo:function(){this.$("#subTaskInfo").modal("show")},showSubTask:function(t){this.$router.push({name:"processDetail",query:{subId:t}})},startProcess:function(t,e){var a={datas:JSON.stringify(this.selectedRows),processId:this.process.id,type:"sub",subProcessName:t,remarks:e},s=this;this.$("#submitting").modal("show"),this.$axios.post("/task/process/startSubTask",a).then((function(t){s.$("#submitting").modal("hide"),"200"!=t.data.code?s.$message.error(s.$t(t.data.code)):(s.$message.success(s.$t("commitSucc")),s.initPage())})).catch((function(t){console.log(t),s.$("#submitting").modal("hide"),s.$message.error(s.$t("systemErr"))}))},submitData:function(t){var e=this,a={processId:this.process.id,datas:JSON.stringify(this.data),type:t};this.$("#submitting").modal("show"),this.$axios.post("/task/process/commitDatas",a).then((function(t){e.$("#submitting").modal("hide"),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(e.$message.success(e.$t("commitSucc")),window.location.reload())})).catch((function(t){console.log(t),e.$("#submitting").modal("hide"),e.$message.error(e.$t("systemErr"))}))},handBeforeUpload:function(t){return 0!=t.name.indexOf("样本录入-")||"01"==this.process.sampletype&&-1==t.name.indexOf("-核酸-")||"02"==this.process.sampletype&&-1==t.name.indexOf("-组织-")?(this.$message.error(this.$t("fileNameErr")),!1):"02"!=this.process.sampletype||-1!=!t.name.indexOf("-组织-")||(this.$message.error(this.$t("fileNameErr")),!1)},handUnaccept:function(){this.$message.error(this.$t("unAcceptFile"))},handUploadChange:function(t){"done"==t.file.status&&this.initPage()},onDelete:function(t){var e=Object(Xa["a"])(this.data);this.data=e.filter((function(e){return e.key!==t}))},edit:function(t){var e=Object(Xa["a"])(this.data),a=e.filter((function(e){return t===e.key}))[0];this.editingKey=t,a&&(a.editable=!0,this.data=e)},save:function(t){console.log(t);var e=Object(Xa["a"])(this.data),a=Object(Xa["a"])(this.cacheData),s=e.filter((function(e){return t===e.key}))[0];if(this.checkRowData(s)){s.add=!1;var i=a.filter((function(e){return t===e.key}))[0];s&&i&&(this.data=e,Object.assign(i,s),this.cacheData=a),s.editable=!1,this.editingKey=""}},cancel:function(t){var e=Object(Xa["a"])(this.data),a=e.filter((function(e){return t===e.key}))[0];if(1==a.add)return this.editingKey="",void this.onDelete(a.key);this.editingKey="",a&&(Object.assign(a,this.cacheData.filter((function(e){return t===e.key}))[0]),a.editable=!1,this.data=e)},checkRowData:function(t){return this.isNull(t.samplename)?(this.$message.error(this.$t("sampleName")+this.$t("not_null")),!1):this.isNull(t.species)?(this.$message.error(this.$t("species")+this.$t("not_null")),!1):this.isNull(t.tissue)?(this.$message.error(this.$t("tissue")+this.$t("not_null")),!1):this.isNull(t.samplemsg)?(this.$message.error(this.$t("sampleMsg")+this.$t("not_null")),!1):this.isNull(t.samplestatu)?(this.$message.error(this.$t("sampleStatu")+this.$t("not_null")),!1):"03"==this.process.sampletype&&this.isNull(t.celllife)?(this.$message.error(this.$t("celllife")+this.$t("not_null")),!1):"03"==this.process.sampletype&&this.isNull(t.cellsort)?(this.$message.error(this.$t("cellsort")+this.$t("not_null")),!1):this.isNull(t.databasetype)?(this.$message.error(this.$t("databaseType")+this.$t("not_null")),!1):!this.isNull(t.sequencingplatform)||(this.$message.error(this.$t("SequencingPlatform")+this.$t("not_null")),!1)},isNull:function(t){return""==t||null==t||void 0==t},initPage:function(){if(this.initColumns(this.process.sampletype),!Ye.isNull(this.process)&&!Ye.isNull(this.process.id)){var t={processId:this.process.id},e=this;this.tableLoad=!0,e.data=new Array,this.$axios.post("/task/process/sampleInput",t).then((function(t){if(e.tableLoad=!1,"200"!=t.data.code)e.$message.error(e.$t(t.data.code));else if(void 0==t.data.retMap.sampleInputs||null==t.data.retMap.sampleInputs||0==t.data.retMap.sampleInputs.length)e.handleAdd();else{e.editingKey="";for(var a=0;a<t.data.retMap.sampleInputs.length;a++){var s=t.data.retMap.sampleInputs[a];s.key=s.id,e.data.push(s)}e.cacheData=e.data.map((function(t){return Object(Za["a"])({},t)})),e.subs=t.data.retMap.subs,console.log(e.data)}})).catch((function(t){console.log(t),e.tableLoad=!1,e.$message.error(e.$t("systemErr"))}))}},handleAdd:function(){this.editingKey=(new Date).getTime();var t=this.createNewRowData();t.key=this.editingKey,t.editable=!0,t.add=!0,this.data=[].concat(Object(Xa["a"])(this.data),[t]),this.cacheData=this.data.map((function(t){return Object(Za["a"])({},t)}))},createNewRowData:function(){return{index:1,samplename:"",species:"",tissue:"",samplemsg:"",samplestatu:"",tissuenumber:0,bloodvolume:0,concentration:0,samplevolume:0,totalnumber:0,celllife:"",cellsort:"",databasetype:"",sequencingplatform:"",remarks:"",files:[]}},initColumns:function(t){var e=this;console.log(t);var a=0,s=new Array;for(var i in s.push({title:this.$t("index"),dataIndex:"index",width:"50px",fixed:"left",scopedSlots:{customRender:"index"}}),a+=50,s.push({title:this.$t("arrindex"),dataIndex:"arrindex",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"arrindex"},onFilter:function(t,e){return e.arrindex.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){e.searchInput.focus()}),0)}}),a+=150,s.push({title:this.$t("initSample"),dataIndex:"initsample",width:"150px",scopedSlots:{customRender:"initsample"}}),a+=150,s.push({title:this.$t("sampleName"),dataIndex:"samplename",width:"150px",scopedSlots:{customRender:"samplename",filterDropdown:"filterDropdown",filterIcon:"filterIcon"},onFilter:function(t,e){return e.samplename.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){e.searchInput.focus()}),0)}}),a+=150,s.push({title:this.$t("sampleIndex"),dataIndex:"sampleindex",width:"150px",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"sampleindex"},onFilter:function(t,e){return e.sampleindex.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){e.searchInput.focus()}),0)}}),a+=150,s.push({title:this.$t("species"),dataIndex:"species",width:"100px",scopedSlots:{customRender:"species"}}),a+=100,s.push({title:this.$t("tissue")+this.$t("animal_stock_resource"),dataIndex:"tissue",width:"150px",scopedSlots:{customRender:"tissue"}}),a+=150,s.push({title:this.$t("sampleMsg"),dataIndex:"samplemsg",width:"150px",scopedSlots:{customRender:"samplemsg"}}),a+=150,s.push({title:this.$t("sampleStatu"),dataIndex:"samplestatu",width:"150px",scopedSlots:{customRender:"samplestatu"}}),a+=150,s.push({title:this.$t("tissueNumber")+"（g）",dataIndex:"tissuenumber",width:"130px",scopedSlots:{customRender:"tissuenumber"}}),a+=130,s.push({title:this.$t("bloodVolume")+"(ml)",dataIndex:"bloodvolume",width:"130px",scopedSlots:{customRender:"bloodvolume"}}),a+=130,s.push({title:this.concentrationName,dataIndex:"concentration",width:"130px",scopedSlots:{customRender:"concentration"}}),a+=130,s.push({title:this.$t("sampleVolume")+"(ul)",dataIndex:"samplevolume",width:"130px",scopedSlots:{customRender:"samplevolume"}}),a+=130,s.push({title:this.totalNumberTitle,dataIndex:"totalnumber",width:"130px",scopedSlots:{customRender:"totalnumber"}}),a+=130,s.push({title:this.$t("cellLife"),dataIndex:"celllife",width:"100px",scopedSlots:{customRender:"celllife"}}),a+=100,s.push({title:this.$t("cellSort"),dataIndex:"cellsort",width:"200px",scopedSlots:{customRender:"cellsort"}}),a+=200,s.push({title:this.$t("databaseType"),dataIndex:"databasetype",width:"200px",scopedSlots:{customRender:"databasetype"}}),a+=200,s.push({title:this.$t("SequencingPlatform"),dataIndex:"sequencingplatform",width:"200px",scopedSlots:{customRender:"sequencingplatform"}}),a+=200,s.push({title:this.$t("remarks"),dataIndex:"remarks",width:"200px",scopedSlots:{customRender:"remarks"}}),a+=200,this.scroll.x=a,this.columns=s,this.columnNames=new Array,s)this.columnNames.push(s[i].dataIndex)},showText:function(t,e,a,s){if("samplemsg"==t)for(var i in this.sampletypes(s.initsample)){var r=this.sampletypes[i];if(r.key==e)return r.val}if("samplestatu"==t)for(var o in this.sampleStatu(s.initsample)){var n=this.sampleStatu[o];if(n.key==e)return n.val}if("cellsort"==t)for(var l in this.cellSortMethods){var c=this.cellSortMethods[l];if(c.key==e)return c.val}if("databasetype"==t)for(var d in this.databaseTypes(s.initsample)){var u=this.databaseTypes[d];if(u.key==e)return u.val}if("sequencingplatform"==t)for(var m in this.seqPlants){var p=this.seqPlants[m];if(p.key==e)return p.val}if("initSample"==t)for(var h in this.sampleInits){var f=this.sampleInits[h];if(f.key==f)return f.val}return"index"==t?a+1:e},sampletypes:function(t){return Ye.sampletypes(t)},sampleStatu:function(t){return Ye.sampleStatu(t)},databaseTypes:function(t){return Ye.databaseTypes(t)}},computed:{concentrationName:function(){return"01"==this.process.sampletype?this.$t("concentration")+"(ng/ul)":this.$t("concentration")+"("+this.$t("cellNumber")+"/μl)"},totalNumberTitle:function(){return"01"==this.process.sampletype?this.$t("nucleicAcid")+this.$t("totalNumber")+"(ug)":this.$t("cell")+this.$t("totalNumber")+"("+this.$t("cellNumber")+")"},seqPlants:function(){return Ye.seqPlants()},sampleInits:function(){return Ye.sampleInits()},cellSortMethods:function(){return Ye.cellSortMethods()},canOperating:function(){return"10"==this.process.taskstatu&&!(!this.$store.getters.isCurrentUser(this.process.sampleinput)&&!this.isAdmin)},rowSelection:function(){var t=this;return{onChange:function(e,a){console.log("selectedRowKeys: ".concat(e),"selectedRows: ",a),t.selectedRowKeys=e,t.selectedRows=a},getCheckboxProps:function(t){return{props:{disabled:"00"===t.currentstatu,name:t.name}}}}}},watch:{process:{handler:function(){this.initPage()},deep:!0}}},oi=ri,ni=(a("321a"),Object(l["a"])(oi,Gs,Ws,!1,null,"0756a4ba",null)),li=ni.exports,ci={name:"processInit",components:{ProcessStep1New:li,TopNav:G},data:function(){return{taskId:"",process:{}}},beforeMount:function(){this.taskId=this.$route.query.taskId,console.log(this.taskId),this.initPage()},methods:{initPage:function(){var t=this,e={taskId:this.taskId};""!=this.taskId&&void 0!=this.taskId&&null!=this.taskId&&this.$axios.post("/task/process/init",e).then((function(e){200!=e.data.code?t.$message.error(t.$t(e.data.code)):t.process=e.data.retMap.process})).catch((function(e){console.log(e),t.$message.error(t.$t("systemErr"))}))}},watch:{getTaskId:function(t){console.log(t),this.taskId=t,this.initPage()}},computed:{getTaskId:function(){return this.$route.query.taskId}}},di=ci,ui=Object(l["a"])(di,Xs,Zs,!1,null,"7412e2c6",null),mi=ui.exports,pi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-nav"),a("div",{staticClass:"main-container"},[a("a-result",{attrs:{title:t.showTitle,"sub-title":t.subTitle},scopedSlots:t._u([{key:"icon",fn:function(){return["00"==t.partner.taskstatu?a("icon-font",{attrs:{type:"icon-xiezhu"}}):t._e(),"01"==t.partner.taskstatu?a("icon-font",{attrs:{type:"icon-chenggong"}}):t._e(),"02"==t.partner.taskstatu?a("icon-font",{attrs:{type:"icon-jujue"}}):t._e()]},proxy:!0},t.canOperate?{key:"extra",fn:function(){return[a("a-button",{attrs:{type:"primary"},on:{click:t.acceptPartner}},[t._v(" "+t._s(t.$t("accept"))+" ")]),a("a-button",{attrs:{type:"danger"},on:{click:t.showRefuse}},[t._v(" "+t._s(t.$t("refuse"))+" ")])]},proxy:!0}:null],null,!0)})],1),a("refuse-alert",{attrs:{modalTitle:t.$t("refuse")},on:{confirmFun:t.refuse}}),a("submitting",{attrs:{title:t.$t("submitting")}})],1)},hi=[],fi=$s["a"].createFromIconfontCN({scriptUrl:Ye.alicdnIcon}),gi={name:"partnerDetail",components:{Submitting:M,RefuseAlert:$e,IconFont:fi,TopNav:G},data:function(){return{taskId:"",creater:{},records:[],partner:{},fail:{},task:{}}},beforeMount:function(){this.taskId=this.$route.query.taskId,this.initPage()},methods:{initPage:function(){if(!Ye.isNull(this.taskId)){var t={taskId:this.taskId},e=this;this.$axios.post("/task/partner/init",t).then((function(t){if(console.log(t),e.submitting=!1,"200"!=t.data.code)e.$message.error(e.$t(t.data.code));else{if(console.log(t),Ye.isNull(t.data.retMap))return;e.creater=t.data.retMap.creater,e.records=t.data.retMap.records,e.partner=t.data.retMap.partner,e.fail=t.data.retMap.fail,e.task=t.data.retMap.task}})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))}},showRefuse:function(){this.$("#refuseAlert").modal("show")},refuse:function(t,e){console.log(t,e);var a={partnerId:this.partner.id,reason:t,remarks:e},s=this;this.$("#refuseAlert").modal("hide"),this.$("#submitting").modal("show"),this.$axios.post("/task/partner/refuse",a).then((function(t){s.$("#submitting").modal("hide"),"200"!=t.data.code?s.$message.error(s.$t(t.data.code)):(s.$message.success(s.$t("commitSucc")),s.initPage())})).catch((function(t){s.$("#submitting").modal("hide"),console.log(t),s.$message.error(s.$t("systemErr"))}))},acceptPartner:function(){var t={partnerId:this.partner.id},e=this;this.$("#submitting").modal("show"),this.$axios.post("/task/partner/accept",t).then((function(t){e.$("#submitting").modal("hide"),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(e.$message.success(e.$t("commitSucc")),e.initPage())})).catch((function(t){console.log(t),e.$message.error(e.$t("systemErr"))}))}},watch:{getTaskId:function(t){this.taskId=t,this.initPage()}},computed:{getTaskId:function(){return this.$route.query.taskId},showTitle:function(){return this.creater.name+"提出的协作请求！"},subTitle:function(){var t="时间：";if("00"==this.partner.taskstatu)for(var e=0;e<this.records.length;e++){var a=this.records[e];t+="自 "+ot(new Date(a.starttime),"yyyy-MM-dd hh:00")+" 到 "+ot(new Date(a.endtime),"yyyy-MM-dd hh:00")+"       "}else t+=this.partner.remark,"02"==this.partner.taskstatu&&(t+=" "+this.$t("reason")+":"+this.fail.reason);return t},canOperate:function(){return"00"==this.partner.taskstatu&&!!this.$store.getters.isCurrentUser(this.task.currentuser)}}},bi=gi,vi=Object(l["a"])(bi,pi,hi,!1,null,"0b8c0b7c",null),ki=vi.exports,yi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-nav"),a("div",{staticClass:"main-container "},[a("div",{staticClass:"form-row"},[a("a-divider",{attrs:{orientation:"left"}},[t._v(" "+t._s(t.$t("baseInfo"))+" ")]),a("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[a("label",{attrs:{for:"animalName"}},[t._v(t._s(t.$t("animalName")))]),a("a-input",{attrs:{id:"animalName",disabled:""},model:{value:t.stock.animal.name,callback:function(e){t.$set(t.stock.animal,"name",e)},expression:"stock.animal.name"}},[a("icon-font",{attrs:{slot:"prefix",type:"icon-guoying"},slot:"prefix"})],1)],1),a("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[a("label",{attrs:{for:"stockID"}},[t._v(t._s(t.$t("animal_stock_stockID")))]),a("a-input",{attrs:{id:"stockID",disabled:""},model:{value:t.stock.animal.stockId,callback:function(e){t.$set(t.stock.animal,"stockId",e)},expression:"stock.animal.stockId"}},[a("icon-font",{attrs:{slot:"prefix",type:"icon-bianhao"},slot:"prefix"})],1)],1),a("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[a("label",{attrs:{for:"genotype"}},[t._v(t._s(t.$t("animal_stock_genotype")))]),a("a-input",{attrs:{id:"genotype",disabled:""},model:{value:t.stock.animal.genotype,callback:function(e){t.$set(t.stock.animal,"genotype",e)},expression:"stock.animal.genotype"}},[a("icon-font",{attrs:{slot:"prefix",type:"icon-jiyingongcheng"},slot:"prefix"})],1)],1),a("div",{staticClass:"form-group col-md-6 col-sm-12 col-lg-4"},[a("label",{attrs:{for:"resource"}},[t._v(t._s(t.$t("animal_stock_resource")))]),a("a-input",{attrs:{id:"resource",disabled:""},model:{value:t.stock.animal.resource,callback:function(e){t.$set(t.stock.animal,"resource",e)},expression:"stock.animal.resource"}},[a("icon-font",{attrs:{slot:"prefix",type:"icon-laiyuan"},slot:"prefix"})],1)],1)],1),a("a-divider",{attrs:{orientation:"left"}},[t._v(t._s(t.$t("personnal_btn_stock"))+" ")]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[a("label",{attrs:{for:"container"}},[t._v(t._s(t.$t("animal_stock_container")))]),a("a-input",{attrs:{id:"container"},model:{value:t.stock.contanertype,callback:function(e){t.$set(t.stock,"contanertype",e)},expression:"stock.contanertype"}},[a("icon-font",{attrs:{slot:"prefix",type:"icon-rongqi"},slot:"prefix"})],1)],1),a("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[a("label",{attrs:{for:"number"}},[t._v(t._s(t.$t("animal_stock_number")))]),a("div",{attrs:{id:"number"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{min:"0"},model:{value:t.stock.contanernmuber,callback:function(e){t.$set(t.stock,"contanernmuber",e)},expression:"stock.contanernmuber"}})],1)]),a("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[a("label",{attrs:{for:"useType"}},[t._v(t._s(t.$t("useType")))]),a("div",{attrs:{id:"useType"}},[a("a-select",{staticStyle:{width:"100%"},on:{change:t.handleChange},model:{value:t.stock.usagetype,callback:function(e){t.$set(t.stock,"usagetype",e)},expression:"stock.usagetype"}},[a("a-select-option",{attrs:{value:"keep"}},[t._v(" "+t._s(t.$t("keep"))+" ")]),a("a-select-option",{attrs:{value:"stock"}},[t._v(" "+t._s(t.$t("personnal_btn_stock"))+" ")])],1)],1)]),a("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[a("label",{attrs:{for:"environment"}},[t._v(t._s(t.$t("animal_stock_environment")))]),a("div",{attrs:{id:"environment"}},[a("a-select",{staticStyle:{width:"100%"},on:{change:t.handleChange},model:{value:t.stock.environment,callback:function(e){t.$set(t.stock,"environment",e)},expression:"stock.environment"}},t._l(t.stock.envs,(function(e){return a("a-select-option",{key:e.id},[t._v(" "+t._s(e.displayname)+" ")])})),1)],1)]),a("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[a("label",{attrs:{for:"location"}},[t._v(t._s(t.$t("location")))]),a("a-input",{attrs:{id:"location"},model:{value:t.stock.location,callback:function(e){t.$set(t.stock,"location",e)},expression:"stock.location"}},[a("icon-font",{attrs:{slot:"prefix",type:"icon-weizhi"},slot:"prefix"})],1)],1),a("div",{staticClass:"form-group col-md-3 col-sm-12 col-lg-2"},[a("label",{attrs:{for:"birthday"}},[t._v(t._s(t.$t("birthday")))]),a("div",{attrs:{id:"birthday"}},[a("date-picker",{attrs:{"value-type":"format",format:"YYYY-MM-DD",required:""},model:{value:t.birthday,callback:function(e){t.birthday=e},expression:"birthday"}})],1)])]),a("div",{staticClass:"modal-footer",staticStyle:{"margin-top":"10px"}},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.handleState}},[t._v(t._s(t.$t("confirm")))])])],1),a("submitting",{attrs:{title:t.$t("submitting")}})],1)},$i=[],_i=$s["a"].createFromIconfontCN({scriptUrl:Ye.alicdnIcon}),wi={name:"editStock",components:{Submitting:M,TopNav:G,IconFont:_i},data:function(){return{stockId:"",stock:{},birthday:""}},beforeMount:function(){this.stockId=this.$route.query.stockId,this.initPage()},methods:{initPage:function(){if(!Ye.isNull(this.stockId)){var t={stockId:this.stockId},e=this;this.$("#submitting").modal("show"),this.$axios.post("/stock/edit/init",t).then((function(t){e.$("#submitting").modal("hide"),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(console.log(t),e.stock=t.data.retMap.stock)})).catch((function(t){e.$("#submitting").modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))}},handleState:function(){var t={stock:JSON.stringify(this.stock)};this.$("#submitting").modal("show");var e=this;this.$axios.post("/stock/edit/updateStock",t).then((function(t){e.$("#submitting").modal("hide"),"200"!=t.data.code?e.$message.error(e.$t(t.data.code)):(console.log(t),window.location.reload())})).catch((function(t){e.$("#submitting").modal("hide"),console.log(t),e.$message.error(e.$t("systemErr"))}))}},watch:{getStockId:function(t){this.stockId=t,this.initPage()},birthday:function(t){this.stock.birthday=t},stock:{handler:function(t){this.birthday=ot(new Date(t.birthday),"yyyy-MM-dd")},deep:!0}},computed:{getStockId:function(){return this.$route.query.stockId}}},xi=wi,Ci=Object(l["a"])(xi,yi,$i,!1,null,"76d3974b",null),Si=Ci.exports,Ni=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-nav"),a("div",{staticClass:"main-container"},[a("a-layout",{attrs:{id:"components-layout-demo-top-side"}},[a("a-layout-content",[a("a-layout",{staticStyle:{padding:"24px 0",background:"#fff"}},[a("a-layout-sider",{staticStyle:{background:"#fff","text-align":"center"},attrs:{width:"20%"}},[a("a-menu",{staticStyle:{height:"100%"},attrs:{mode:"inline","default-selected-keys":["1"]}},[a("a-menu-item",{key:"1",on:{click:function(e){return t.showContent(1)}}},[t._v(" "+t._s(t.$t("accountInfo"))+" ")]),a("a-menu-item",{key:"2"},[t._v(" "+t._s(t.$t("messageInfo"))+" ")])],1)],1),a("a-layout-content",{style:{padding:"0 24px",minHeight:"280px"}},[a("personal-info")],1)],1)],1)],1)],1)],1)},Di=[],Pi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"text-align":"left"}},[a("br"),a("br"),a("a-form",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-item",{attrs:{label:t.$t("userHead")}},[a("div",[a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v("点击更换头像")])]),a("a-upload",{attrs:{name:"file",showUploadList:!1,action:this.$axios.defaults.baseURL+"file/import/userImage",headers:{token:this.$cookies.get("token")}},on:{change:t.headUpload}},[a("a-avatar",{attrs:{size:50,src:t.userHeadSrc}})],1)],2)],1)]),a("a-form-item",{attrs:{label:t.$t("userName")}},[a("a-input",{attrs:{id:"userName",disabled:""},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1),a("a-form-item",{attrs:{label:t.$t("userPwd")}},[a("a-input-password",{attrs:{id:"userPwd",disabled:!t.isEditPwd},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}}),t.isEditPwd?a("a-input-password",{attrs:{id:"userPwd2"},model:{value:t.passwd2,callback:function(e){t.passwd2=e},expression:"passwd2"}}):t._e(),t.isEditPwd?a("a-input",{attrs:{placeholder:"输入验证码"},model:{value:t.vid,callback:function(e){t.vid=e},expression:"vid"}}):t._e(),t.isEditPwd?a("a-button",{on:{click:t.comfirmPwd}},[t._v(t._s(t.$t("confirm")))]):t._e(),t.isEditPwd?a("a-button",{on:{click:t.cancelClick}},[t._v(t._s(t.$t("cancel")))]):t._e(),t.isEditPwd?t._e():a("a-button",{on:{click:t.editPassword}},[t._v("修改密码")])],1),a("a-form-item",{attrs:{label:t.$t("userEmail")}},[a("a-input",{attrs:{id:"userEmail",disabled:""},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1)],1),a("submitting",{attrs:{title:t.$t("submitting")}})],1)},Ii=[],Ti={name:"personalInfo",components:{Submitting:M},data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:12}},user:{},isEditPwd:!1,passwd2:"",vid:""}},beforeMount:function(){this.initPage()},methods:{initPage:function(){this.isEditPwd=!1,this.user=this.$store.getters.getUser},headUpload:function(t){console.log(t),"done"==t.file.status&&window.location.reload()},cancelClick:function(){window.location.reload()},comfirmPwd:function(){if(Ye.isNull(this.user.password))this.$message.error(this.$t("userPwdNull"));else if(Ye.isNull(this.passwd2))this.$message.error(this.$t("userPwd2Null"));else if(this.user.password==this.passwd2)if(Ye.isNull(this.vid))this.$message.error(this.$t("verification"));else{var t=this,e={password:this.$md5(this.passwd2),vid:this.vid};this.$("#submitting").modal("show"),this.$axios.post("/personal/editPassword/confirm",e).then((function(e){t.$("#submitting").modal("hide"),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.$message.success("修改成功！"),t.isEditPwd=!1)})).catch((function(e){t.$("#submitting").modal("hide"),console.log(e),t.$message.error(t.$t("systemErr"))}))}else this.$message.error(this.$t("userPwd2NotSame"))},editPassword:function(){var t=this;this.$("#submitting").modal("show"),this.$axios.post("/personal/editPwd/sendVid").then((function(e){t.$("#submitting").modal("hide"),"200"!=e.data.code?t.$message.error(t.$t(e.data.code)):(t.$message.success("验证码已发送至您的邮箱！"),t.isEditPwd=!0,t.user.password="")})).catch((function(e){t.$("#submitting").modal("hide"),console.log(e),t.$message.error(t.$t("systemErr"))}))}},computed:{userId:function(){return this.$store.getters.getUser.id},userHeadSrc:function(){return this.$axios.defaults.baseURL+"user/userHead/"+this.userId+".png"}}},ji=Ti,Mi=Object(l["a"])(ji,Pi,Ii,!1,null,"7b37a36c",null),Ei=Mi.exports,Ri={name:"personalMain",components:{PersonalInfo:Ei,TopNav:G},data:function(){return{collapsed:!1,type:1}},methods:{showContent:function(t){this.type=t}},computed:{}},Ai=Ri,Oi=(a("b7b7"),Object(l["a"])(Ai,Ni,Di,!1,null,"f848d0ae",null)),zi=Oi.exports;s["a"].use(p["a"]);var Li=[{path:"",component:O,meta:{index:0}},{path:"/login",component:O,meta:{index:0}},{path:"/register",component:V,meta:{index:0}},{path:"/home",component:ft,meta:{index:0}},{path:"/personal/animalStock",component:Ft,meta:{index:0}},{path:"/task",component:Bt,meta:{index:0}},{path:"/about",component:As,meta:{index:0}},{path:"/task/process",component:Ya,meta:{index:0}},{path:"/stock/edit",name:"stockEdit",component:Si,meta:{index:0}},{path:"/personal/main",name:"personalMain",component:zi,meta:{index:0}},{path:"/task/askDetail",name:"askDetail",component:Sa,meta:{index:0}},{path:"/task/partnerDetail",name:"partnerDetail",component:ki,meta:{index:0}},{path:"/task/processDetail",name:"processDetail",component:Is,meta:{index:0}},{path:"/task/processInit",name:"processInit",component:mi,meta:{index:0}},{path:"/task/userAllow",name:"userAllow",component:za,meta:{index:0}},{path:"/stock/currentStrain",component:re,meta:{index:0}},{path:"/task/resourceOrder",name:"resource",component:Js,meta:{index:0}},{path:"/*",login:O,meta:{index:0}}],qi=new p["a"]({routes:Li}),Fi=qi,Ui="http://localhost:8081",Vi={baseURLpre:Ui},Yi=a("1157"),Hi=a.n(Yi),Ki=a("2b27"),Bi=a.n(Ki),Ji=a("8237"),Xi=a.n(Ji),Zi=a("2f62");s["a"].use(Zi["a"]);var Gi=new Zi["a"].Store({state:{user:{}},mutations:{saveUser:function(t,e){t.user=e}},getters:{getUser:function(t){return t.user},isResearcher:function(t){for(var e=0;e<t.user.roles.length;e++){var a=t.user.roles[e];if("999999"==a.roletype||"01"==a.roletype)return!0}return!1},isFeeder:function(t){for(var e=0;e<t.user.roles.length;e++){var a=t.user.roles[e];if("999999"==a.roletype||"02"==a.roletype)return!0}return!1},isAdmin:function(t){for(var e=0;e<t.user.roles.length;e++){var a=t.user.roles[e];if("999999"==a.roletype)return!0}return!1},isOther:function(t){for(var e=0;e<t.user.roles.length;e++){var a=t.user.roles[e];if("999999"==a.roletype||"09"==a.roletype)return!0}return!1},isCurrentUser:function(t){return function(e){if(t.user.id==e)return!0;for(var a=0;a<t.user.roles.length;a++){var s=t.user.roles[a];if("999999"==s.roletype)return!0}return!1}}}}),Wi=(a("202f"),a("f23d")),Qi=a("ec45"),tr=(a("411c"),a("8e5f")),er=a.n(tr);s["a"].use(Wi["a"]),s["a"].component("multiselect",er.a),s["a"].use(Qi["a"]),s["a"].prototype.GLOBAL=Vi,s["a"].prototype.$axios=m.a,s["a"].prototype.$=Hi.a,s["a"].prototype.$md5=Xi.a,s["a"].prototype.$cookies=Bi.a,m.a.defaults.baseURL="http://119.90.33.35:3566/",m.a.interceptors.request.use((function(t){var e=Bi.a.get("token");return e&&(t.headers["token"]=e),t}),(function(t){return console.log(t),Promise.reject(t)})),m.a.interceptors.response.use((function(t){return t}),(function(t){if(console.log(t),t.response)switch(t.response.status){case 401:Bi.a.remove("token"),Hi()("body").css("background-image","./assets/login-back.jpg"),Fi.replace({path:"/login",query:{redirect:Fi.currentRoute.fullPath}})}return Promise.reject("转到登录啦！")})),Fi.beforeEach((function(t,e,a){if("/register"===t.path)a();else if("/login"===t.path||"/"===t.path){var s=Bi.a.get("token");"null"!=s&&""!=s&&null!=s?a("/home"):a()}else{var i=Bi.a.get("token");"null"===i||""===i||null===i?a("/login"):a()}})),s["a"].config.productionTip=!1,new s["a"]({router:Fi,i18n:Ue,store:Gi,render:function(t){return t(d)}}).$mount("#app")},5840:function(t,e,a){"use strict";var s=a("3168"),i=a.n(s);i.a},"58f5":function(t,e,a){},"5f8d":function(t,e,a){},"645b":function(t,e,a){},"6e85":function(t,e,a){"use strict";var s=a("3cce"),i=a.n(s);i.a},"704a":function(t,e,a){},7556:function(t,e,a){},"80c4":function(t,e,a){"use strict";var s=a("af73"),i=a.n(s);i.a},"80e4":function(t,e,a){"use strict";var s=a("5f8d"),i=a.n(s);i.a},"85ec":function(t,e,a){},"88c6":function(t,e,a){"use strict";var s=a("f776"),i=a.n(s);i.a},a565:function(t,e,a){"use strict";var s=a("4657"),i=a.n(s);i.a},ad04:function(t,e,a){"use strict";var s=a("704a"),i=a.n(s);i.a},af73:function(t,e,a){},b1c2:function(t,e,a){"use strict";var s=a("fab5"),i=a.n(s);i.a},b7b7:function(t,e,a){"use strict";var s=a("645b"),i=a.n(s);i.a},bef6:function(t,e,a){},cb08:function(t,e,a){},e269:function(t,e,a){},e353:function(t,e,a){"use strict";var s=a("bef6"),i=a.n(s);i.a},f776:function(t,e,a){},f92c:function(t,e,a){"use strict";var s=a("1e51"),i=a.n(s);i.a},fab5:function(t,e,a){},fea1:function(t,e,a){}});
//# sourceMappingURL=app.64663e30.js.map